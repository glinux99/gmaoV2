const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-BEz4e6bY.js","assets/app-DlduAWKf.js","assets/app-oOiQJpiJ.css"])))=>i.map(i=>d[i]);
import{a as je,b as Fe,r as P,Y as Oe,d as X,_ as Ne,a1 as ue,a0 as pe,aO as qe,w as Ye,l as a,j as o,q as y,i as r,t as v,m as $,n as U,U as C,e as N,f as j,g as Je,p,v as A,s as _,aH as Xe,bf as ge,o as n,A as R,V as fe,x as Ge,y as He}from"./app-DlduAWKf.js";import{T as Ke}from"./index-CIbd6ueC.js";import{s as Qe}from"./index-wymrxioL.js";import{s as Ze}from"./index-8z2yMFcP.js";import{s as et}from"./index-B-_-q9gt.js";import{a as tt,s as ot}from"./index-BkbW9Xve.js";import{s as lt}from"./index-C9R50wYM.js";import{s as st}from"./index-CNkdB_e-.js";import{s as nt}from"./index-Ch-n-CSZ.js";import{s as at}from"./index-a9PRqMaA.js";import{s as it}from"./index-D3Ycc_U5.js";import{s as rt}from"./index-CnzqN9d3.js";import{C as dt,p as ct,a as ut,b as pt,B as gt,c as ft,L as ht,P as vt,d as mt,A as bt,R as xt}from"./chart-B59wzfTt.js";import{B as he,L as yt,P as kt,D as _t,R as Ct}from"./index-DaCXqB4B.js";import{d as wt}from"./vuedraggable.umd-nBCUN0L2.js";import{_ as St}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BQ2NgWYf.js";import"./index-BZHgS7zr.js";import"./index-B298Qu7_.js";import"./index-BLVnNnMn.js";import"./index-DEclfOQi.js";const c=q=>(Ge("data-v-17877039"),q=q(),He(),q),Vt={class:"quantum-studio h-screen flex flex-col bg-[#050507] text-slate-200 overflow-hidden font-sans select-none"},$t={class:"h-16 border-b border-white/5 bg-black/60 backdrop-blur-2xl flex items-center justify-between px-6 z-[100]"},Ut={class:"flex items-center gap-6"},Tt=Xe('<div class="flex items-center gap-3 group cursor-pointer" data-v-17877039><div class="w-9 h-9 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20 group-hover:scale-110 transition-transform" data-v-17877039><i class="pi pi-bolt text-white" data-v-17877039></i></div><div class="flex flex-col" data-v-17877039><span class="text-[11px] font-black tracking-[0.2em] uppercase leading-none" data-v-17877039>Quantum <span class="text-indigo-400" data-v-17877039>Omni</span></span><span class="text-[8px] text-slate-500 font-bold tracking-tighter uppercase mt-1" data-v-17877039>v11.5 Studio Engine</span></div></div><div class="h-8 w-px bg-white/10 mx-2" data-v-17877039></div>',2),Lt={class:"flex items-center gap-1 bg-white/5 p-1 rounded-lg border border-white/10"},Rt={class:"flex items-center gap-4"},Dt={class:"flex items-center bg-black/40 rounded-full px-3 py-1.5 border border-white/10 gap-4"},Wt={class:"flex items-center gap-2"},Pt={class:"text-[10px] font-black uppercase tracking-widest min-w-[80px] text-center"},Et=c(()=>o("div",{class:"h-4 w-px bg-white/10"},null,-1)),It={class:"flex items-center gap-3"},At=c(()=>o("i",{class:"pi pi-search text-[10px] text-slate-500"},null,-1)),Mt={class:"text-[10px] font-mono text-indigo-400 w-10 text-right"},zt={class:"flex-grow flex overflow-hidden"},Bt={class:"w-20 border-r border-white/5 bg-black/20 flex flex-col items-center py-8 gap-6 shrink-0"},jt=["onClick"],Ft={class:"absolute left-16 bg-indigo-600 text-[8px] font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 uppercase tracking-tighter whitespace-nowrap z-50 shadow-xl"},Ot=["onClick","onMousedown"],Nt={class:"absolute -top-11 left-0 flex gap-1 opacity-0 group-hover/widget:opacity-100 transition-all no-drag z-[60] bg-slate-900/80 backdrop-blur-sm border border-white/10 rounded-lg shadow-2xl"},qt={class:"p-2 text-indigo-400 cursor-move"},Yt=c(()=>o("i",{class:"pi pi-arrows-alt text-[10px]"},null,-1)),Jt=[Yt],Xt=["onClick"],Gt=["onClick"],Ht=c(()=>o("i",{class:"pi pi-copy text-[10px]"},null,-1)),Kt=[Ht],Qt=["onClick"],Zt=c(()=>o("i",{class:"pi pi-trash text-[10px]"},null,-1)),eo=[Zt],to={key:0,class:"w-full h-full no-drag flex-grow"},oo=["onBlur"],lo={key:1,class:"w-full h-full overflow-hidden no-drag bg-white rounded-lg shadow-inner flex-grow"},so={class:"w-full h-full border-collapse"},no={key:2,class:"w-full h-full p-2 pointer-events-none flex-grow"},ao={key:3,class:"w-full h-full flex flex-col justify-center px-4 no-drag flex-grow"},io={class:"text-[9px] font-black text-slate-400 uppercase tracking-widest"},ro={class:"flex items-baseline gap-1"},co={class:"text-[10px] font-bold text-emerald-500"},uo={key:4,class:"w-full h-full no-drag flex-grow"},po=["src"],go={key:1,class:"w-full h-full bg-slate-100 flex items-center justify-center flex-col text-slate-400"},fo=c(()=>o("i",{class:"pi pi-image text-4xl"},null,-1)),ho=c(()=>o("span",{class:"text-xs mt-2"},"Utilisez l'inspecteur pour choisir",-1)),vo=[fo,ho],mo=["onChange"],bo={key:5,class:"w-full h-full flex items-center justify-center no-drag flex-grow"},xo=["viewBox"],yo=["y1","x2","y2","stroke","stroke-width","stroke-dasharray"],ko=["fill","stroke","stroke-width","stroke-dasharray"],_o=["cx","cy","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],Co=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],wo=["points","fill","stroke","stroke-width","stroke-dasharray"],So=["transform","fill","stroke","stroke-width","stroke-dasharray"],Vo=["onMousedown"],$o=c(()=>o("div",{class:"w-2 h-2 bg-indigo-500 rounded-sm opacity-0 group-hover/widget:opacity-100"},null,-1)),Uo=[$o],To=["onClick"],Lo={class:"absolute -top-11 left-0 flex gap-1 opacity-0 group-hover/widget:opacity-100 transition-all no-drag z-[60] bg-slate-900/80 backdrop-blur-sm border border-white/10 rounded-lg shadow-2xl"},Ro={class:"p-2 hover:text-indigo-400 cursor-move grid-drag-handle"},Do=c(()=>o("i",{class:"pi pi-arrows-alt text-[10px]"},null,-1)),Wo=[Do],Po=["onClick"],Eo=["onClick"],Io=c(()=>o("i",{class:"pi pi-copy text-[10px]"},null,-1)),Ao=[Io],Mo=["onClick"],zo=c(()=>o("i",{class:"pi pi-trash text-[10px]"},null,-1)),Bo=[zo],jo={key:0,class:"w-full h-full no-drag flex-grow"},Fo=["onBlur"],Oo={key:1,class:"w-full h-full overflow-hidden no-drag bg-white rounded-lg shadow-inner flex-grow"},No={class:"w-full h-full border-collapse"},qo={key:2,class:"w-full h-full p-2 pointer-events-none flex-grow"},Yo={key:3,class:"w-full h-full flex flex-col justify-center px-4 no-drag flex-grow"},Jo={class:"text-[9px] font-black text-slate-400 uppercase tracking-widest"},Xo={class:"flex items-baseline gap-1"},Go={class:"text-[10px] font-bold text-emerald-500"},Ho={key:4,class:"w-full h-full no-drag flex-grow"},Ko=["src"],Qo={key:1,class:"w-full h-full bg-slate-100 flex items-center justify-center flex-col text-slate-400"},Zo=c(()=>o("i",{class:"pi pi-image text-4xl"},null,-1)),el=c(()=>o("span",{class:"text-xs mt-2"},"Utilisez l'inspecteur pour choisir",-1)),tl=[Zo,el],ol=["onChange"],ll={key:5,class:"w-full h-full flex items-center justify-center no-drag flex-grow"},sl=["viewBox"],nl=["y1","x2","y2","stroke","stroke-width"],al=["fill","stroke","stroke-width","stroke-dasharray"],il=["cx","cy","rx","ry","fill","stroke","stroke-width"],rl=["cx","cy","r","fill","stroke","stroke-width"],dl=["points","fill","stroke","stroke-width"],cl=["transform","fill","stroke","stroke-width"],ul={class:"w-[380px] border-l border-white/5 bg-black/40 flex flex-col shrink-0 overflow-y-auto custom-scrollbar"},pl={key:0,class:"p-8 space-y-10 animate-in fade-in slide-in-from-right duration-300"},gl={class:"flex justify-between items-center border-b border-white/10 pb-6"},fl=c(()=>o("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-indigo-400 italic"},"Inspecteur Omni",-1)),hl={class:"flex gap-2"},vl=c(()=>o("i",{class:"pi pi-angle-up"},null,-1)),ml=[vl],bl=c(()=>o("i",{class:"pi pi-angle-down"},null,-1)),xl=[bl],yl={class:"space-y-6"},kl=c(()=>o("h4",{class:"text-[9px] font-black uppercase tracking-widest text-slate-500 italic"},"Apparence",-1)),_l={class:"bg-white/5 p-4 rounded-xl space-y-4"},Cl={class:"field"},wl=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},"Fond",-1)),Sl={class:"flex items-center gap-2 bg-black/20 p-1 rounded-lg"},Vl={class:"field"},$l=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},"Bordure",-1)),Ul={class:"grid grid-cols-3 gap-2"},Tl={class:"flex items-center gap-2 bg-black/20 p-1 rounded-lg mt-2"},Ll={class:"field"},Rl={class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},Dl={key:0,class:"space-y-6"},Wl=c(()=>o("h4",{class:"text-[9px] font-black uppercase tracking-widest text-slate-500 italic"},"Disposition Grille",-1)),Pl={class:"bg-white/5 p-4 rounded-xl space-y-4"},El={class:"field"},Il={class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},Al={class:"field"},Ml={class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},zl={key:1,class:"space-y-4"},Bl={class:"grid grid-cols-2 gap-4"},jl={class:"field"},Fl=c(()=>o("label",{class:"text-[8px] uppercase opacity-50 block mb-1"},"Header Fond",-1)),Ol={class:"field"},Nl=c(()=>o("label",{class:"text-[8px] uppercase opacity-50 block mb-1"},"Texte Fond",-1)),ql={key:2,class:"space-y-6"},Yl=c(()=>o("h4",{class:"text-[9px] font-black uppercase tracking-widest text-slate-500 italic"},"Typographie",-1)),Jl={class:"bg-white/5 p-4 rounded-xl space-y-4"},Xl={class:"flex items-center gap-4"},Gl={class:"text-[10px] font-mono text-indigo-400"},Hl={class:"grid grid-cols-4 gap-2"},Kl=c(()=>o("i",{class:"pi pi-bold"},null,-1)),Ql=[Kl],Zl=c(()=>o("i",{class:"pi pi-italic"},null,-1)),es=[Zl],ts={class:"grid grid-cols-4 gap-2"},os=c(()=>o("i",{class:"pi pi-align-left"},null,-1)),ls=[os],ss=c(()=>o("i",{class:"pi pi-align-center"},null,-1)),ns=[ss],as=c(()=>o("i",{class:"pi pi-align-right"},null,-1)),is=[as],rs=c(()=>o("i",{class:"pi pi-align-justify"},null,-1)),ds=[rs],cs={class:"flex items-center gap-4"},us=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40"},"Couleur",-1)),ps={class:"flex-grow flex items-center gap-2 bg-black/20 p-1 rounded-lg"},gs={key:3,class:"space-y-6"},fs=c(()=>o("h4",{class:"text-[9px] font-black uppercase tracking-widest text-slate-500 italic"},"Style de la Forme",-1)),hs={class:"bg-white/5 p-4 rounded-xl space-y-4"},vs={class:"field"},ms=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},"Type de Forme",-1)),bs={class:"field"},xs=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},"Couleur du Trait",-1)),ys={class:"flex items-center gap-2 bg-black/20 p-1 rounded-lg"},ks={class:"field"},_s={class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},Cs={class:"field"},ws=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},"Style du Trait",-1)),Ss={key:4,class:"space-y-6"},Vs=c(()=>o("h4",{class:"text-[9px] font-black uppercase tracking-widest text-slate-500 italic"},"Configuration KPI",-1)),$s={class:"bg-white/5 p-4 rounded-xl space-y-4"},Us={class:"field"},Ts=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40"},"Préfixe",-1)),Ls={class:"flex items-center gap-4"},Rs=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40"},"Couleur Valeur",-1)),Ds={class:"flex-grow flex items-center gap-2 bg-black/20 p-1 rounded-lg"},Ws={key:5,class:"space-y-4"},Ps={key:6,class:"space-y-6"},Es=c(()=>o("h4",{class:"text-[9px] font-black uppercase tracking-widest text-indigo-400 italic"},"Source de Données",-1)),Is={class:"bg-indigo-900/20 border border-indigo-500/30 p-5 rounded-2xl space-y-4"},As={key:0,class:"space-y-3"},Ms={key:0,class:"grid grid-cols-2 gap-2"},zs=["onClick"],Bs={class:"text-[8px] font-black uppercase mt-2"},js={key:1},Fs=c(()=>o("h4",{class:"text-[9px] font-black uppercase tracking-widest text-slate-500 italic mt-6 mb-2"},"Échelle de Temps (Axe X)",-1)),Os={key:7,class:"space-y-4"},Ns=c(()=>o("h4",{class:"text-[9px] font-black uppercase tracking-widest text-indigo-400 italic"},"Séries de Données",-1)),qs=["onUpdate:modelValue"],Ys={key:1,class:"p-8 space-y-8"},Js={class:"p-4 space-y-6"},Xs=c(()=>o("h3",{class:"text-[10px] font-black uppercase tracking-[0.4em] text-indigo-400 italic"},"Format & Fond",-1)),Gs={class:"bg-white/5 p-6 rounded-2xl space-y-6"},Hs={class:"field"},Ks=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},"Format",-1)),Qs={class:"field"},Zs=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},"Orientation",-1)),en={class:"field"},tn=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},"Couleur de fond",-1)),on={class:"field"},ln=c(()=>o("label",{class:"text-[9px] font-black uppercase opacity-40 mb-2 block"},"Mode de Disposition",-1)),sn={class:"p-4 space-y-4"},nn={class:"space-y-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2"},an=["onDragstart","onDrop","onClick"],rn=c(()=>o("div",{class:"w-16 h-20 bg-white flex-shrink-0 rounded-sm shadow-md overflow-hidden"},null,-1)),dn={class:"flex-grow"},cn={class:"flex flex-col"},un={class:"grid grid-cols-12 gap-8 p-4"},pn={class:"col-span-3 border-r border-white/10 pr-6 space-y-4"},gn={class:"flex justify-between items-center"},fn=c(()=>o("h5",{class:"text-indigo-400 font-bold uppercase text-[10px]"},"Colonnes",-1)),hn={class:"pt-6 border-t border-white/10"},vn={class:"col-span-9"},mn={class:"flex justify-between items-center mb-4"},bn=c(()=>o("h5",{class:"text-slate-400 font-bold uppercase text-[10px]"},"Prévisualisation des données",-1)),xn={class:"max-h-[500px] overflow-auto border border-white/5 rounded-xl"},yn={class:"w-full text-xs"},kn={class:"bg-white/5 sticky top-0"},_n={class:"p-1 w-12 text-center"},Cn={__name:"ReportsCopy",setup(q){dt.register(ct,ut,pt,gt,ft,ht,vt,mt,bt,xt);const D=je(),ve=Fe(),G=P(!1),g=P(0),T=P(null),M=P(.8),Y=P(!1),H=P(null),z=P([]),F=P(!1),b=Oe({tempColumns:[],tempRows:[]}),S=P([]),W=P(-1),k=()=>{if(!u.value)return;const l=JSON.stringify(u.value);W.value<S.value.length-1&&(S.value=S.value.slice(0,W.value+1)),S.value.push(l),S.value.length>50&&S.value.shift(),W.value=S.value.length-1},te=()=>{W.value>0&&(W.value--,u.value=JSON.parse(S.value[W.value]),D.add({severity:"info",summary:"Action annulée",life:800}))},oe=()=>{S.value.length>0&&W.value<S.value.length-1&&(W.value++,u.value=JSON.parse(S.value[W.value]),D.add({severity:"info",summary:"Action rétablie",life:800}))},me=X(()=>S.value.length>1&&W.value>0),be=X(()=>S.value.length>0&&W.value<S.value.length-1),le=[{label:"Plein",value:"solid"},{label:"Tirets",value:"dashed"},{label:"Pointillés",value:"dotted"},{label:"Aucun",value:"none"}],K=[{name:"A4",w:793,h:1122},{name:"A3",w:1122,h:1587},{name:"A2",w:1587,h:2245},{name:"A1",w:2245,h:3179},{name:"A0",w:3179,h:4494},{name:"US Letter",w:816,h:1056}],xe=["Inter","Roboto","Montserrat","Playfair Display","Fira Code","Lato"],ye=[{label:"Barres",value:"bar",icon:"pi pi-chart-bar"},{label:"Lignes",value:"line",icon:"pi pi-chart-line"},{label:"Secteurs",value:"pie",icon:"pi pi-chart-pie"},{label:"Donut",value:"doughnut",icon:"pi pi-circle"},{label:"Radar",value:"radar",icon:"pi pi-directions"}],u=P([{id:"p_initial",name:"Nouveau Rapport",background:"#ffffff",format:K[0],orientation:"portrait",layoutMode:"absolute",widgets:[]}]),ke=l=>{let t={id:"w_"+Date.now(),type:l,colSpan:4,rowSpan:2,x:100,y:150,w:l==="kpi"?250:450,h:l==="kpi"?140:300,isLocked:!1,isSyncing:!1,chartType:l==="chart"?"bar":null,style:{backgroundColor:l==="text"?"transparent":"#ffffff",borderRadius:8,borderWidth:l==="text"||l==="shape"?0:1,borderColor:"#CBD5E1",borderStyle:"solid",opacity:1,zIndex:10,shadow:l==="text"?"none":"0 4px 6px -1px rgba(0,0,0,0.1)",rotation:0,padding:15},config:{headerBg:"#1e293b",headerColor:"#ffffff",striped:!0,fontSize:12,cellPadding:8},data:{columns:[],rows:[]}};l==="text"?(t.content="Double-cliquez pour éditer le texte...",t.config={font:"Inter",size:18,color:"#1E293B",align:"left",weight:"500",italic:!1,underline:!1,uppercase:!1}):l==="chart"?(t.dataSources=[{model:null,column:null,formula:"count",color:"#6366F1"}],t.data={labels:["Jan","Fev","Mar"],datasets:[{label:"Exemple",data:[10,45,23],backgroundColor:"#6366F1"}]},t.config={timeScale:"months"}):l==="table"?t.data={columns:["Référence","Status","Total"],rows:[{Référence:"INV-001",Status:"Payé",Total:"1,200 €"}]}:l==="kpi"?(t.dataSource={model:null,column:null,method:"COUNT"},t.config={label:"NOUVEAU KPI",value:"0.00",color:"#6366F1",prefix:"",trend:"",timeScale:"days"}):l==="image"?t.imageUrl=null:l==="shape"&&(t.w=300,t.h=10,t.style.backgroundColor="transparent",t.style.borderWidth=0,t.style.padding=0,t.config={shapeType:"line",strokeColor:"#334155",strokeWidth:4,strokeStyle:"solid"}),u.value[g.value].widgets.push(t),T.value=u.value[g.value].widgets.length-1,k()},se=l=>{const t=u.value[g.value].widgets[l],i=JSON.parse(JSON.stringify(t));i.id="w_"+Date.now(),i.x+=20,i.y+=20,u.value[g.value].widgets.push(i),T.value=u.value[g.value].widgets.length-1,k(),D.add({severity:"info",summary:"Dupliqué",detail:"Le bloc a été cloné.",life:2e3})},ne=l=>{ve.require({message:"Voulez-vous vraiment supprimer ce bloc ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{u.value[g.value].widgets.splice(l,1),T.value=null,k()}})},_e=()=>{s.value&&s.value.type==="table"&&(b.tempColumns=[...s.value.data.columns],b.tempRows=JSON.parse(JSON.stringify(s.value.data.rows)),F.value=!0)},Ce=()=>{const l=`Col ${b.tempColumns.length+1}`;b.tempColumns.push(l),b.tempRows.forEach(t=>t[l]="-")},we=l=>{const t=b.tempColumns.indexOf(l);t>-1&&(b.tempColumns.splice(t,1),b.tempRows.forEach(i=>{delete i[l]}))},Se=()=>{const l={};b.tempColumns.forEach(t=>l[t]=""),b.tempRows.push(l)},Ve=()=>{s.value.data.columns=[...b.tempColumns],s.value.data.rows=[...b.tempRows],F.value=!1,k()},$e=l=>{const t=l.target.files[0];if(!t)return;const i=new FileReader;i.onload=f=>{const E=f.target.result.split(`
`);if(E.length>0){const x=E[0].split(",").map(L=>L.trim()),I=E.slice(1).filter(L=>L.trim()!=="").map(L=>{const B=L.split(","),J={};return x.forEach((Z,ee)=>{var V;return J[Z]=((V=B[ee])==null?void 0:V.trim())||""}),J});b.tempColumns=x,b.tempRows=I,s.value&&s.value.type==="table"&&(s.value.data.columns=x,s.value.data.rows=I,k()),D.add({severity:"success",summary:"CSV Importé",detail:`${I.length} lignes chargées.`})}},i.readAsText(t)},Ue=(l,t,i)=>{T.value=i,Y.value=!0;const f=l.clientX,m=l.clientY,E=t.x,x=t.y,I=B=>{Y.value&&(t.x=E+(B.clientX-f)/M.value,t.y=x+(B.clientY-m)/M.value)},L=()=>{Y.value=!1,k(),window.removeEventListener("mouseup",L,{once:!0}),window.removeEventListener("mousemove",I)};window.addEventListener("mousemove",I),window.addEventListener("mouseup",L,{once:!0})},Te=(l,t)=>{l.preventDefault(),l.stopPropagation();const i=t.w,f=t.h,m=l.clientX,E=l.clientY,x=L=>{t.w=Math.max(50,i+(L.clientX-m)/M.value),t.h=Math.max(30,f+(L.clientY-E)/M.value)},I=()=>{k(),window.removeEventListener("mousemove",x)};window.addEventListener("mousemove",x),window.addEventListener("mouseup",I,{once:!0})},Le=async l=>{var t,i;if(l.type==="chart"&&(!l.dataSources||l.dataSources.some(f=>!f.model||!f.column))||l.type==="kpi"&&(!l.dataSource||!l.dataSource.model||!l.dataSource.column)){D.add({severity:"warn",summary:"Configuration incomplète",detail:"Veuillez sélectionner un modèle et un champ.",life:4e3});return}l.isSyncing=!0;try{const f={type:l.type};l.type==="chart"&&(f.config={sources:l.dataSources,timeScale:l.config.timeScale}),l.type==="kpi"&&(f.config={...l.dataSource,timeScale:l.config.timeScale});const m=await ue.post(route("quantum.query"),f);l.type==="chart"&&(l.data=m.data,D.add({severity:"success",summary:"Synchronisé",detail:"Les données du graphique ont été mises à jour.",life:2e3})),l.type==="kpi"&&(l.config.value=m.data.value,l.config.label=m.data.label,D.add({severity:"success",summary:"Synchronisé",detail:"La valeur du KPI a été mise à jour.",life:2e3})),k()}catch(f){console.error("Erreur lors de la synchronisation:",f),D.add({severity:"error",summary:"Erreur Backend",detail:((i=(t=f.response)==null?void 0:t.data)==null?void 0:i.message)||"Impossible de récupérer les données."})}finally{l.isSyncing=!1}},Re=()=>{u.value.push({id:"p_"+Date.now(),name:`Page ${u.value.length+1}`,background:"#ffffff",format:K[0],orientation:"portrait",layoutMode:"absolute",widgets:[]}),k(),D.add({severity:"success",summary:"Page Ajoutée",life:1500})},De=l=>{if(u.value.length<=1){D.add({severity:"warn",summary:"Action impossible",detail:"Le document doit contenir au moins une page.",life:3e3});return}u.value.splice(l,1),g.value>=u.value.length&&(g.value=u.value.length-1),k(),D.add({severity:"info",summary:"Page supprimée",life:1500})},We=l=>{const t=u.value[l],i=JSON.parse(JSON.stringify(t));i.id="p_"+Date.now(),i.name=`${t.name} (Copie)`,u.value.splice(l+1,0,i),k(),D.add({severity:"success",summary:"Page Dupliquée",life:1500})},Pe=l=>{k()},Ee=(l,t)=>{const i=H.value;if(i===null||i===t)return;const f=u.value.splice(i,1)[0];u.value.splice(t,0,f),H.value=null,k()},ae=l=>{const t=s.value;t&&(l==="up"&&(t.style.zIndex+=10),l==="down"&&(t.style.zIndex=Math.max(0,t.style.zIndex-10)),k())},Q=P({}),ie=(l,t)=>{const i=l.target.files[0];i&&(t.imageUrl=URL.createObjectURL(i))},Ie=l=>{const t=Q.value[l];t&&t.click()},Ae=async()=>{const{default:l}=await ge(async()=>{const{default:f}=await import("./jspdf.es.min-BEz4e6bY.js").then(m=>m.j);return{default:f}},__vite__mapDeps([0,1,2])),{default:t}=await ge(async()=>{const{default:f}=await import("./html2canvas.esm-CBrSDip1.js");return{default:f}},[]);G.value=!0;const i=new l("p","mm","a4");for(let f=0;f<u.value.length;f++){g.value=f,await pe(),await new Promise(E=>setTimeout(E,600));const m=await t(document.getElementById("studio-canvas"),{scale:2});f>0&&i.addPage(),i.addImage(m.toDataURL("image/png"),"PNG",0,0,210,297)}i.save("Export_Quantum.pdf"),G.value=!1},re=l=>{l.target.tagName==="INPUT"||l.target.contentEditable==="true"||(l.key==="Delete"&&T.value!==null&&(u.value[g.value].widgets.splice(T.value,1),T.value=null,k()),l.ctrlKey&&l.key==="z"&&(l.preventDefault(),te()),l.ctrlKey&&l.key==="y"&&(l.preventDefault(),oe()))},s=X(()=>{const l=u.value[g.value];return l&&T.value!==null?l.widgets[T.value]:null}),Me=X(()=>{const l=u.value[g.value];if(!l)return{};const t=l.format,i=l.orientation==="landscape";return{width:(i?t.h:t.w)+"px",height:(i?t.w:t.h)+"px",backgroundColor:l.background,transform:`scale(${M.value})`,transformOrigin:"top center"}}),ze=l=>({position:"absolute",left:l.x+"px",top:l.y+"px",width:l.w+"px",height:l.h+"px",zIndex:l.style.zIndex||10,opacity:l.style.opacity,backgroundColor:l.style.backgroundColor,borderRadius:l.style.borderRadius+"px",border:`${l.style.borderWidth}px ${l.style.borderStyle} ${l.style.borderColor}`,boxShadow:l.style.shadow,transform:`rotate(${l.style.rotation}deg)`,padding:l.style.padding+"px"}),Be=l=>({gridColumn:`span ${l.colSpan||4}`,gridRow:`span ${l.rowSpan||2}`,zIndex:l.style.zIndex||10,opacity:l.style.opacity,backgroundColor:l.style.backgroundColor,borderRadius:l.style.borderRadius+"px",border:l.style.borderStyle==="none"?"none":`${l.style.borderWidth}px ${l.style.borderStyle} ${l.style.borderColor}`,boxShadow:l.style.shadow,transform:`rotate(${l.style.rotation}deg)`,padding:l.style.padding+"px"}),de=l=>({bar:he,line:yt,pie:kt,doughnut:_t,radar:Ct})[l]||he;return Ne(()=>{ue.get("/quantum/models").then(l=>{z.value=l.data}).catch(()=>{z.value=["User","Product","Order","Invoice"],D.add({severity:"warn",summary:"Mode Démo",detail:"Impossible de charger les modèles Laravel. Utilisation de données fictives.",life:3e3})}),window.addEventListener("keydown",re),pe(()=>{u.value&&(S.value=[JSON.stringify(u.value)],W.value=0)})}),qe(()=>{window.removeEventListener("keydown",re)}),Ye(s,l=>{l&&!Y.value&&k()},{deep:!0}),(l,t)=>{var ce;const i=rt,f=it,m=at,E=nt,x=st,I=lt,L=ot,B=tt,J=et,Z=Ze,ee=Qe,V=Ke;return n(),a("div",Vt,[o("header",$t,[o("div",Ut,[Tt,o("div",Lt,[y(r(i,{icon:"pi pi-undo",onClick:te,disabled:!me.value,class:"p-button-text p-button-sm text-slate-400"},null,8,["disabled"]),[[V,"Annuler (Ctrl+Z)",void 0,{bottom:!0}]]),y(r(i,{icon:"pi pi-redo",onClick:oe,disabled:!be.value,class:"p-button-text p-button-sm text-slate-400"},null,8,["disabled"]),[[V,"Rétablir (Ctrl+Y)",void 0,{bottom:!0}]])])]),o("div",Rt,[o("div",Dt,[o("div",Wt,[r(i,{icon:"pi pi-chevron-left",onClick:t[0]||(t[0]=e=>g.value--),disabled:g.value===0,class:"p-button-text p-button-xs"},null,8,["disabled"]),o("span",Pt,"Page "+v(g.value+1)+" / "+v(u.value.length),1),r(i,{icon:"pi pi-chevron-right",onClick:t[1]||(t[1]=e=>g.value++),disabled:g.value===u.value.length-1,class:"p-button-text p-button-xs"},null,8,["disabled"])]),Et,o("div",It,[At,r(f,{modelValue:M.value,"onUpdate:modelValue":t[2]||(t[2]=e=>M.value=e),min:.2,max:2,step:.01,class:"w-24"},null,8,["modelValue"]),o("span",Mt,v(Math.round(M.value*100))+"%",1)])]),r(i,{icon:"pi pi-cloud-download",label:"EXPORT PDF HD",onClick:Ae,loading:G.value,class:"p-button-indigo shadow-xl shadow-indigo-500/20 font-black p-button-sm italic"},null,8,["loading"])])]),o("div",zt,[o("aside",Bt,[(n(),a($,null,U(["text","chart","table","kpi","image","shape"],e=>o("button",{key:e,onClick:h=>ke(e),class:"group relative w-12 h-12 rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center hover:bg-indigo-600 transition-all shadow-sm"},[o("i",{class:_([{"pi pi-align-left":e==="text","pi pi-chart-bar":e==="chart","pi pi-table":e==="table","pi pi-bolt":e==="kpi","pi pi-image":e==="image","pi pi-minus":e==="shape"},"text-xl text-slate-400 group-hover:text-white"])},null,2),o("span",Ft,v(e),1)],8,jt)),64))]),o("main",{class:"flex-grow overflow-auto bg-[#0a0a0c] p-20 flex justify-center custom-scrollbar relative",onClick:t[4]||(t[4]=e=>T.value=null)},[o("div",{id:"studio-canvas",style:C(Me.value),class:"relative shadow-[0_40px_120px_rgba(0,0,0,0.7)] transition-all duration-300 origin-top"},[u.value[g.value].layoutMode==="absolute"?(n(!0),a($,{key:0},U(u.value[g.value].widgets,(e,h)=>(n(),a("div",{key:e.id,style:C(ze(e)),class:_(["group/widget",T.value===h?"ring-2 ring-indigo-500":"",e.isLocked?"cursor-default":"cursor-move"]),onClick:R(d=>T.value=h,["stop"]),onMousedown:R(d=>!e.isLocked&&Ue(d,e,h),["stop"])},[o("div",Nt,[y((n(),a("div",qt,Jt)),[[V,"Déplacer",void 0,{bottom:!0}]]),y((n(),a("button",{onClick:R(d=>e.isLocked=!e.isLocked,["stop"]),class:"p-2 hover:text-orange-400"},[o("i",{class:_([e.isLocked?"pi pi-lock text-orange-400":"pi pi-lock-open","text-[10px]"])},null,2)],8,Xt)),[[V,"Verrouiller",void 0,{bottom:!0}]]),y((n(),a("button",{onClick:R(d=>se(h),["stop"]),class:"p-2 hover:text-green-400"},Kt,8,Gt)),[[V,"Dupliquer",void 0,{bottom:!0}]]),y((n(),a("button",{onClick:R(d=>ne(h),["stop"]),class:"p-2 hover:text-red-400"},eo,8,Qt)),[[V,"Supprimer",void 0,{bottom:!0}]])]),e.type==="text"?(n(),a("div",to,[o("div",{contenteditable:"true",onBlur:d=>{e.content=d.target.innerText,k()},class:"w-full h-full outline-none leading-snug",style:C({fontFamily:e.config.font,fontSize:e.config.size+"px",color:e.config.color,textAlign:e.config.align,fontWeight:e.config.weight,fontStyle:e.config.italic?"italic":"normal",textDecoration:e.config.underline?"underline":"none",textTransform:e.config.uppercase?"uppercase":"none"})},v(e.content),45,oo)])):p("",!0),e.type==="table"?(n(),a("div",lo,[o("table",so,[o("thead",{style:C({background:e.config.headerBg,color:e.config.headerColor})},[o("tr",null,[(n(!0),a($,null,U(e.data.columns,d=>(n(),a("th",{key:d,style:C({padding:e.config.cellPadding+"px"}),class:"text-left uppercase text-[9px] font-black"},v(d),5))),128))])],4),o("tbody",{style:C({fontSize:e.config.fontSize+"px"})},[(n(!0),a($,null,U(e.data.rows,(d,w)=>(n(),a("tr",{key:w,class:_(e.config.striped&&w%2===0?"bg-slate-50":"bg-white")},[(n(!0),a($,null,U(e.data.columns,O=>(n(),a("td",{key:O,style:C({padding:e.config.cellPadding+"px"}),class:"border-b border-slate-100 text-slate-800"},v(d[O]),5))),128))],2))),128))],4)])])):p("",!0),e.type==="chart"?(n(),a("div",no,[(n(),N(fe(de(e.chartType)),{data:e.data,options:{responsive:!0,maintainAspectRatio:!1}},null,8,["data"]))])):p("",!0),e.type==="kpi"?(n(),a("div",ao,[o("span",io,v(e.config.label),1),o("div",ro,[o("span",{class:"text-3xl font-black text-slate-900 tracking-tighter",style:C({color:e.config.color})},v(e.config.prefix)+v(e.config.value),5),o("span",co,v(e.config.trend),1)])])):p("",!0),e.type==="image"?(n(),a("div",uo,[e.imageUrl?(n(),a("img",{key:0,src:e.imageUrl,class:"w-full h-full object-cover"},null,8,po)):(n(),a("div",go,vo)),o("input",{type:"file",accept:"image/*",onChange:d=>ie(d,e),class:"hidden",ref_for:!0,ref:d=>Q.value[e.id]=d},null,40,mo)])):p("",!0),e.type==="shape"?(n(),a("div",bo,[(n(),a("svg",{width:"100%",height:"100%",viewBox:`0 0 ${e.w} ${e.h}`,preserveAspectRatio:"none"},[e.config.shapeType==="line"?(n(),a("line",{key:0,x1:"0",y1:e.config.strokeWidth/2,x2:e.w,y2:e.config.strokeWidth/2,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeStyle==="dashed"?"10,5":e.config.strokeStyle==="dotted"?"2,5":"none"},null,8,yo)):p("",!0),e.config.shapeType==="rectangle"?(n(),a("rect",{key:1,x:"0",y:"0",width:"100%",height:"100%",fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeStyle==="dashed"?"10,5":e.config.strokeStyle==="dotted"?"2,5":"none"},null,8,ko)):p("",!0),e.config.shapeType==="ellipse"?(n(),a("ellipse",{key:2,cx:e.w/2,cy:e.h/2,rx:e.w/2-e.config.strokeWidth/2,ry:e.h/2-e.config.strokeWidth/2,fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeStyle==="dashed"?"10,5":e.config.strokeStyle==="dotted"?"2,5":"none"},null,8,_o)):p("",!0),e.config.shapeType==="circle"?(n(),a("circle",{key:3,cx:e.w/2,cy:e.h/2,r:Math.min(e.w,e.h)/2-e.config.strokeWidth/2,fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeStyle==="dashed"?"10,5":e.config.strokeStyle==="dotted"?"2,5":"none"},null,8,Co)):p("",!0),e.config.shapeType==="triangle"?(n(),a("polygon",{key:4,points:`${e.w/2},${e.config.strokeWidth} ${e.config.strokeWidth},${e.h-e.config.strokeWidth} ${e.w-e.config.strokeWidth},${e.h-e.config.strokeWidth}`,fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeStyle==="dashed"?"10,5":e.config.strokeStyle==="dotted"?"2,5":"none"},null,8,wo)):p("",!0),e.config.shapeType==="star"?(n(),a("polygon",{key:5,points:"100,10 40,198 190,78 10,78 160,198",transform:`scale(${e.w/200}, ${e.h/208})`,fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth*(200/e.w),"stroke-dasharray":e.config.strokeStyle==="dashed"?"10,5":e.config.strokeStyle==="dotted"?"2,5":"none"},null,8,So)):p("",!0)],8,xo))])):p("",!0),o("div",{class:"absolute bottom-0 right-0 w-5 h-5 cursor-nwse-resize flex items-end justify-end p-1 no-drag",onMousedown:R(d=>Te(d,e),["stop"])},Uo,40,Vo)],46,Ot))),128)):u.value[g.value].layoutMode==="grid"?(n(),N(Je(wt),{key:1,modelValue:u.value[g.value].widgets,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value[g.value].widgets=e),"item-key":"id",class:"grid grid-cols-12 auto-rows-min h-full gap-4 p-4",handle:".grid-drag-handle"},{item:j(({element:e,index:h})=>[o("div",{style:C(Be(e)),class:_(["group/widget relative flex flex-col",T.value===h?"ring-2 ring-indigo-500":""]),onClick:R(d=>T.value=h,["stop"])},[o("div",Lo,[y((n(),a("button",Ro,Wo)),[[V,"Déplacer",void 0,{bottom:!0}]]),y((n(),a("button",{onClick:R(d=>e.isLocked=!e.isLocked,["stop"]),class:"p-2 hover:text-orange-400"},[o("i",{class:_([e.isLocked?"pi pi-lock text-orange-400":"pi pi-lock-open","text-[10px]"])},null,2)],8,Po)),[[V,"Verrouiller",void 0,{bottom:!0}]]),y((n(),a("button",{onClick:R(d=>se(h),["stop"]),class:"p-2 hover:text-green-400"},Ao,8,Eo)),[[V,"Dupliquer",void 0,{bottom:!0}]]),y((n(),a("button",{onClick:R(d=>ne(h),["stop"]),class:"p-2 hover:text-red-400"},Bo,8,Mo)),[[V,"Supprimer",void 0,{bottom:!0}]])]),e.type==="text"?(n(),a("div",jo,[o("div",{contenteditable:"true",onBlur:d=>{e.content=d.target.innerText,k()},class:"w-full h-full outline-none leading-snug",style:C({fontFamily:e.config.font,fontSize:e.config.size+"px",color:e.config.color,textAlign:e.config.align,fontWeight:e.config.weight,fontStyle:e.config.italic?"italic":"normal",textDecoration:e.config.underline?"underline":"none",textTransform:e.config.uppercase?"uppercase":"none"})},v(e.content),45,Fo)])):p("",!0),e.type==="table"?(n(),a("div",Oo,[o("table",No,[o("thead",{style:C({background:e.config.headerBg,color:e.config.headerColor})},[o("tr",null,[(n(!0),a($,null,U(e.data.columns,d=>(n(),a("th",{key:d,style:C({padding:e.config.cellPadding+"px"}),class:"text-left uppercase text-[9px] font-black"},v(d),5))),128))])],4),o("tbody",{style:C({fontSize:e.config.fontSize+"px"})},[(n(!0),a($,null,U(e.data.rows,(d,w)=>(n(),a("tr",{key:w,class:_(e.config.striped&&w%2===0?"bg-slate-50":"bg-white")},[(n(!0),a($,null,U(e.data.columns,O=>(n(),a("td",{key:O,style:C({padding:e.config.cellPadding+"px"}),class:"border-b border-slate-100 text-slate-800"},v(d[O]),5))),128))],2))),128))],4)])])):p("",!0),e.type==="chart"?(n(),a("div",qo,[(n(),N(fe(de(e.chartType)),{data:e.data,options:{responsive:!0,maintainAspectRatio:!1}},null,8,["data"]))])):p("",!0),e.type==="kpi"?(n(),a("div",Yo,[o("span",Jo,v(e.config.label),1),o("div",Xo,[o("span",{class:"text-3xl font-black text-slate-900 tracking-tighter",style:C({color:e.config.color})},v(e.config.prefix)+v(e.config.value),5),o("span",Go,v(e.config.trend),1)])])):p("",!0),e.type==="image"?(n(),a("div",Ho,[e.imageUrl?(n(),a("img",{key:0,src:e.imageUrl,class:"w-full h-full object-cover"},null,8,Ko)):(n(),a("div",Qo,tl)),o("input",{type:"file",accept:"image/*",onChange:d=>ie(d,e),class:"hidden",ref:d=>Q.value[e.id]=d},null,40,ol)])):p("",!0),e.type==="shape"?(n(),a("div",ll,[(n(),a("svg",{width:"100%",height:"100%",viewBox:`0 0 ${e.w} ${e.h}`,preserveAspectRatio:"none"},[e.config.shapeType==="line"?(n(),a("line",{key:0,x1:"0",y1:e.config.strokeWidth/2,x2:e.w,y2:e.config.strokeWidth/2,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth},null,8,nl)):p("",!0),e.config.shapeType==="rectangle"?(n(),a("rect",{key:1,x:"0",y:"0",width:"100%",height:"100%",fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeStyle==="dashed"?"10,5":e.config.strokeStyle==="dotted"?"2,5":"none"},null,8,al)):p("",!0),e.config.shapeType==="ellipse"?(n(),a("ellipse",{key:2,cx:e.w/2,cy:e.h/2,rx:e.w/2-e.config.strokeWidth/2,ry:e.h/2-e.config.strokeWidth/2,fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth},null,8,il)):p("",!0),e.config.shapeType==="circle"?(n(),a("circle",{key:3,cx:e.w/2,cy:e.h/2,r:Math.min(e.w,e.h)/2-e.config.strokeWidth/2,fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth},null,8,rl)):p("",!0),e.config.shapeType==="triangle"?(n(),a("polygon",{key:4,points:`${e.w/2},${e.config.strokeWidth} ${e.config.strokeWidth},${e.h-e.config.strokeWidth} ${e.w-e.config.strokeWidth},${e.h-e.config.strokeWidth}`,fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth},null,8,dl)):p("",!0),e.config.shapeType==="star"?(n(),a("polygon",{key:5,points:"100,10 40,198 190,78 10,78 160,198",transform:`scale(${e.w/200}, ${e.h/208})`,fill:e.style.backgroundColor,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth*(200/e.w)},null,8,cl)):p("",!0)],8,sl))])):p("",!0)],14,To)]),_:1},8,["modelValue"])):p("",!0)],4)]),o("aside",ul,[s.value?(n(),a("div",pl,[o("header",gl,[fl,o("div",hl,[o("button",{onClick:t[5]||(t[5]=e=>ae("up")),class:"p-2 bg-white/5 rounded-lg hover:bg-white/10"},ml),o("button",{onClick:t[6]||(t[6]=e=>ae("down")),class:"p-2 bg-white/5 rounded-lg hover:bg-white/10"},xl)])]),o("section",yl,[kl,o("div",_l,[o("div",Cl,[wl,o("div",Sl,[y(o("input",{type:"color","onUpdate:modelValue":t[7]||(t[7]=e=>s.value.style.backgroundColor=e),class:"w-8 h-6 bg-transparent cursor-pointer border-none"},null,512),[[A,s.value.style.backgroundColor]]),r(m,{value:s.value.style.backgroundColor,"onUpdate:modelValue":t[8]||(t[8]=e=>s.value.style.backgroundColor=e),class:"p-inputtext-sm flex-grow font-mono uppercase !bg-transparent border-none shadow-none p-1"},null,8,["value"])])]),o("div",Vl,[$l,o("div",Ul,[r(E,{modelValue:s.value.style.borderWidth,"onUpdate:modelValue":t[9]||(t[9]=e=>s.value.style.borderWidth=e),min:0,max:20,class:"p-inputtext-sm",disabled:s.value.style.borderStyle==="none"},null,8,["modelValue","disabled"]),r(x,{modelValue:s.value.style.borderStyle,"onUpdate:modelValue":t[10]||(t[10]=e=>s.value.style.borderStyle=e),options:le,optionLabel:"label",optionValue:"value",class:"p-inputtext-sm col-span-2"},null,8,["modelValue"])]),o("div",Tl,[y(o("input",{type:"color","onUpdate:modelValue":t[11]||(t[11]=e=>s.value.style.borderColor=e),class:"w-8 h-6 bg-transparent cursor-pointer border-none"},null,512),[[A,s.value.style.borderColor]]),r(m,{value:s.value.style.borderColor,"onUpdate:modelValue":t[12]||(t[12]=e=>s.value.style.borderColor=e),class:"p-inputtext-sm flex-grow font-mono uppercase !bg-transparent border-none shadow-none p-1"},null,8,["value"])])]),o("div",Ll,[o("label",Rl,"Rayon ("+v(s.value.style.borderRadius)+"px)",1),r(f,{modelValue:s.value.style.borderRadius,"onUpdate:modelValue":t[13]||(t[13]=e=>s.value.style.borderRadius=e),min:0,max:50},null,8,["modelValue"])])])]),u.value[g.value].layoutMode==="grid"?(n(),a("section",Dl,[Wl,o("div",Pl,[o("div",El,[o("label",Il,"Colonnes ("+v(s.value.colSpan)+"/12)",1),r(f,{modelValue:s.value.colSpan,"onUpdate:modelValue":t[14]||(t[14]=e=>s.value.colSpan=e),min:1,max:12},null,8,["modelValue"])]),o("div",Al,[o("label",Ml,"Lignes ("+v(s.value.rowSpan)+")",1),r(f,{modelValue:s.value.rowSpan,"onUpdate:modelValue":t[15]||(t[15]=e=>s.value.rowSpan=e),min:1,max:12},null,8,["modelValue"])])])])):p("",!0),s.value.type==="table"?(n(),a("section",zl,[r(i,{label:"MODIFIER STRUCTURE / CSV",icon:"pi pi-table",onClick:_e,class:"w-full p-button-outlined p-button-sm"}),o("div",Bl,[o("div",jl,[Fl,y(o("input",{type:"color","onUpdate:modelValue":t[16]||(t[16]=e=>s.value.config.headerBg=e),class:"w-full h-8 bg-transparent cursor-pointer"},null,512),[[A,s.value.config.headerBg]])]),o("div",Ol,[Nl,y(o("input",{type:"color","onUpdate:modelValue":t[17]||(t[17]=e=>s.value.config.headerColor=e),class:"w-full h-8 bg-transparent cursor-pointer"},null,512),[[A,s.value.config.headerColor]])])])])):p("",!0),s.value.type==="text"?(n(),a("section",ql,[Yl,o("div",Jl,[r(x,{modelValue:s.value.config.font,"onUpdate:modelValue":t[18]||(t[18]=e=>s.value.config.font=e),options:xe,class:"w-full text-xs"},null,8,["modelValue"]),o("div",Xl,[r(f,{modelValue:s.value.config.size,"onUpdate:modelValue":t[19]||(t[19]=e=>s.value.config.size=e),min:8,max:120,class:"flex-grow"},null,8,["modelValue"]),o("span",Gl,v(s.value.config.size)+"px",1)]),o("div",Hl,[o("button",{onClick:t[20]||(t[20]=e=>s.value.config.weight=s.value.config.weight==="900"?"500":"900"),class:_([{"bg-indigo-600 text-white":s.value.config.weight==="900"},"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"])},Ql,2),o("button",{onClick:t[21]||(t[21]=e=>s.value.config.italic=!s.value.config.italic),class:_([{"bg-indigo-600 text-white":s.value.config.italic},"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"])},es,2),o("button",{onClick:t[22]||(t[22]=e=>s.value.config.underline=!s.value.config.underline),class:_([{"bg-indigo-600 text-white":s.value.config.underline},"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"])},"U",2),o("button",{onClick:t[23]||(t[23]=e=>s.value.config.uppercase=!s.value.config.uppercase),class:_([{"bg-indigo-600 text-white":s.value.config.uppercase},"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"])},"Aa",2)]),o("div",ts,[o("button",{onClick:t[24]||(t[24]=e=>s.value.config.align="left"),class:_([{"bg-indigo-600 text-white":s.value.config.align==="left"},"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"])},ls,2),o("button",{onClick:t[25]||(t[25]=e=>s.value.config.align="center"),class:_([{"bg-indigo-600 text-white":s.value.config.align==="center"},"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"])},ns,2),o("button",{onClick:t[26]||(t[26]=e=>s.value.config.align="right"),class:_([{"bg-indigo-600 text-white":s.value.config.align==="right"},"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"])},is,2),o("button",{onClick:t[27]||(t[27]=e=>s.value.config.align="justify"),class:_([{"bg-indigo-600 text-white":s.value.config.align==="justify"},"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"])},ds,2)]),o("div",cs,[us,o("div",ps,[y(o("input",{type:"color","onUpdate:modelValue":t[28]||(t[28]=e=>s.value.config.color=e),class:"w-8 h-6 bg-transparent cursor-pointer border-none"},null,512),[[A,s.value.config.color]]),r(m,{value:s.value.config.color,"onUpdate:modelValue":t[29]||(t[29]=e=>s.value.config.color=e),class:"p-inputtext-sm flex-grow font-mono uppercase !bg-transparent border-none shadow-none p-1"},null,8,["value"])])])])])):p("",!0),s.value.type==="shape"?(n(),a("section",gs,[fs,o("div",hs,[o("div",vs,[ms,r(x,{modelValue:s.value.config.shapeType,"onUpdate:modelValue":t[30]||(t[30]=e=>s.value.config.shapeType=e),options:["line","rectangle","ellipse","circle","triangle","star"],class:"w-full text-xs"},null,8,["modelValue"])]),o("div",bs,[xs,o("div",ys,[y(o("input",{type:"color","onUpdate:modelValue":t[31]||(t[31]=e=>s.value.config.strokeColor=e),class:"w-8 h-6 bg-transparent cursor-pointer border-none"},null,512),[[A,s.value.config.strokeColor]]),r(m,{value:s.value.config.strokeColor,"onUpdate:modelValue":t[32]||(t[32]=e=>s.value.config.strokeColor=e),class:"p-inputtext-sm flex-grow font-mono uppercase !bg-transparent border-none shadow-none p-1"},null,8,["value"])])]),o("div",ks,[o("label",_s,"Épaisseur du Trait ("+v(s.value.config.strokeWidth)+"px)",1),r(f,{modelValue:s.value.config.strokeWidth,"onUpdate:modelValue":t[33]||(t[33]=e=>s.value.config.strokeWidth=e),min:1,max:50},null,8,["modelValue"])]),o("div",Cs,[ws,r(x,{modelValue:s.value.config.strokeStyle,"onUpdate:modelValue":t[34]||(t[34]=e=>s.value.config.strokeStyle=e),options:le,optionLabel:"label",optionValue:"value",class:"w-full text-xs"},null,8,["modelValue"])])])])):p("",!0),s.value.type==="kpi"?(n(),a("section",Ss,[Vs,o("div",$s,[o("div",Us,[Ts,r(m,{modelValue:s.value.config.prefix,"onUpdate:modelValue":t[35]||(t[35]=e=>s.value.config.prefix=e),class:"w-full text-xs"},null,8,["modelValue"])]),o("div",Ls,[Rs,o("div",Ds,[y(o("input",{type:"color","onUpdate:modelValue":t[36]||(t[36]=e=>s.value.config.color=e),class:"w-8 h-6 bg-transparent cursor-pointer border-none"},null,512),[[A,s.value.config.color]]),r(m,{value:s.value.config.color,"onUpdate:modelValue":t[37]||(t[37]=e=>s.value.config.color=e),class:"p-inputtext-sm flex-grow font-mono uppercase !bg-transparent border-none shadow-none p-1",style:C({color:s.value.config.color})},null,8,["value","style"])])])])])):p("",!0),s.value.type==="image"?(n(),a("section",Ws,[r(i,{label:"CHANGER L'IMAGE",icon:"pi pi-upload",onClick:t[38]||(t[38]=e=>Ie(s.value.id)),class:"w-full p-button-outlined p-button-sm"})])):p("",!0),["chart","kpi"].includes(s.value.type)?(n(),a("section",Ps,[Es,o("div",Is,[s.value.type==="kpi"?(n(),a("div",As,[r(x,{modelValue:s.value.dataSource.model,"onUpdate:modelValue":t[39]||(t[39]=e=>s.value.dataSource.model=e),options:z.value,optionLabel:"name",optionValue:"name",placeholder:"Modèle Laravel",class:"w-full text-xs"},null,8,["modelValue","options"]),s.value.dataSource.model?(n(),N(x,{key:0,modelValue:s.value.dataSource.column,"onUpdate:modelValue":t[40]||(t[40]=e=>s.value.dataSource.column=e),options:((ce=z.value.find(e=>e.name===s.value.dataSource.model))==null?void 0:ce.columns)||[],placeholder:"Champ",class:"w-full text-xs font-mono"},null,8,["modelValue","options"])):p("",!0),r(x,{modelValue:s.value.dataSource.method,"onUpdate:modelValue":t[41]||(t[41]=e=>s.value.dataSource.method=e),options:["COUNT","SUM","AVG","MAX","MIN"],placeholder:"Méthode SQL",class:"w-full text-xs"},null,8,["modelValue"]),r(x,{modelValue:s.value.config.timeScale,"onUpdate:modelValue":t[42]||(t[42]=e=>s.value.config.timeScale=e),options:["minutes","hours","days","weeks","months"],placeholder:"Intervalle de données",class:"w-full text-xs"},null,8,["modelValue"])])):p("",!0),r(i,{label:"SYNC LARAVEL",icon:"pi pi-refresh",onClick:t[43]||(t[43]=e=>Le(s.value)),loading:s.value.isSyncing,class:"w-full p-button-indigo p-button-sm font-black"},null,8,["loading"])]),s.value.type==="chart"?(n(),a("div",Ms,[(n(),a($,null,U(ye,e=>o("button",{key:e.value,onClick:h=>s.value.chartType=e.value,class:_([s.value.chartType===e.value?"bg-indigo-600 border-indigo-500":"bg-white/5 border-white/5","flex flex-col items-center p-3 rounded-xl border transition-all"])},[o("i",{class:_([e.icon,"text-lg"])},null,2),o("span",Bs,v(e.label),1)],10,zs)),64))])):p("",!0),s.value.type==="chart"?(n(),a("div",js,[Fs,r(x,{modelValue:s.value.config.timeScale,"onUpdate:modelValue":t[44]||(t[44]=e=>s.value.config.timeScale=e),options:["minutes","hours","days","weeks","months"],placeholder:"Axe X",class:"w-full text-xs"},null,8,["modelValue"])])):p("",!0)])):p("",!0),s.value.type==="chart"?(n(),a("section",Os,[Ns,(n(!0),a($,null,U(s.value.dataSources,(e,h)=>{var d;return n(),a("div",{key:h,class:"bg-white/5 p-4 rounded-xl space-y-3 border-l-4",style:C({borderColor:e.color})},[r(x,{modelValue:e.model,"onUpdate:modelValue":w=>e.model=w,options:z.value,optionLabel:"name",optionValue:"name",placeholder:"Modèle Laravel",class:"w-full text-xs"},null,8,["modelValue","onUpdate:modelValue","options"]),e.model?(n(),N(x,{key:0,modelValue:e.column,"onUpdate:modelValue":w=>e.column=w,options:((d=z.value.find(w=>w.name===e.model))==null?void 0:d.columns)||[],placeholder:"Champ",class:"w-full text-xs font-mono mt-2"},null,8,["modelValue","onUpdate:modelValue","options"])):p("",!0),y(o("input",{type:"color","onUpdate:modelValue":w=>e.color=w,class:"w-full h-8 bg-transparent cursor-pointer"},null,8,qs),[[A,e.color]]),r(i,{icon:"pi pi-times",onClick:w=>s.value.dataSources.splice(h,1),class:"p-button-danger p-button-text p-button-sm"},null,8,["onClick"])],4)}),128)),r(i,{label:"Ajouter une série",icon:"pi pi-plus",onClick:t[45]||(t[45]=e=>s.value.dataSources.push({model:null,column:null,formula:null,color:"#"+(Math.random()*16777215<<0).toString(16)})),class:"p-button-outlined p-button-sm w-full"})])):p("",!0)])):(n(),a("div",Ys,[r(B,null,{default:j(()=>[r(L,{header:"Document"},{default:j(()=>[o("div",Js,[Xs,o("div",Gs,[o("div",Hs,[Ks,r(x,{modelValue:u.value[g.value].format,"onUpdate:modelValue":t[46]||(t[46]=e=>u.value[g.value].format=e),options:K,optionLabel:"name",class:"w-full text-xs"},null,8,["modelValue"])]),o("div",Qs,[Zs,r(I,{modelValue:u.value[g.value].orientation,"onUpdate:modelValue":t[47]||(t[47]=e=>u.value[g.value].orientation=e),options:[{label:"Portrait",value:"portrait"},{label:"Paysage",value:"landscape"}],optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),o("div",en,[tn,y(o("input",{type:"color","onUpdate:modelValue":t[48]||(t[48]=e=>u.value[g.value].background=e),class:"w-full h-10 bg-transparent cursor-pointer"},null,512),[[A,u.value[g.value].background]])]),o("div",on,[ln,r(I,{modelValue:u.value[g.value].layoutMode,"onUpdate:modelValue":t[49]||(t[49]=e=>u.value[g.value].layoutMode=e),options:[{label:"Libre",value:"absolute"},{label:"Grille",value:"grid"}],optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue"])])])])]),_:1}),r(L,{header:"Pages"},{default:j(()=>[o("div",sn,[r(i,{label:"Ajouter une page",icon:"pi pi-plus",onClick:Re,class:"w-full p-button-outlined p-button-sm"}),o("div",nn,[(n(!0),a($,null,U(u.value,(e,h)=>(n(),a("div",{key:e.id,class:_(["flex items-center gap-3 p-2 rounded-lg border-2",g.value===h?"bg-indigo-500/20 border-indigo-500":"bg-white/5 border-transparent hover:border-white/20"]),draggable:"true",onDragstart:d=>H.value=h,onDragover:t[51]||(t[51]=R(()=>{},["prevent"])),onDrop:d=>Ee(d,h),onClick:d=>g.value=h},[rn,o("div",dn,[r(m,{modelValue:e.name,"onUpdate:modelValue":d=>e.name=d,onClick:t[50]||(t[50]=R(()=>{},["stop"])),onBlur:d=>Pe(e),class:"p-inputtext-sm w-full mt-1 bg-black/20 border-white/10"},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),o("div",cn,[y(r(i,{icon:"pi pi-copy",onClick:R(d=>We(h),["stop"]),class:"p-button-secondary p-button-text p-button-sm"},null,8,["onClick"]),[[V,"Dupliquer",void 0,{left:!0}]]),y(r(i,{icon:"pi pi-trash",onClick:R(d=>De(h),["stop"]),class:"p-button-danger p-button-text p-button-sm"},null,8,["onClick"]),[[V,"Supprimer",void 0,{left:!0}]])])],42,an))),128))])])]),_:1})]),_:1})]))])]),r(J,{visible:F.value,"onUpdate:visible":t[54]||(t[54]=e=>F.value=e),header:"Éditeur de Données Quantum",style:{width:"80vw"},modal:"",class:"p-fluid"},{footer:j(()=>[r(i,{label:"Annuler",icon:"pi pi-times",onClick:t[53]||(t[53]=e=>F.value=!1),class:"p-button-text"}),r(i,{label:"Enregistrer les modifications",icon:"pi pi-check",onClick:Ve,class:"p-button-indigo"})]),default:j(()=>[o("div",un,[o("div",pn,[o("div",gn,[fn,r(i,{icon:"pi pi-plus",onClick:Ce,class:"p-button-rounded p-button-text p-button-sm"})]),(n(!0),a($,null,U(b.tempColumns,(e,h)=>(n(),a("div",{key:h,class:"flex gap-2"},[r(m,{modelValue:b.tempColumns[h],"onUpdate:modelValue":d=>b.tempColumns[h]=d,class:"p-inputtext-sm"},null,8,["modelValue","onUpdate:modelValue"]),r(i,{icon:"pi pi-times",onClick:d=>we(e),class:"p-button-danger p-button-text p-button-sm"},null,8,["onClick"])]))),128)),o("div",hn,[r(i,{label:"IMPORTER CSV",icon:"pi pi-upload",class:"p-button-help p-button-sm",onClick:t[52]||(t[52]=e=>l.$refs.csvInput.click())}),o("input",{type:"file",ref:"csvInput",class:"hidden",accept:".csv",onChange:$e},null,544)])]),o("div",vn,[o("div",mn,[bn,r(i,{label:"Ajouter une ligne",icon:"pi pi-plus-circle",onClick:Se,class:"p-button-sm p-button-outlined w-auto"})]),o("div",xn,[o("table",yn,[o("thead",kn,[o("tr",null,[(n(!0),a($,null,U(b.tempColumns,e=>(n(),a("th",{key:e,class:"p-3 text-left font-black uppercase opacity-40"},v(e),1))),128))])]),o("tbody",null,[(n(!0),a($,null,U(b.tempRows,(e,h)=>(n(),a("tr",{key:h,class:"border-t border-white/5"},[(n(!0),a($,null,U(b.tempColumns,d=>(n(),a("td",{key:d,class:"p-1"},[r(m,{modelValue:e[d],"onUpdate:modelValue":w=>e[d]=w,class:"p-inputtext-sm border-none bg-transparent"},null,8,["modelValue","onUpdate:modelValue"])]))),128)),o("td",_n,[r(i,{icon:"pi pi-trash",onClick:d=>b.tempRows.splice(h,1),class:"p-button-danger p-button-text p-button-sm"},null,8,["onClick"])])]))),128))])])])])])]),_:1},8,["visible"]),r(Z,{position:"bottom-right"}),r(ee)])}}},qn=St(Cn,[["__scopeId","data-v-17877039"]]);export{qn as default};
