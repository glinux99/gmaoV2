import{s as w}from"./index-C9ua_LZc.js";import{s as C}from"./index-DR-PVOhd.js";import{s as j}from"./index-BMBaB7B1.js";import{s as B}from"./index-DGDWVGXJ.js";import{Y as U,T as E,af as N,e as I,f as $,o as a,j as l,i as m,g as r,l as d,t as u,p as h,n as A,m as D,A as F}from"./app-BTm5MPCd.js";import"./index-DOcyrvpR.js";const O={class:"flex flex-col gap-4"},T={class:"flex flex-col gap-2"},L=l("label",{for:"name"},"Name",-1),M={key:0,class:"text-red-500"},P={class:"flex flex-col"},Y=l("label",{for:"permissions"},"Permissions",-1),q={class:"flex justify-start items-center space-x-2 mt-2"},z=l("label",{for:"check_all",class:"ml-2"}," Check All ",-1),G={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mt-2"},H=["for"],J={key:0,class:"text-red-500"},K={class:"flex justify-end gap-2"},se={__name:"Edit",props:{show:Boolean,title:String,role:Object,permissions:Object},emits:["close"],setup(g,{emit:x}){const t=g,n=U({multipleSelect:!1}),f=x,e=E({name:"",permissions:[]}),b=()=>{var i;e.put(route("role.update",(i=t.role)==null?void 0:i.id),{preserveScroll:!0,onSuccess:()=>{f("close"),e.reset()},onError:()=>null,onFinish:()=>null})};N(()=>{var i,s,c;t.show&&(e.errors={},e.name=(i=t.role)==null?void 0:i.name,e.permissions=(s=t.role.permissions)==null?void 0:s.map(p=>p.id)),t.permissions.length==((c=t.role)==null?void 0:c.permissions.length)?n.multipleSelect=!0:n.multipleSelect=!1});const v=i=>{i.target.checked===!1?e.permissions=[]:(e.permissions=[],t.permissions.forEach(s=>{e.permissions.push(s.id)}))},y=()=>{t.permissions.length==e.permissions.length?n.multipleSelect=!0:n.multipleSelect=!1};return(i,s)=>{const c=B,p=j,_=C,k=w;return a(),I(k,{visible:t.show,"onUpdate:visible":s[4]||(s[4]=o=>t.show=o),position:"center",modal:"",header:"Update "+t.title,style:{width:"50rem"},closable:!1},{default:$(()=>[l("form",{onSubmit:F(b,["prevent"])},[l("div",O,[l("div",T,[L,m(c,{id:"name",modelValue:r(e).name,"onUpdate:modelValue":s[0]||(s[0]=o=>r(e).name=o),class:"flex-auto",autocomplete:"off",placeholder:"Name"},null,8,["modelValue"]),r(e).errors.name?(a(),d("small",M,u(r(e).errors.name),1)):h("",!0)]),l("div",P,[Y,l("div",q,[m(p,{modelValue:n.multipleSelect,"onUpdate:modelValue":s[1]||(s[1]=o=>n.multipleSelect=o),onChange:v,inputId:"check_all",binary:!0},null,8,["modelValue"]),z]),l("div",G,[(a(!0),d(D,null,A(t.permissions,(o,S)=>(a(),d("div",{class:"flex items-center justify-start space-x-2",key:S},[m(p,{modelValue:r(e).permissions,"onUpdate:modelValue":s[2]||(s[2]=V=>r(e).permissions=V),onChange:y,inputId:"permission_"+o.id,value:o.id},null,8,["modelValue","inputId","value"]),l("label",{for:"permission_"+o.id,class:"ml-2"},u(o.name),9,H)]))),128))]),r(e).errors.permissions?(a(),d("small",J,u(r(e).errors.permissions),1)):h("",!0)]),l("div",K,[m(_,{type:"button",label:"Cancel",severity:"secondary",onClick:s[3]||(s[3]=o=>f("close"))}),m(_,{type:"submit",label:"Update"})])])],32)]),_:1},8,["visible","header"])}}};export{se as default};
