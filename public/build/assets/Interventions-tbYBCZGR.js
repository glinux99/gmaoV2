import{T as be}from"./index-BeMiMaX7.js";import{s as ye}from"./index-LzhPMz77.js";import{u as he,a as we,b as ke,r as m,d as w,F as f,c as T,T as W,w as Q,e as k,f as x,o as _,i as a,g as e,Z as Ve,j as t,t as r,k as Ce,p as G,q as N,l as V,n as Se,X as Te,U as Ae,m as Me,s as K,h as Pe,x as Ie,y as Re}from"./app-B4oSAkVP.js";import{_ as Ue}from"./AppLayout-CEyAmMP5.js";import{s as X}from"./index-DzuzenO3.js";import{s as v}from"./index-C20p2cSe.js";import{s as F,a as $e}from"./index-YrJ63t72.js";import{s as qe}from"./index-JNFFLNI-.js";import{s as De}from"./index-DTLAliIa.js";import{a as Le,s as Ne}from"./index-Dhf6pfmr.js";import{s as g}from"./index-DVIMWJjq.js";import{s as j}from"./index-DzCpZxvp.js";import{s as Fe}from"./index-WjAcbiK8.js";import{s as je}from"./index-CRfXkZE2.js";import{s as Be}from"./index-DjU5rnlX.js";import{s as Z}from"./index-D82-jNZI.js";import{s as J}from"./index-CZOaMDIN.js";import{s as Oe}from"./index-DecA6guR.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-B59JWmkM.js";import"./index-BM7dsjYe.js";import"./index-gwiffqIQ.js";import"./index-DZohkDvD.js";import"./index-W2upbyuC.js";const u=A=>(Ie("data-v-afeff322"),A=A(),Re(),A),ze={class:"quantum-v11-container p-4 lg:p-8 bg-[#f8fafc] min-h-screen"},He={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4"},We={class:"flex items-center gap-4"},Qe=u(()=>t("div",{class:"flex h-16 w-16 items-center justify-center rounded-[1rem] bg-primary-600 shadow-xl shadow-primary-200"},[t("i",{class:"pi pi-map-marker text-2xl text-white"})],-1)),Ge=["innerHTML"],Ke={class:"text-slate-500 text-xs font-medium uppercase tracking-widest"},Xe={class:"flex items-center gap-3 bg-white p-2 rounded-2xl shadow-sm border border-slate-100"},Ze={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Je={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},Ye=u(()=>t("div",{class:"w-14 h-14 rounded-xl bg-slate-100 flex items-center justify-center"},[t("i",{class:"pi pi-box text-2xl text-slate-500"})],-1)),et={class:"text-2xl font-black text-slate-800"},tt={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},st={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},lt=u(()=>t("div",{class:"w-14 h-14 rounded-xl bg-amber-50 flex items-center justify-center"},[t("i",{class:"pi pi-clock text-2xl text-amber-500"})],-1)),ot={class:"text-2xl font-black text-slate-800"},it={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},nt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},at=u(()=>t("div",{class:"w-14 h-14 rounded-xl bg-sky-50 flex items-center justify-center"},[t("i",{class:"pi pi-spin pi-spinner text-2xl text-sky-500"})],-1)),rt={class:"text-2xl font-black text-slate-800"},dt={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},ct={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},pt=u(()=>t("div",{class:"w-14 h-14 rounded-xl bg-green-50 flex items-center justify-center"},[t("i",{class:"pi pi-check-circle text-2xl text-green-500"})],-1)),ut={class:"text-2xl font-black text-slate-800"},mt={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},xt={class:"card-v11 overflow-hidden border border-slate-200 rounded-2xl bg-white shadow-sm"},_t={class:"flex flex-col md:flex-row justify-between items-center gap-4 p-4"},ft={class:"flex items-center gap-2"},gt={key:0,class:"font-bold text-slate-800 tracking-tight"},vt={key:2,class:"flex items-center gap-2"},bt={class:"text-xs font-medium"},yt={key:4,class:"text-slate-600 text-sm font-mono"},ht={key:5,class:"flex items-center gap-2"},wt={class:"w-6 h-6 rounded-full bg-primary-100 flex items-center justify-center text-[10px] font-bold text-primary-600"},kt={class:"text-xs"},Vt=["title"],Ct={class:"font-semibold mb-3"},St={class:"px-8 py-4 bg-slate-900 rounded-xl text-white flex justify-between items-center shadow-lg relative z-50"},Tt={class:"flex items-center gap-4"},At=u(()=>t("div",{class:"p-2 bg-blue-500/20 rounded-lg border border-blue-500/30"},[t("i",{class:"pi pi-shield text-blue-400 text-xl"})],-1)),Mt={class:"flex flex-col"},Pt={class:"text-sm font-black uppercase tracking-widest text-white leading-none"},It={class:"text-[9px] text-blue-300 font-bold uppercase tracking-tighter mt-1 italic"},Rt={class:"flex items-center gap-6"},Ut={class:"flex flex-col items-end mr-4"},$t=u(()=>t("span",{class:"text-[9px] font-bold text-slate-400 uppercase mb-1"},"Status de l'intervention",-1)),qt={class:"p-2"},Dt={class:"grid grid-cols-1 md:grid-cols-12 gap-4 p-4"},Lt={class:"md:col-span-4 space-y-4"},Nt={class:"p-4 bg-slate-50 rounded-xl border border-slate-100 h-full"},Ft={class:"text-[10px] font-black uppercase text-slate-400 tracking-widest block mb-3"},jt={class:"flex gap-4"},Bt=u(()=>t("i",{class:"pi pi-users"},null,-1)),Ot={class:"text-xs font-bold"},Et=u(()=>t("i",{class:"pi pi-user"},null,-1)),zt={class:"text-xs font-bold"},Ht={class:"mt-4"},Wt={class:"md:col-span-4 space-y-4"},Qt={class:"p-4 bg-slate-50 rounded-xl border border-slate-100"},Gt={class:"text-[10px] font-black uppercase text-slate-400 tracking-widest block mb-3"},Kt={class:"p-4 bg-slate-50 rounded-xl border border-slate-100"},Xt={class:"text-[10px] font-black uppercase text-slate-400 tracking-widest block mb-3"},Zt={class:"space-y-4"},Jt={class:"flex flex-col gap-1"},Yt={class:"text-[9px] font-bold uppercase text-slate-500"},es={class:"grid grid-cols-2 gap-2"},ts={class:"flex flex-col gap-1"},ss={class:"text-[9px] font-bold uppercase text-slate-500"},ls={class:"flex flex-col gap-1"},os={class:"text-[9px] font-bold uppercase text-slate-500"},is={class:"flex flex-col gap-1"},ns=u(()=>t("label",{class:"text-[9px] font-bold uppercase text-slate-500"},"Complexité Technique",-1)),as={class:"md:col-span-4 space-y-4"},rs={class:"p-4 bg-slate-900 rounded-xl text-white shadow-xl"},ds={class:"text-xs font-black uppercase tracking-widest mb-4 opacity-70"},cs={class:"space-y-3"},ps={class:"flex flex-col gap-1"},us=u(()=>t("label",{class:"text-[9px] font-bold uppercase"},"Type d'entité",-1)),ms={class:"flex flex-col gap-1"},xs=u(()=>t("label",{class:"text-[9px] font-bold uppercase"},"Assigné à",-1)),_s={class:"p-4 bg-slate-50 rounded-xl border border-slate-100"},fs=u(()=>t("label",{class:"text-[10px] font-black uppercase text-slate-400 tracking-widest block mb-3"},"Planification & Suivi",-1)),gs={class:"space-y-4"},vs={class:"grid grid-cols-2 gap-x-4 mb-4 w-full"},bs={class:"flex flex-col gap-1.5 min-w-0"},ys=u(()=>t("label",{class:"text-[9px] font-bold uppercase text-slate-500 tracking-wider truncate"}," Temps Min (h) ",-1)),hs={class:"flex flex-col gap-1.5 min-w-0"},ws=u(()=>t("label",{class:"text-[9px] font-bold uppercase text-slate-500 tracking-wider truncate"}," Temps Max (h) ",-1)),ks={class:"flex flex-col gap-1"},Vs={class:"text-[9px] font-bold uppercase"},Cs={class:"grid grid-cols-2 gap-2"},Ss={class:"p-3 bg-slate-100 rounded-xl text-center"},Ts={class:"block text-[8px] font-black uppercase text-slate-400"},As={class:"text-[10px] font-bold"},Ms={class:"p-3 bg-slate-100 rounded-xl text-center"},Ps={class:"block text-[8px] font-black uppercase text-slate-400"},Is={class:"text-[10px] font-bold"},Rs={class:"md:col-span-12 flex items-center gap-2 mt-4"},Us={for:"is_validated",class:"text-sm font-medium text-slate-700"},$s={class:"flex justify-between items-center w-full px-2"},qs={class:"flex flex-col gap-6 p-4"},Ds={class:"flex items-center justify-center border-2 border-dashed border-slate-300 rounded-lg p-8"},Ls={class:"text-center"},Ns=u(()=>t("i",{class:"pi pi-upload text-4xl text-slate-400 mb-3"},null,-1)),Fs={class:"font-semibold text-slate-700"},js={key:0,class:"p-error"},Bs={__name:"Interventions",props:{interventionRequests:Object,filters:Object,users:Array,teams:Array,connections:Array,regions:Array,zones:Array,statuses:Array,priorities:Array,interventionReasons:Array,categories:Array,technicalComplexities:Array},setup(A){var E,z,H;const p=A,U={"Dépannage Réseau Urgent":{category:"Réseau",complexity:"Moyennement complexe",priority:"Haute",min:72,max:72},"Réparation Éclairage Public":{category:"Réseau",complexity:"Moyennement complexe",priority:"Moyenne",min:4,max:24},"Entretien Réseau Planifié":{category:"Réseau",complexity:"Très complexe",priority:"Moyenne",min:24,max:72},"Incident Majeur Réseau":{category:"Réseau",complexity:"Moyennement complexe",priority:"Haute",min:4,max:48},"Support Achat MobileMoney":{category:"Support Technique",complexity:"Peu complexe",priority:"Basse",min:1,max:1},"Support Achat Token Impossible":{category:"Support Technique",complexity:"Pas complexe",priority:"Basse",min:.5,max:1},"Aide Recharge (Sans clavier)":{category:"Support Technique / Client",complexity:"Pas complexe",priority:"Basse",min:.25,max:1},"Élagage Réseau":{category:"Réseau",complexity:"Peu complexe",priority:"Moyenne",min:72,max:72},"Réparation Chute de Tension":{category:"Réseau",complexity:"Moyennement complexe",priority:"Moyenne",min:4,max:24},"Coupure Individuelle (CI)":{category:"Réseau",complexity:"Peu complexe",priority:"Moyenne",min:2,max:4},"CI Équipement Client":{category:"Réseau",complexity:"Peu complexe",priority:"Moyenne",min:2,max:4},"CI Équipement Virunga":{category:"Réseau",complexity:"Peu complexe",priority:"Moyenne",min:2,max:4},"CI Vol de Câble":{category:"Réseau",complexity:"Moyennement complexe",priority:"Moyenne",min:4,max:72},"Dépannage Clavier Client":{category:"Client",complexity:"Pas complexe",priority:"Basse",min:.5,max:1},"Réparation Compteur Limité":{category:"Client",complexity:"Pas complexe",priority:"Basse",min:.5,max:1},"Rétablissement Déconnexion":{category:"Client",complexity:"Pas complexe",priority:"Basse",min:.5,max:1},"Déplacement Câble (Planifié)":{category:"Réseau",complexity:"Peu complexe",priority:"Moyenne",min:8,max:72},"Déplacement Poteau (Planifié)":{category:"Réseau",complexity:"Peu complexe",priority:"Moyenne",min:24,max:72},"Reconnexion Client":{category:"Client",complexity:"Pas complexe",priority:"Basse",min:.5,max:1},"Support Envoi Formulaire":{category:"Support Technique",complexity:"Pas complexe",priority:"Basse",min:.1,max:.5},"Intervention Non-Classifiée":{category:"Support / Autres",complexity:"Pas complexe",priority:"Basse",min:.5,max:24}},{t:l}=he(),I=we();ke(),m();const b=m(!1),Y=m(!1),ee=m(),B=m(),$=m([]);m({type:null,id:null});const M=m(!1),P=m("client"),R=w(()=>{const n=p.interventionRequests.data||[];return{total:p.interventionRequests.total,pending:n.filter(s=>s.status==="pending").length,in_progress:n.filter(s=>s.status==="in_progress").length,completed:n.filter(s=>s.status==="completed").length}}),O=w(()=>[{field:"title",header:l("interventions.table.reference"),sortable:!0},{field:"intervention_reason",header:l("interventions.table.reason"),sortable:!0},{field:"status",header:l("interventions.table.status"),sortable:!0},{field:"customer_code",header:l("interventions.table.customerCode"),sortable:!1},{field:"client_name",header:l("interventions.table.clientName"),sortable:!1},{field:"region_name",header:l("interventions.table.region"),sortable:!1},{field:"priority",header:l("interventions.table.priority"),sortable:!0},{field:"technical_complexity",header:l("interventions.table.complexity"),sortable:!1},{field:"scheduled_date",header:l("interventions.table.deadline"),sortable:!0},{field:"completed_date",header:l("interventions.table.completedAt"),sortable:!1},{field:"assigned_to_name",header:l("interventions.table.assignedTo"),sortable:!1},{field:"category",header:l("interventions.table.category"),sortable:!1},{field:"description",header:l("interventions.table.description"),sortable:!1}]),q=m(["title","status","client_name","priority","scheduled_date","assigned_to_name","intervention_reason"]),te=w(()=>O.value.filter(n=>q.value.includes(n.field))),C=m({global:{value:((E=p.filters)==null?void 0:E.search)||null,matchMode:f.CONTAINS},title:{operator:T.AND,constraints:[{value:null,matchMode:f.STARTS_WITH}]},status:{value:((z=p.filters)==null?void 0:z.status)||null,matchMode:f.EQUALS},priority:{value:((H=p.filters)==null?void 0:H.priority)||null,matchMode:f.EQUALS},region_name:{operator:T.AND,constraints:[{value:null,matchMode:f.STARTS_WITH}]},client_name:{operator:T.AND,constraints:[{value:null,matchMode:f.STARTS_WITH}]}}),se=()=>{C.value={global:{value:null,matchMode:f.CONTAINS},title:{operator:T.AND,constraints:[{value:null,matchMode:f.STARTS_WITH}]},status:{value:null,matchMode:f.EQUALS},priority:{value:null,matchMode:f.EQUALS},region_name:{operator:T.AND,constraints:[{value:null,matchMode:f.STARTS_WITH}]},client_name:{operator:T.AND,constraints:[{value:null,matchMode:f.STARTS_WITH}]}}};w(()=>Object.values(C.value).filter(n=>n.value!==null&&n.value!=="").length-1);const le=n=>{switch(n==null?void 0:n.toLowerCase()){case"completed":return"success";case"pending":return"warning";case"cancelled":return"danger";case"in_progress":return"info";default:return"secondary"}},oe=n=>{switch(n==null?void 0:n.toLowerCase()){case"haute":return"#ef4444";case"moyenne":return"#f59e0b";case"basse":return"#10b981";default:return"#64748b"}},ie=n=>{switch(n){case"Pas complexe":return"success";case"Peu complexe":return"info";case"Moyennement complexe":return"warning";case"Très complexe":return"danger";default:return"secondary"}},o=W({id:null,title:"",description:"",status:"pending",requested_by_user_id:null,requested_by_connection_id:null,assignable_type:null,assignable_id:null,region_id:null,zone_id:null,intervention_reason:null,category:null,technical_complexity:null,priority:null,min_time_hours:null,max_time_hours:null,scheduled_date:null,completed_date:null,comments:null,resolution_notes:null,gps_latitude:null,gps_longitude:null,is_validated:!1}),D=m(!1),h=W({file:null}),ne=()=>{o.reset(),o.title=`PLT-${Math.floor(Date.now()/1e3)}`,o.scheduled_date=new Date().toISOString().slice(0,10),o.is_validated=!0,D.value=!1,b.value=!0},ae=()=>{h.reset(),M.value=!0},re=n=>{o.clearErrors(),o.defaults({...n,scheduled_date:n.scheduled_date?new Date(n.scheduled_date).toISOString().slice(0,10):null,completed_date:n.completed_date?new Date(n.completed_date).toISOString().slice(0,10):null}).reset(),D.value=!0,o.is_validated=!!o.is_validated,b.value=!0},de=w(()=>p.connections.map(n=>({...n,search_label:`${n.first_name} ${n.last_name} (${n.customer_code})`}))),ce=w(()=>{var n;return(((n=p.interventionRequests)==null?void 0:n.data)||[]).map(s=>{var S;return{...s,client_name:s.requested_by_connection?`${s.requested_by_connection.first_name} ${s.requested_by_connection.last_name}`:l("interventions.notApplicable"),customer_code:s.requested_by_connection?s.requested_by_connection.customer_code:"-",assigned_to_name:s.assignable?s.assignable.name:l("interventions.notAssigned"),region_name:((S=s.region)==null?void 0:S.designation)||"-"}})}),pe=w(()=>[{label:l("interventions.assignableTypes.technician"),value:"App\\Models\\User"},{label:l("interventions.assignableTypes.team"),value:"App\\Models\\Team"}]),ue=n=>n==="App\\Models\\User"?p.users:n==="App\\Models\\Team"?p.teams:[],me=m(!1),xe=m(!1),_e=()=>{console.log("form.id"),console.log(o.id);const n=o.id?route("interventions.update",o.id):route("interventions.store");me.value=!0;const s=D.value?"put":"post";o.submit(s,n,{onSuccess:()=>{xe.value=!1,I.add({severity:"success",summary:"Succès",detail:"Région enregistrée",life:3e3}),b.value=!1},onError:()=>{b.value=!1}})},fe=()=>{h.post(route("interventions.import"),{onSuccess:()=>{M.value=!1,I.add({severity:"success",summary:"Succès",detail:"Importation démarrée avec succès.",life:3e3}),Pe.reload({only:["interventionRequests"]})},onError:n=>{const s=n.file||"Une erreur est survenue lors de l'importation.";I.add({severity:"error",summary:"Erreur d'importation",detail:s,life:5e3})}})};Q(()=>o.requested_by_connection_id,n=>{if(n){const s=p.connections.find(S=>S.id===n);s&&(o.region_id=s.region_id,o.zone_id=s.zone_id)}}),Q(()=>o.intervention_reason,n=>{if(n&&U[n]){const s=U[n];o.category=s.category,o.technical_complexity=s.complexity,o.priority=s.priority,o.min_time_hours=s.min,o.max_time_hours=s.max,I.add({severity:"info",summary:"Auto-configuration",detail:`Paramètres appliqués pour : ${n}`,life:2e3})}});const ge=m(["pending","assigned","in_progress","completed","cancelled","Non validé"]),ve=()=>{ee.value.exportCSV()};return(n,s)=>{const S=ye,L=be;return _(),k(Ue,null,{default:x(()=>[a(e(Ve),{title:e(l)("interventions.title")},null,8,["title"]),a(e(qe)),t("div",ze,[t("div",He,[t("div",We,[Qe,t("div",null,[t("h1",{class:"text-2xl font-black tracking-tighter text-slate-900 uppercase",innerHTML:e(l)("interventions.headTitle")},null,8,Ge),t("p",Ke,r(e(l)("interventions.subtitle")),1)])]),t("div",Xe,[a(e(g),{label:e(l)("common.import"),icon:"pi pi-upload",severity:"secondary",onClick:ae,class:"rounded-lg"},null,8,["label"]),Ce(),a(e(g),{label:e(l)("interventions.addNew"),icon:"pi pi-plus",class:"shadow-lg shadow-primary-200",onClick:ne},null,8,["label"])])]),t("div",Ze,[t("div",Je,[Ye,t("div",null,[t("div",et,r(R.value.total),1),t("div",tt,r(e(l)("interventions.stats.total")),1)])]),t("div",st,[lt,t("div",null,[t("div",ot,r(R.value.pending),1),t("div",it,r(e(l)("interventions.stats.pending")),1)])]),t("div",nt,[at,t("div",null,[t("div",rt,r(R.value.in_progress),1),t("div",dt,r(e(l)("interventions.stats.in_progress")),1)])]),t("div",ct,[pt,t("div",null,[t("div",ut,r(R.value.completed),1),t("div",mt,r(e(l)("interventions.stats.completed")),1)])])]),t("div",xt,[a(e($e),{value:ce.value,selection:$.value,"onUpdate:selection":s[3]||(s[3]=d=>$.value=d),dataKey:"id",filters:C.value,"onUpdate:filters":s[4]||(s[4]=d=>C.value=d),filterDisplay:"menu",globalFilterFields:["title","client_name","status","priority","region_name"],rows:10,paginator:"",class:"p-datatable-sm quantum-table",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:e(l)("interventions.table.report")},{header:x(()=>[t("div",_t,[a(e(Le),{iconPosition:"left"},{default:x(()=>[a(e(Ne),{class:"pi pi-search text-slate-400"}),a(e(j),{modelValue:C.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=d=>C.value.global.value=d),placeholder:e(l)("interventions.searchPlaceholder"),class:"w-full md:w-80 rounded-2xl border-slate-200 bg-slate-50/50 focus:bg-white"},null,8,["modelValue","placeholder"])]),_:1}),t("div",ft,[$.value.length?(_(),k(e(g),{key:0,icon:"pi pi-trash",label:e(l)("interventions.deleteSelected"),class:"p-button-danger p-button-text p-button-sm animate-fadein",onClick:s[1]||(s[1]=d=>Y.value=!0)},null,8,["label"])):G("",!0),N(a(e(g),{icon:"pi pi-filter-slash",outlined:"",severity:"secondary",onClick:se,class:"rounded-xl"},null,512),[[L,e(l)("common.resetFilters"),void 0,{bottom:!0}]]),a(e(g),{icon:"pi pi-download",text:"",rounded:"",severity:"secondary",onClick:ve}),N(a(e(g),{icon:"pi pi-cog",text:"",rounded:"",severity:"secondary",onClick:s[2]||(s[2]=d=>B.value.toggle(d))},null,512),[[L,"Colonnes",void 0,{bottom:!0}]])])])]),default:x(()=>[a(e(F),{selectionMode:"multiple",headerStyle:"width: 3rem"}),(_(!0),V(Me,null,Se(te.value,d=>(_(),k(e(F),{key:d.field,field:d.field,header:d.header,sortable:d.sortable,pt:{header:{class:"whitespace-nowrap"}},filterField:d.field},Te({body:x(({data:c,field:i})=>[i==="title"?(_(),V("span",gt,r(c.title),1)):i==="status"?(_(),k(e(Z),{key:1,value:c.status,severity:le(c.status),class:"uppercase text-[9px] px-2"},null,8,["value","severity"])):i==="priority"?(_(),V("div",vt,[t("div",{class:"w-2 h-2 rounded-full",style:Ae({backgroundColor:oe(c.priority)})},null,4),t("span",bt,r(c.priority),1)])):i==="technical_complexity"?(_(),k(e(Z),{key:3,value:c.technical_complexity,severity:ie(c.technical_complexity),class:"text-[9px] px-2"},null,8,["value","severity"])):i==="scheduled_date"||i==="completed_date"?(_(),V("span",yt,r(c[i]?new Date(c[i]).toLocaleDateString():"-"),1)):i==="assigned_to_name"?(_(),V("div",ht,[t("div",wt,r(c.assigned_to_name.charAt(0)),1),t("span",kt,r(c.assigned_to_name),1)])):(_(),V("span",{key:6,class:"text-slate-600 text-sm truncate",title:c[i]},r(c[i]),9,Vt))]),_:2},[["title","client_name","region_name"].includes(d.field)?{name:"filter",fn:x(({filterModel:c,filterCallback:i})=>[a(e(j),{modelValue:c.constraints[0].value,"onUpdate:modelValue":y=>c.constraints[0].value=y,type:"text",onInput:y=>i(),class:"p-column-filter",placeholder:`Filtrer par ${d.header}`},null,8,["modelValue","onUpdate:modelValue","onInput","placeholder"])]),key:"0"}:void 0,d.field==="status"?{name:"filter",fn:x(({filterModel:c,filterCallback:i})=>[a(e(v),{modelValue:c.value,"onUpdate:modelValue":y=>c.value=y,onChange:y=>i(),options:p.statuses,placeholder:"Statut",class:"p-column-filter",showClear:""},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),key:"1"}:void 0,d.field==="priority"?{name:"filter",fn:x(({filterModel:c,filterCallback:i})=>[a(e(v),{modelValue:c.value,"onUpdate:modelValue":y=>c.value=y,onChange:y=>i(),options:p.priorities,placeholder:"Priorité",class:"p-column-filter",showClear:""},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),key:"2"}:void 0]),1032,["field","header","sortable","filterField"]))),128)),a(e(F),{header:e(l)("interventions.table.actions"),headerStyle:"width: 5rem"},{body:x(({data:d})=>[N(a(e(g),{icon:"pi pi-arrow-right",class:"p-button-rounded p-button-text p-button-secondary",onClick:c=>re(d)},null,8,["onClick"]),[[L,e(l)("interventions.tooltips.manage"),void 0,{left:!0}]])]),_:1},8,["header"])]),_:1},8,["value","selection","filters","currentPageReportTemplate"])])]),a(e(je),{ref_key:"op",ref:B,class:"p-4"},{default:x(()=>[t("div",Ct,r(e(l)("common.columnSelector.title")),1),a(e(Fe),{modelValue:q.value,"onUpdate:modelValue":s[5]||(s[5]=d=>q.value=d),options:O.value,optionLabel:"header",optionValue:"field",display:"chip",placeholder:e(l)("common.columnSelector.placeholder"),class:"w-full max-w-xs"},null,8,["modelValue","options","placeholder"])]),_:1},512),a(e(X),{visible:b.value,"onUpdate:visible":s[25]||(s[25]=d=>b.value=d),modal:"",header:!1,closable:!1,class:"quantum-dialog w-full max-w-6xl",pt:{mask:{style:"backdrop-filter: blur(4px)"}}},{footer:x(()=>[t("div",$s,[a(e(g),{label:e(l)("interventions.dialog.cancel"),icon:"pi pi-times",class:"p-button-text p-button-secondary",onClick:s[24]||(s[24]=d=>b.value=!1)},null,8,["label"]),a(e(g),{label:e(l)("interventions.dialog.save"),icon:"pi pi-save",class:"px-6 shadow-lg shadow-primary-100",onClick:_e,loading:e(o).processing},null,8,["label","loading"])])]),default:x(()=>{var d,c;return[t("div",St,[t("div",Tt,[At,t("div",Mt,[t("h2",Pt,r(e(o).id?e(l)("interventions.dialog.editTitle"):e(l)("interventions.dialog.createTitle")),1),t("span",It,r(e(l)("interventions.dialog.gmaoConsole")),1)])]),t("div",Rt,[t("div",Ut,[$t,a(S,{modelValue:e(o).status,"onUpdate:modelValue":s[6]||(s[6]=i=>e(o).status=i),options:ge.value,class:"p-selectbutton-sm custom-dark-priority"},null,8,["modelValue","options"])]),a(e(g),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:s[7]||(s[7]=i=>b.value=!1),class:"text-white hover:bg-white/10"})])]),t("div",qt,[t("div",Dt,[t("div",Lt,[t("div",Nt,[t("label",Ft,r(e(l)("interventions.dialog.origin")),1),t("div",jt,[t("div",{class:K(["flex-1 p-3 rounded-xl border-2 transition-all cursor-pointer flex items-center gap-3",P.value==="client"?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 bg-white"]),onClick:s[8]||(s[8]=i=>P.value="client")},[Bt,t("span",Ot,r(e(l)("interventions.dialog.externalClient")),1)],2),t("div",{class:K(["flex-1 p-3 rounded-xl border-2 transition-all cursor-pointer flex items-center gap-3",P.value==="agent"?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 bg-white"]),onClick:s[9]||(s[9]=i=>P.value="agent")},[Et,t("span",zt,r(e(l)("interventions.dialog.internalAgent")),1)],2)]),t("div",Ht,[P.value==="client"?(_(),k(e(v),{key:0,modelValue:e(o).requested_by_connection_id,"onUpdate:modelValue":s[10]||(s[10]=i=>e(o).requested_by_connection_id=i),options:de.value,optionLabel:"search_label",optionValue:"id",filter:"",placeholder:e(l)("interventions.dialog.searchPlaceholder"),class:"w-full quantum-input"},null,8,["modelValue","options","placeholder"])):(_(),k(e(v),{key:1,modelValue:e(o).requested_by_user_id,"onUpdate:modelValue":s[11]||(s[11]=i=>e(o).requested_by_user_id=i),options:p.users,optionLabel:"name",optionValue:"id",filter:"",class:"w-full quantum-input"},null,8,["modelValue","options"]))])])]),t("div",Wt,[t("div",Qt,[t("label",Gt,r(e(l)("interventions.dialog.subjectDescription")),1),a(e(j),{modelValue:e(o).title,"onUpdate:modelValue":s[12]||(s[12]=i=>e(o).title=i),class:"w-full font-bold mb-2",readonly:"",placeholder:e(l)("interventions.dialog.autoReference")},null,8,["modelValue","placeholder"]),a(e(De),{modelValue:e(o).description,"onUpdate:modelValue":s[13]||(s[13]=i=>e(o).description=i),rows:"4",class:"w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-primary-500 text-sm",placeholder:e(l)("interventions.dialog.problemPlaceholder")},null,8,["modelValue","placeholder"])]),t("div",Kt,[t("label",Xt,r(e(l)("interventions.dialog.classification")),1),t("div",Zt,[t("div",Jt,[t("label",Yt,r(e(l)("interventions.dialog.interventionReason")),1),a(e(v),{modelValue:e(o).intervention_reason,"onUpdate:modelValue":s[14]||(s[14]=i=>e(o).intervention_reason=i),options:Object.keys(U),placeholder:"Sélectionner une raison",class:"w-full",filter:""},null,8,["modelValue","options"])]),t("div",es,[t("div",ts,[t("label",ss,r(e(l)("interventions.dialog.category")),1),a(e(v),{modelValue:e(o).category,"onUpdate:modelValue":s[15]||(s[15]=i=>e(o).category=i),options:p.categories,class:"w-full"},null,8,["modelValue","options"])]),t("div",ls,[t("label",os,r(e(l)("interventions.dialog.priority")),1),a(e(v),{modelValue:e(o).priority,"onUpdate:modelValue":s[16]||(s[16]=i=>e(o).priority=i),options:p.priorities,class:"w-full"},null,8,["modelValue","options"])])]),t("div",is,[ns,a(e(v),{modelValue:e(o).technical_complexity,"onUpdate:modelValue":s[17]||(s[17]=i=>e(o).technical_complexity=i),options:p.technicalComplexities,class:"w-full"},null,8,["modelValue","options"])])])])]),t("div",as,[t("div",rs,[t("h4",ds,r(e(l)("interventions.dialog.assignmentDeadline")),1),t("div",cs,[t("div",ps,[us,a(e(v),{modelValue:e(o).assignable_type,"onUpdate:modelValue":s[18]||(s[18]=i=>e(o).assignable_type=i),options:pe.value,optionLabel:"label",optionValue:"value",class:"w-full bg-white/10 border-none text-white rounded-lg"},null,8,["modelValue","options"])]),t("div",ms,[xs,a(e(v),{modelValue:e(o).assignable_id,"onUpdate:modelValue":s[19]||(s[19]=i=>e(o).assignable_id=i),options:ue(e(o).assignable_type),disabled:!e(o).assignable_type,optionLabel:"name",optionValue:"id",filter:"",class:"w-full bg-white/10 border-none text-white rounded-lg"},null,8,["modelValue","options","disabled"])])])]),t("div",_s,[fs,t("div",gs,[t("div",vs,[t("div",bs,[ys,a(e(J),{modelValue:e(o).min_time_hours,"onUpdate:modelValue":s[20]||(s[20]=i=>e(o).min_time_hours=i),class:"w-full",inputClass:"w-full"},null,8,["modelValue"])]),t("div",hs,[ws,a(e(J),{modelValue:e(o).max_time_hours,"onUpdate:modelValue":s[21]||(s[21]=i=>e(o).max_time_hours=i),class:"w-full",inputClass:"w-full"},null,8,["modelValue"])])]),t("div",ks,[t("label",Vs,r(e(l)("interventions.dialog.deadline")),1),a(e(Be),{modelValue:e(o).scheduled_date,"onUpdate:modelValue":s[22]||(s[22]=i=>e(o).scheduled_date=i),class:"w-full",dateFormat:"yy-mm-dd"},null,8,["modelValue"])])])]),t("div",Cs,[t("div",Ss,[t("span",Ts,r(e(l)("interventions.dialog.region")),1),t("span",As,r(((d=p.regions.find(i=>i.id===e(o).region_id))==null?void 0:d.designation)||e(l)("interventions.notApplicable")),1)]),t("div",Ms,[t("span",Ps,r(e(l)("interventions.dialog.zone")),1),t("span",Is,r(((c=p.zones.find(i=>i.id===e(o).zone_id))==null?void 0:c.title)||e(l)("interventions.notApplicable")),1)])])]),t("div",Rs,[a(e(Oe),{modelValue:e(o).is_validated,"onUpdate:modelValue":s[23]||(s[23]=i=>e(o).is_validated=i),binary:!0,inputId:"is_validated"},null,8,["modelValue"]),t("label",Us,r(e(l)("interventions.dialog.validateIntervention")),1)])])])]}),_:1},8,["visible"]),a(e(X),{visible:M.value,"onUpdate:visible":s[28]||(s[28]=d=>M.value=d),modal:"",header:e(l)("connections.importDialog.title"),style:{width:"450px"}},{footer:x(()=>[a(e(g),{label:e(l)("common.cancel"),icon:"pi pi-times",text:"",onClick:s[27]||(s[27]=d=>M.value=!1)},null,8,["label"]),a(e(g),{label:e(l)("connections.importDialog.startImport"),icon:"pi pi-check",onClick:fe,loading:e(h).processing,disabled:!e(h).file},null,8,["label","loading","disabled"])]),default:x(()=>[t("div",qs,[t("div",Ds,[t("div",Ls,[Ns,t("p",Fs,r(e(l)("connections.importDialog.chooseFile")),1),t("input",{type:"file",onInput:s[26]||(s[26]=d=>e(h).file=d.target.files[0]),class:"mt-4",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,32),e(h).errors.file?(_(),V("small",js,r(e(h).errors.file),1)):G("",!0)])])])]),_:1},8,["visible","header"])]),_:1})}}},ul=Ee(Bs,[["__scopeId","data-v-afeff322"]]);export{ul as default};
