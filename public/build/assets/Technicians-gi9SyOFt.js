import{T as ve}from"./index-CrFEKHH1.js";import{u as be,a as ge,b as _e,r as h,F as S,c as j,d as X,T as Y,w as ee,e as V,f as v,o as n,i,g as e,Z as xe,j as l,t as d,q as D,l as c,n as z,m as A,p,s as ye,k as P,U as we,A as le,h as M}from"./app-gDNqx2_D.js";import{_ as Ce}from"./AppLayout-SGD7JHFV.js";import{s as b}from"./index-BFXGy4uN.js";import{s as te}from"./index-bSGFH6Vt.js";import{s as se}from"./index-qtJx-Jx6.js";import{s as q,a as Te}from"./index-C2t85Ev4.js";import{s as ke}from"./index-DNoI7EM0.js";import{s as Se}from"./index-psDJnd0s.js";import{s as Pe}from"./index-D4DTux10.js";import{s as oe}from"./index-BHExvObj.js";import{s as Ve}from"./index-5fxx7ZJm.js";import{a as Ae,s as Me}from"./index-3Y3FmX7C.js";import{s as w}from"./index-DnMOyY1I.js";import{s as Re}from"./index-60plU2KH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DIW2SyDI.js";import"./index-E0OnojZQ.js";import"./index-CadKbAM9.js";import"./index-C57fO0mp.js";import"./index-qcYzN5_Q.js";import"./index-DWMCXZ5G.js";import"./index-Sf75UUsw.js";import"./index-Dqyvdu4C.js";import"./index-CaNPRaEQ.js";import"./index-Bd2-8sAJ.js";import"./index-D-07or2I.js";const Ee={class:"p-4 md:p-8 bg-[#F8FAFC] min-h-screen"},Fe={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-6"},De={class:"flex items-center gap-4"},ze=l("div",{class:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center shadow-lg"},[l("i",{class:"pi pi-users text-white text-3xl"})],-1),$e={class:"text-2xl font-bold text-slate-900"},Ie={class:"text-slate-500 text-sm"},Le={class:"flex items-center gap-3 bg-white p-2 rounded-2xl shadow-sm border border-slate-100"},je=l("div",{class:"h-8 w-[1px] bg-slate-100 mx-2"},null,-1),qe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Ue={class:"flex flex-column gap-2"},Oe={class:"text-xs font-black text-slate-400 uppercase tracking-widest"},He={class:"flex items-center justify-between"},Ne={class:"text-3xl font-black text-slate-800"},Be=l("div",{class:"w-10 h-10 rounded-2xl bg-slate-50 flex items-center justify-center"},[l("i",{class:"pi pi-users text-slate-400"})],-1),Ge={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},Je=l("h3",{class:"font-bold"},"Erreurs lors de la dernière importation :",-1),Ke={class:"list-disc list-inside mt-2 text-sm"},Ze={class:"bg-white rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-200/60 overflow-hidden"},We={class:"flex flex-wrap justify-between items-center gap-4 p-2 w-full"},Qe={class:"flex items-center gap-2"},Xe=["onClick"],Ye={class:"relative"},el={class:"flex flex-col"},ll={class:"font-bold text-slate-800"},tl={class:"text-xs text-slate-500"},sl={key:2,class:"flex items-center gap-2"},ol=l("i",{class:"pi pi-map-marker text-gray-400"},null,-1),al={class:"font-semibold text-slate-600"},il={key:3,class:"font-mono text-sm"},rl={key:4,class:"flex flex-wrap gap-1"},nl={class:"flex justify-end gap-2"},cl={class:"px-8 py-5 bg-slate-900 text-white rounded-xl flex justify-between items-center relative z-50"},dl={class:"flex items-center gap-4"},ul=l("div",{class:"w-12 h-12 bg-primary-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-primary-200"},[l("i",{class:"pi pi-user-plus text-xl"})],-1),pl={class:"font-black text-slate-100 m-0"},ml={class:"grid grid-cols-12 gap-10"},fl={class:"col-span-12 md:col-span-4"},hl={class:"sticky top-0"},vl={class:"relative group bg-white rounded-[2.5rem] p-3 border border-slate-200 shadow-2xl transition-all duration-500 hover:border-primary-300"},bl={class:"relative w-full aspect-square overflow-hidden rounded-[2.5rem] bg-slate-100 shadow-2xl border-4 border-white group"},gl={key:0,class:"w-full h-full flex items-center justify-center"},_l={class:"text-[14rem] font-black text-slate-200 uppercase select-none"},xl=l("div",{class:"w-24 h-24 bg-white/95 text-slate-900 rounded-full flex items-center justify-center shadow-2xl scale-75 group-hover:scale-100 transition-transform duration-500 border-8 border-primary-500/10"},[l("i",{class:"pi pi-camera text-4xl"})],-1),yl=[xl],wl=l("i",{class:"pi pi-trash text-xl"},null,-1),Cl=[wl],Tl={class:"py-6 text-center"},kl={class:"font-black text-slate-900 text-2xl tracking-tighter leading-none mb-2"},Sl=l("span",{class:"text-[10px] font-black text-primary-600 uppercase tracking-[0.3em] bg-primary-50 px-4 py-1.5 rounded-full"}," Identité Visuelle ",-1),Pl=l("div",{class:"mt-4 p-5 bg-slate-900 rounded-[2rem] shadow-xl border-t border-slate-800"},[l("div",{class:"flex items-center justify-between"},[l("div",{class:"flex items-center gap-3"},[l("div",{class:"relative flex items-center justify-center"},[l("div",{class:"absolute w-full h-full bg-emerald-50/20 rounded-full animate-ping"}),l("div",{class:"w-3 h-3 bg-emerald-400 rounded-full relative shadow-[0_0_15px_rgba(52,211,153,1)]"})]),l("span",{class:"text-xs font-bold text-slate-400 uppercase tracking-widest"},"Compte Actif")]),l("i",{class:"pi pi-verified text-emerald-400 text-xl"})])],-1),Vl={class:"col-span-12 md:col-span-8 space-y-8"},Al=l("span",{class:"v11-header-label"},"Informations Générales",-1),Ml={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4"},Rl={class:"flex flex-col gap-2"},El=l("label",{for:"name",class:"v11-label"},"Nom complet",-1),Fl={key:0,class:"p-error"},Dl={class:"flex flex-col gap-2"},zl=l("label",{for:"email",class:"v11-label"},"Email Professionnel",-1),$l={key:0,class:"p-error"},Il=l("span",{class:"v11-header-label"},"Affectation & Rôle",-1),Ll={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4"},jl={class:"flex flex-col gap-2"},ql=l("label",{for:"fonction",class:"v11-label"},"Fonction",-1),Ul={key:0,class:"p-error"},Ol={class:"flex flex-col gap-2"},Hl=l("label",{for:"region",class:"v11-label"},"Région",-1),Nl={key:0,class:"p-error"},Bl=l("span",{class:"v11-header-label"},"Données de Sécurité (EPI)",-1),Gl={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-4 p-6 bg-slate-50 rounded-3xl border border-slate-100"},Jl={class:"flex flex-col gap-2"},Kl=l("label",{for:"numero",class:"v11-label"},"Téléphone",-1),Zl={key:0,class:"p-error"},Wl={class:"flex flex-col gap-2"},Ql=l("label",{for:"pointure",class:"v11-label"},"Pointure",-1),Xl={key:0,class:"p-error"},Yl={class:"flex flex-col gap-2"},et=l("label",{for:"size",class:"v11-label"},"Taille (Vêtement)",-1),lt={key:0,class:"p-error"},tt={key:0,class:"p-6 bg-blue-50/30 rounded-3xl border border-blue-100"},st=l("span",{class:"v11-header-label !text-blue-700"},"Sécurité du compte",-1),ot={class:"grid grid-cols-2 gap-6 mt-4"},at={key:0,class:"p-error"},it={key:1,class:"p-error"},rt={class:"flex justify-between items-center w-full px-8 py-5 bg-slate-50 border-t border-slate-100"},nt={class:"flex flex-col gap-4"},ct=l("p",{class:"text-slate-600"},[P(" Sélectionnez un fichier CSV ou Excel. Assurez-vous que le fichier contient les colonnes : "),l("code",{class:"bg-slate-100 text-slate-800 p-1 rounded"},"name"),P(", "),l("code",{class:"bg-slate-100 text-slate-800 p-1 rounded"},"email"),P(", "),l("code",{class:"bg-slate-100 text-slate-800 p-1 rounded"},"fonction"),P(", "),l("code",{class:"bg-slate-100 text-slate-800 p-1 rounded"},"region"),P(". ")],-1),dt=l("p",null,"Glissez-déposez un fichier ici pour le téléverser.",-1),Lt={__name:"Technicians",props:{technicians:Object,regions:Array,filters:Object,queryParams:Object,import_errors:Array},setup(C){var G,J,K,Z;const{t:r}=be(),g=ge(),U=_e(),_=C,T=h([]),R=h(null),$=h(!1),y=h(!1),E=h(!1);h(),h(["name","fonction","region","numero"]);const f=h({global:{value:((J=(G=_.filters)==null?void 0:G.global)==null?void 0:J.value)||null,matchMode:S.CONTAINS},name:{operator:j.AND,constraints:[{value:null,matchMode:S.STARTS_WITH}]},fonction:{value:null,matchMode:S.IN},"region.designation":{value:null,matchMode:S.IN},email:{operator:j.AND,constraints:[{value:null,matchMode:S.STARTS_WITH}]},numero:{operator:j.AND,constraints:[{value:null,matchMode:S.CONTAINS}]}}),m=h({first:_.technicians.current_page?(_.technicians.current_page-1)*_.technicians.per_page:0,rows:_.technicians.per_page||10,sortField:((K=_.queryParams)==null?void 0:K.sortField)||"created_at",sortOrder:((Z=_.queryParams)==null?void 0:Z.sortOrder)==="desc"?-1:1,filters:f.value}),ae=[{label:"Directeur d’Exploitation",value:"Directeur d’Exploitation"},{label:"Directeur Technique",value:"Directeur Technique"},{label:"Responsable HSE (Hygiène Sécurité Environnement)",value:"Responsable HSE"},{label:"Superviseur de District / Zone",value:"Superviseur de District"},{label:"Coordonnateur de Projets Électrification",value:"Coordonnateur Projets"},{label:"Chef de Département Réseau",value:"Chef Réseau"},{label:"Responsable Administratif et Financier",value:"RAF"},{label:"Chef de Centrale Hydroélectrique",value:"Chef de Centrale"},{label:"Opérateur de Salle de Commande",value:"Opérateur Salle Commande"},{label:"Technicien de Maintenance Turbine",value:"Technicien Turbine"},{label:"Électricien de Centrale",value:"Électricien Centrale"},{label:"Mécanicien de Maintenance Hydraulique",value:"Mécanicien Hydraulique"},{label:"Barragiste / Gardien de Prise d’Eau",value:"Barragiste"},{label:"Technicien Hydrologue",value:"Hydrologue"},{label:"Agent de Maintenance Vannes et Grilles",value:"Agent Vannes"},{label:"Opérateur de Dégrilleur",value:"Opérateur Dégrilleur"},{label:"Resp. Exploitation Réseau",value:"Resp. Exploitation Réseau"},{label:"Resp. Exploitation Réseau Adj.",value:"Resp. Exploitation Réseau Adj."},{label:"Superviseur sous-station",value:"Superviseur sous-station"},{label:"Superviseur Maintenance",value:"Superviseur Maintenance"},{label:"Superviseur Intervention",value:"Superviseur Intervention"},{label:"Superviseur raccordement",value:"Superviseur raccordement"},{label:"Administrateur",value:"Administrateur"},{label:"Ingénieur Poste de Transformation",value:"Ingénieur Poste"},{label:"Technicien de Maintenance Haute Tension (HT)",value:"Technicien HT"},{label:"Monteur de Lignes Haute Tension",value:"Monteur Lignes HT"},{label:"Technicien Protection et Contrôle-Commande",value:"Technicien Protection"},{label:"Topographe de Lignes",value:"Topographe"},{label:"Chef de Chantier HT",value:"Chef Chantier HT"},{label:"Monteur de Pylônes",value:"Monteur Pylônes"},{label:"Technicien Postes et Télécoms (SCADA)",value:"Technicien SCADA"},{label:"Superviseur de Distribution BT",value:"Superviseur BT"},{label:"Technicien Chef d’Équipe Réseau",value:"Chef Équipe Réseau"},{label:"Électricien de Réseau Basse Tension",value:"Électricien BT"},{label:"Technicien de Maintenance Transformateurs",value:"Technicien Transfo"},{label:"Technicien de Dépannage Urgence 24/7",value:"Technicien Dépannage"},{label:"Installateur de Kits Domestiques",value:"Installateur Kits"},{label:"Vérificateur de Conformité Électrique",value:"Vérificateur Conformité"},{label:"Chef d’Équipe Éclairage Public",value:"Chef Éclairage Public"},{label:"Technicien de Relève (Compteurs)",value:"Technicien de Relève"},{label:"Contrôleur de Raccordement Client",value:"Contrôleur Raccordement"},{label:"Technicien Poseur de Compteurs Cashpower",value:"Poseur Compteur"},{label:"Agent de Lutte contre la Fraude Électrique",value:"Agent Fraude"},{label:"Responsable d’Agence Commerciale",value:"Chef Agence"},{label:"Agent de Guichet / Facturation",value:"Agent Guichet"},{label:"Technicien Laboratoire de Compteurs",value:"Technicien Labo"},{label:"Commercial de Terrain (Prospection)",value:"Commercial Terrain"},{label:"Tâcheron - Creuseur de Tranchées",value:"Tâcheron Creuseur"},{label:"Tâcheron - Poseur de Poteaux",value:"Tâcheron Poteaux"},{label:"Tâcheron - Éclateur de Roches",value:"Tâcheron Roches"},{label:"Tâcheron - Maçon de Socles et Caniveaux",value:"Tâcheron Maçon"},{label:"Tâcheron - Élagueur (Entretien Sous Lignes)",value:"Tâcheron Élagueur"},{label:"Tâcheron - Transporteur de Matériel (Portage)",value:"Tâcheron Portage"},{label:"Tâcheron - Aide Électricien (Tirage Câbles)",value:"Tâcheron Tirage"},{label:"Technicien Journalier (Main d’œuvre)",value:"Journalier"},{label:"Chef de Brigade Tâcherons",value:"Chef Brigade"},{label:"Ferrailleur de Génie Civil",value:"Ferrailleur"},{label:"Mécanicien Engins Lourds",value:"Mécanicien Engins"},{label:"Chauffeur Poids Lourd / Grue",value:"Chauffeur Grue"},{label:"Chauffeur de Liaison 4x4",value:"Chauffeur Liaison"},{label:"Magasinier Matériel Électrique",value:"Magasinier"},{label:"Soudeur - Chaudronnier",value:"Soudeur"},{label:"Responsable de Flotte Automobile",value:"Chef Garage"},{label:"Agent de Sécurité de Site (Sentinelle)",value:"Agent Sécurité"},{label:"Commis d’Entrepôt",value:"Commis Entrepôt"},{label:"Informaticien Système & Réseau",value:"IT"},{label:"Agent de Liaison Administrative",value:"Liaison Admin"}],O=X(()=>[{field:"name",header:r("technicians.fields.name"),default:!0},{field:"fonction",header:r("technicians.fields.fonction"),default:!0},{field:"region.designation",header:r("technicians.fields.region"),default:!0},{field:"numero",header:r("technicians.fields.numero"),default:!0},{field:"email",header:r("technicians.fields.email"),default:!1},{field:"pointure",header:r("technicians.fields.pointure"),default:!1},{field:"teams",header:r("technicians.fields.teams"),default:!1},{field:"size",header:r("technicians.fields.size"),default:!1},{field:"created_at",header:r("technicians.fields.created_at"),default:!1},{field:"updated_at",header:r("technicians.fields.updated_at"),default:!1}]),ie=X(()=>{const a=_.technicians.data||[];return{total:_.technicians.total,supervisors:a.filter(s=>s.fonction==="Superviseur").length,chiefs:a.filter(s=>s.fonction==="Technicien Chef").length,daily:a.filter(s=>s.fonction==="Technicien Journalier").length}}),t=Y({id:null,name:"",email:"",password:"",password_confirmation:"",fonction:null,numero:"",region_id:null,pointure:"",size:"",profile_photo:null,profile_photo_preview:null,status:"active"});Y({file:null});const re=()=>R.value.click(),ne=a=>{const s=a.target.files[0];if(s){if(s.size>2*1024*1024){g.add({severity:"error",summary:"Erreur",detail:"Image trop lourde (Max 2MB)",life:3e3});return}t.profile_photo=s;const x=new FileReader;x.onload=o=>{t.profile_photo_preview=o.target.result},x.readAsDataURL(s)}},ce=()=>{t.profile_photo=null,t.profile_photo_preview=null,R.value&&(R.value.value=null)},de=()=>{t.reset(),t.clearErrors(),t.id=null,t.profile_photo_preview=null,y.value=!0},H=a=>{t.clearErrors(),t.id=a.id,t.name=a.name,t.email=a.email,t.fonction=a.fonction,t.numero=a.numero,t.region_id=a.region_id,t.pointure=a.pointure,t.size=a.size,t.profile_photo_preview=a.profile_photo_url,y.value=!0},N=()=>{const a=!!t.id;a?M.post(route("technicians.update",t.id),{_method:"put",...t.data()},{onSuccess:()=>{y.value=!1,g.add({severity:"success",summary:r("common.success"),detail:r("technicians.toast.updateSuccess"),life:3e3})},onError:s=>{t.errors=s,g.add({severity:"error",summary:r("toast.error"),detail:r("toast.genericError"),life:3e3})}}):t.post(route("technicians.store"),{onSuccess:()=>{y.value=!1,g.add({severity:"success",summary:r("common.success"),detail:r(a?"technicians.toast.updateSuccess":"technicians.toast.createSuccess"),life:3e3}),t.reset()},onError:s=>{t.errors=s,g.add({severity:"error",summary:r("toast.error"),detail:r("toast.genericError"),life:3e3})}})};ee(f,()=>{m.value.first=0,m.value.filters=f.value,F()},{deep:!0});const ue=a=>{U.require({message:`Voulez-vous supprimer définitivement ${a.name} ?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:()=>{M.delete(route("technicians.destroy",a.id),{onSuccess:()=>g.add({severity:"info",summary:"Supprimé",detail:"Technicien retiré",life:3e3})})}})},pe=()=>{U.require({message:`Êtes-vous sûr de vouloir supprimer les ${T.value.length} techniciens sélectionnés ?`,header:"Suppression multiple",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:()=>{const a=T.value.map(s=>s.id);M.post(route("technicians.bulkDestroy"),{ids:a},{onSuccess:()=>{g.add({severity:"success",summary:"Succès",detail:`${a.length} techniciens supprimés.`,life:3e3}),T.value=[]}})}})},B=a=>{window.location.href=route("technicians.export",{type:a,search:f.value.global.value})},I=h(O.value.filter(a=>a.default)),me=a=>{const s=a.files[0];s&&M.post(route("technicians.import"),{file:s},{onSuccess:()=>{E.value=!1,g.add({severity:"success",summary:"Succès",detail:"Importation des techniciens réussie.",life:3e3})},onError:x=>{g.add({severity:"error",summary:"Erreur",detail:x.file||"Une erreur est survenue lors de l'envoi du fichier.",life:5e3})}})},F=(a=null)=>{$.value=!0,a&&(m.value=a);const s={page:Math.floor(m.value.first/m.value.rows)+1,per_page:m.value.rows,sortField:m.value.sortField,sortOrder:m.value.sortOrder===1?"asc":"desc",search:f.value.global.value};M.get(route("technicians.index"),s,{preserveState:!0,preserveScroll:!0,onFinish:()=>{$.value=!1}})},fe=a=>{F(a)},he=a=>{F(a)};return ee(()=>f.value.global.value,a=>{m.value.first=0,F()}),(a,s)=>{const x=ve;return n(),V(Ce,{title:"Ultimate Technicians Manager"},{default:v(()=>[i(e(xe),{title:e(r)("technicians.title")},null,8,["title"]),i(e(Se)),i(e(Pe)),l("div",Ee,[l("div",Fe,[l("div",De,[ze,l("div",null,[l("h1",$e,d(e(r)("technicians.title")),1),l("p",Ie,d(e(r)("technicians.subtitle")),1)])]),l("div",Le,[D(i(e(b),{icon:"pi pi-file-excel",severity:"secondary",text:"",class:"rounded-full",onClick:s[0]||(s[0]=o=>B("excel"))},null,512),[[x,"Export Excel",void 0,{bottom:!0}]]),D(i(e(b),{icon:"pi pi-file-pdf",severity:"secondary",text:"",class:"rounded-full",onClick:s[1]||(s[1]=o=>B("pdf"))},null,512),[[x,"Export PDF",void 0,{bottom:!0}]]),D(i(e(b),{icon:"pi pi-upload",severity:"secondary",text:"",class:"rounded-full",onClick:s[2]||(s[2]=o=>E.value=!0)},null,512),[[x,"Importer",void 0,{bottom:!0}]]),je,i(e(b),{label:e(r)("technicians.actions.add"),icon:"pi pi-plus",raised:"",onClick:de,class:"rounded-lg font-bold"},null,8,["label"])])]),l("div",qe,[(n(!0),c(A,null,z(ie.value,(o,u)=>(n(),c("div",{key:u,class:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all"},[l("div",Ue,[l("span",Oe,d(e(r)(`technicians.stats.${u}`)),1),l("div",He,[l("span",Ne,d(o),1),Be])])]))),128))]),C.import_errors&&C.import_errors.length>0?(n(),c("div",Ge,[Je,l("ul",Ke,[(n(!0),c(A,null,z(C.import_errors,(o,u)=>(n(),c("li",{key:u},d(o),1))),128))])])):p("",!0),l("div",Ze,[i(e(Te),{ref:"dt",value:C.technicians.data,selection:T.value,"onUpdate:selection":s[5]||(s[5]=o=>T.value=o),filters:f.value,"onUpdate:filters":s[6]||(s[6]=o=>f.value=o),dataKey:"id",loading:$.value,paginator:!0,rows:m.value.rows,totalRecords:C.technicians.total,lazy:!0,onPage:s[7]||(s[7]=o=>fe(o)),onSort:s[8]||(s[8]=o=>he(o)),first:m.value.first,sortField:m.value.sortField,sortOrder:m.value.sortOrder,paginatorPosition:"bottom",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",rowsPerPageOptions:[5,10,20,50,100,500],currentPageReportTemplate:"({first} à {last} sur {totalRecords})",class:"p-datatable-custom shadow-md rounded-2xl overflow-hidden border border-slate-200",filterDisplay:"menu",globalFilterFields:["name","email","fonction","numero"]},{header:v(()=>[l("div",We,[i(e(Ae),{iconPosition:"left"},{default:v(()=>[i(e(Me),{class:"pi pi-search text-slate-400"}),i(e(w),{modelValue:f.value.global.value,"onUpdate:modelValue":s[3]||(s[3]=o=>f.value.global.value=o),placeholder:e(r)("technicians.toolbar.searchPlaceholder"),class:"w-full md:w-80 border-none bg-slate-50 rounded-xl"},null,8,["modelValue","placeholder"])]),_:1}),l("div",Qe,[i(e(Ve),{modelValue:I.value,"onUpdate:modelValue":s[4]||(s[4]=o=>I.value=o),options:O.value,optionLabel:"header",placeholder:e(r)("common.columns"),display:"chip",class:"w-full md:w-64 border-none bg-slate-50 rounded-xl"},null,8,["modelValue","options","placeholder"]),T.value.length?(n(),V(e(b),{key:0,label:e(r)("technicians.actions.deleteSelected"),icon:"pi pi-trash",severity:"danger",onClick:pe,class:"p-button-sm rounded-xl"},null,8,["label"])):p("",!0)])])]),default:v(()=>[i(e(q),{selectionMode:"multiple",headerStyle:"width: 3rem"}),(n(!0),c(A,null,z(I.value,o=>(n(),V(e(q),{key:o.field,field:o.field,header:o.header,sortable:"",filter:""},{body:v(({data:u,field:k})=>{var W,Q;return[k==="name"?(n(),c("div",{key:0,class:"flex items-center gap-5 group cursor-pointer",onClick:L=>H(u)},[l("div",Ye,[i(e(ke),{image:u.profile_photo_url||null,label:u.profile_photo_url?"":((W=u.name)==null?void 0:W.charAt(0))||"U",shape:"circle",size:"xlarge",class:ye(["shadow-lg",{"bg-slate-200 text-slate-700":!u.profile_photo_url}])},null,8,["image","label","class"])]),l("div",el,[l("span",ll,d(u.name),1),l("span",tl,d(u.email),1)])],8,Xe)):k==="fonction"?(n(),V(e(oe),{key:1,value:u.fonction,severity:"secondary"},{default:v(()=>[]),_:2},1032,["value"])):k==="region.designation"?(n(),c("div",sl,[ol,l("span",al,d(((Q=u.region)==null?void 0:Q.designation)??""),1)])):k==="numero"?(n(),c("span",il,d(u.numero),1)):k==="teams"?(n(),c("div",rl,[(n(!0),c(A,null,z(u.teams,L=>(n(),V(e(oe),{key:L.id,value:L.name,severity:"info"},null,8,["value"]))),128))])):(n(),c(A,{key:5},[P(d(u[k]),1)],64))]}),_:2},1032,["field","header"]))),128)),i(e(q),{header:"Actions",alignFrozen:"right",frozen:"",class:"text-right"},{body:v(({data:o})=>[l("div",nl,[i(e(b),{icon:"pi pi-pencil",text:"",rounded:"",severity:"info",onClick:u=>H(o),class:"hover:bg-blue-50"},null,8,["onClick"]),i(e(b),{icon:"pi pi-trash",text:"",rounded:"",severity:"danger",onClick:u=>ue(o),class:"hover:bg-red-50"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","selection","filters","loading","rows","totalRecords","first","sortField","sortOrder"])])]),i(e(te),{visible:y.value,"onUpdate:visible":s[20]||(s[20]=o=>y.value=o),modal:"",position:"right",header:!1,closable:!1,style:{width:"60vw"},class:"v11-dialog-ultimate",draggable:!1},{default:v(()=>[l("div",cl,[l("div",dl,[ul,l("div",null,[l("h4",pl,d(e(t).id?e(r)("technicians.editTitle"):e(r)("technicians.createTitle")),1)])]),i(e(b),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:s[9]||(s[9]=o=>y.value=!1),class:"text-white hover:bg-white/10"})]),l("form",{onSubmit:le(N,["prevent"]),class:"p-4 space-y-8"},[l("div",ml,[l("div",fl,[l("div",hl,[l("div",vl,[l("div",bl,[l("div",{class:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-transform duration-700 group-hover:scale-110",style:we({backgroundImage:e(t).profile_photo_preview?`url(${e(t).profile_photo_preview})`:"none"})},[e(t).profile_photo_preview?p("",!0):(n(),c("div",gl,[l("span",_l,d(e(t).name?e(t).name[0]:"VE"),1)]))],4),l("div",{onClick:re,class:"absolute inset-0 flex items-center justify-center bg-black/20 opacity-0 group-hover:opacity-100 transition-all duration-300 cursor-pointer backdrop-blur-[2px] z-10"},yl),e(t).profile_photo_preview?D((n(),c("button",{key:0,type:"button",onClick:le(ce,["stop"]),class:"absolute top-5 right-5 w-12 h-12 bg-white/90 text-red-500 rounded-2xl flex items-center justify-center shadow-xl hover:bg-red-500 hover:text-white hover:scale-110 transition-all z-20 border border-white/50 backdrop-blur-md"},Cl)),[[x,"Supprimer la photo",void 0,{left:!0}]]):p("",!0)]),l("input",{type:"file",ref_key:"fileInput",ref:R,class:"hidden",onChange:ne,accept:"image/*"},null,544),l("div",Tl,[l("h3",kl,d(e(t).name||"Nouveau Profil"),1),Sl])]),Pl])]),l("div",Vl,[l("div",null,[Al,l("div",Ml,[l("div",Rl,[El,i(e(w),{id:"name",modelValue:e(t).name,"onUpdate:modelValue":s[10]||(s[10]=o=>e(t).name=o),class:"",placeholder:"ex: Jean Dupont",required:""},null,8,["modelValue"]),e(t).errors.name?(n(),c("small",Fl,d(e(t).errors.name),1)):p("",!0)]),l("div",Dl,[zl,i(e(w),{id:"email",modelValue:e(t).email,"onUpdate:modelValue":s[11]||(s[11]=o=>e(t).email=o),type:"email",class:"",placeholder:"tech@entreprise.com",required:""},null,8,["modelValue"]),e(t).errors.email?(n(),c("small",$l,d(e(t).errors.email),1)):p("",!0)])])]),l("div",null,[Il,l("div",Ll,[l("div",jl,[ql,i(e(se),{modelValue:e(t).fonction,"onUpdate:modelValue":s[12]||(s[12]=o=>e(t).fonction=o),options:ae,optionLabel:"label",optionValue:"value",filter:"",showClear:"",placeholder:"Sélectionner un rôle",class:"v11-dropdown-ultimate",id:"fonction"},null,8,["modelValue"]),e(t).errors.fonction?(n(),c("small",Ul,d(e(t).errors.fonction),1)):p("",!0)]),l("div",Ol,[Hl,i(e(se),{modelValue:e(t).region_id,"onUpdate:modelValue":s[13]||(s[13]=o=>e(t).region_id=o),options:C.regions,optionLabel:"designation",optionValue:"id",placeholder:"Zone d'intervention",class:"v11-dropdown-ultimate",id:"region"},null,8,["modelValue","options"]),e(t).errors.region_id?(n(),c("small",Nl,d(e(t).errors.region_id),1)):p("",!0)])])]),l("div",null,[Bl,l("div",Gl,[l("div",Jl,[Kl,i(e(w),{id:"numero",modelValue:e(t).numero,"onUpdate:modelValue":s[14]||(s[14]=o=>e(t).numero=o),class:"!bg-white"},null,8,["modelValue"]),e(t).errors.numero?(n(),c("small",Zl,d(e(t).errors.numero),1)):p("",!0)]),l("div",Wl,[Ql,i(e(w),{id:"pointure",modelValue:e(t).pointure,"onUpdate:modelValue":s[15]||(s[15]=o=>e(t).pointure=o),class:"!bg-white"},null,8,["modelValue"]),e(t).errors.pointure?(n(),c("small",Xl,d(e(t).errors.pointure),1)):p("",!0)]),l("div",Yl,[et,i(e(w),{id:"size",modelValue:e(t).size,"onUpdate:modelValue":s[16]||(s[16]=o=>e(t).size=o),class:"!bg-white"},null,8,["modelValue"]),e(t).errors.size?(n(),c("small",lt,d(e(t).errors.size),1)):p("",!0)])])]),e(t).id?p("",!0):(n(),c("div",tt,[st,l("div",ot,[i(e(w),{modelValue:e(t).password,"onUpdate:modelValue":s[17]||(s[17]=o=>e(t).password=o),type:"password",placeholder:"Mot de passe",class:"!bg-white"},null,8,["modelValue"]),e(t).errors.password?(n(),c("small",at,d(e(t).errors.password),1)):p("",!0),i(e(w),{modelValue:e(t).password_confirmation,"onUpdate:modelValue":s[18]||(s[18]=o=>e(t).password_confirmation=o),type:"password",placeholder:"Confirmer",class:"!bg-white"},null,8,["modelValue"]),e(t).errors.password_confirmation?(n(),c("small",it,d(e(t).errors.password_confirmation),1)):p("",!0)])]))])]),l("div",rt,[i(e(b),{label:e(r)("common.cancel"),icon:"pi pi-times",text:"",severity:"secondary",onClick:s[19]||(s[19]=o=>y.value=!1),class:"font-bold uppercase text-[10px] tracking-widest"},null,8,["label"]),i(e(b),{label:e(t).id?e(r)("common.save"):e(r)("common.create"),icon:"pi pi-check-circle",class:"px-10 h-14 rounded-2xl shadow-xl shadow-primary-100 font-black uppercase tracking-widest text-xs",onClick:N,loading:e(t).processing},null,8,["label","loading"])])],32)]),_:1},8,["visible"]),i(e(te),{visible:E.value,"onUpdate:visible":s[21]||(s[21]=o=>E.value=o),modal:"",header:"Importer des Techniciens",style:{width:"450px"}},{default:v(()=>[l("div",nt,[ct,i(e(Re),{name:"file",multiple:!1,accept:".xlsx,.xls,.csv,.txt",maxFileSize:1e6,chooseLabel:"Choisir un fichier",auto:!0,customUpload:"",onUploader:me},{empty:v(()=>[dt]),_:1})])]),_:1},8,["visible"])]),_:1})}}};export{Lt as default};
