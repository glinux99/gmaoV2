import{T as Z}from"./index-CQck-czE.js";import{u as Q,a as X,b as Y,r as g,d as x,T as ee,F as k,c as A,e as L,f as d,o as u,i as a,g as e,Z as se,j as s,l as h,n as $,t as c,s as D,m as S,q as O,U as I,p as B,k as te,h as le}from"./app-BTm5MPCd.js";import{_ as ae}from"./AppLayout-PXrFRazT.js";import{s as m}from"./index-DR-PVOhd.js";import{s as C}from"./index-DGDWVGXJ.js";import{s as y,a as oe}from"./index-Dpj4P_iu.js";import{s as ie}from"./index-C9ua_LZc.js";import{s as re}from"./index-DR_P-HCg.js";import{s as ne}from"./index-CM1LmSBY.js";import{s as ce}from"./index-DWk9iUT_.js";import{s as de}from"./index-DggD9_PH.js";import{s as z}from"./index-B_B1CqLL.js";import{s as ue}from"./index-BMBaB7B1.js";import{s as pe}from"./index-nLPLVfe6.js";import{a as me,s as be}from"./index-CwE9RYdH.js";import{s as fe}from"./index-CMJxrKp_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CqRe5Bfh.js";import"./index-CZPsBpjb.js";import"./index-C3ZvT3G3.js";import"./index-DJd_Kodp.js";import"./index-U7kuayBf.js";import"./index-X3iKIzTH.js";import"./index-DOcyrvpR.js";import"./index-sPpDuk3t.js";const he={class:"min-h-screen bg-slate-50/50 p-4 lg:p-8"},xe={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8"},ve=s("div",{class:"flex items-center gap-4"},[s("div",{class:"flex h-16 w-16 items-center justify-center rounded-[2rem] bg-primary-600 shadow-xl shadow-primary-200"},[s("i",{class:"pi pi-tags text-2xl text-white"})]),s("h1",{class:"text-3xl font-black text-slate-900 tracking-tight"},[te("Configuration des "),s("span",{class:"text-primary-600"},"Labels")])],-1),ge={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},_e={class:"flex flex-column gap-2"},ye={class:"text-xs font-black text-slate-400 uppercase tracking-widest"},we={class:"flex items-center justify-between"},ke={class:"text-3xl font-black text-slate-800"},Ce={class:"w-10 h-10 rounded-2xl bg-slate-50 flex items-center justify-center"},Ve={class:"bg-white rounded-[2rem] shadow-xl border border-slate-200 overflow-hidden"},$e={class:"flex flex-col md:flex-row justify-between items-center gap-4 p-4"},Se={class:"flex gap-2"},Te={class:"flex items-center gap-3"},Ne={class:"font-black text-slate-700"},Ue={class:"flex flex-wrap gap-1"},je={key:0,class:"text-xs italic text-slate-400"},Fe={class:"flex gap-1"},qe={class:"px-8 py-5 bg-slate-900 text-white rounded-xl flex justify-between items-center relative z-50"},Ae={class:"flex items-center gap-4"},Le=s("div",{class:"w-12 h-12 bg-primary-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-primary-200"},[s("i",{class:"pi pi-tag text-xl"})],-1),De={class:"flex flex-col"},Oe={class:"text-sm font-black uppercase tracking-[0.15em] text-white leading-none"},Ie={class:"text-[9px] text-blue-300 font-bold uppercase tracking-tighter mt-1.5 opacity-80 italic"},Be={class:"p-6 bg-white max-h-[80vh] overflow-y-auto scroll-smooth"},ze={class:"grid grid-cols-1 md:grid-cols-12 gap-8"},Me={class:"md:col-span-12 space-y-8"},Re={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ee={class:"md:col-span-2 flex flex-col gap-2"},He={class:"text-xs font-black text-slate-500 uppercase tracking-widest"},We={key:0,class:"text-red-500 font-bold"},Je={class:"space-y-2"},Pe={class:"text-xs font-black text-slate-500 uppercase tracking-widest"},Ge={class:"flex items-center gap-3 p-2 bg-white rounded-xl border border-slate-200"},Ke={class:"font-mono text-xs font-bold text-slate-400"},Ze={class:"md:col-span-3 space-y-2"},Qe={class:"text-xs font-black text-slate-500 uppercase tracking-widest"},Xe={class:"space-y-6"},Ye={class:"flex items-center gap-4 bg-slate-50 p-4 rounded-2xl border border-slate-100"},es={class:"font-black text-slate-800 m-0"},ss={class:"text-xs text-slate-500 m-0"},ts={key:0,class:"space-y-4"},ls={class:"col-span-5"},as={class:"col-span-4"},os={class:"col-span-2 flex items-center justify-center gap-2"},is=["for"],rs={class:"col-span-1 flex justify-end"},ns={key:1,class:"text-center py-8 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200"},cs=s("p",{class:"text-slate-400 text-sm italic"},"Aucune caractéristique définie pour ce label.",-1),ds=[cs],us={class:"flex justify-end"},ps={class:"flex justify-between items-center w-full px-8 py-5 bg-slate-50 border-t border-slate-100"},Is={__name:"Labels",props:{labels:Object,filters:Object},setup(T){var q;const{t}=Q(),N=T,V=X(),U=Y(),j=g(),v=g(!1),w=g(!1),p=g(!1);g(((q=N.filters)==null?void 0:q.search)||"");const M=g([{label:x(()=>t("labels.types.text")),value:"text"},{label:x(()=>t("labels.types.number")),value:"number"},{label:x(()=>t("labels.types.date")),value:"date"},{label:x(()=>t("labels.types.file")),value:"file"},{label:x(()=>t("labels.types.boolean")),value:"boolean"},{label:x(()=>t("labels.types.select")),value:"select"}]),o=ee({id:null,designation:"",description:"",color:"3B82F6",characteristics:[]}),R=x(()=>{const r=N.labels.data||[];return{total:r.length,withChars:r.filter(i=>{var b;return((b=i.label_characteristics)==null?void 0:b.length)>0}).length}}),_=g({global:{value:null,matchMode:k.CONTAINS},designation:{operator:A.AND,constraints:[{value:null,matchMode:k.STARTS_WITH}]}}),E=()=>{_.value={global:{value:null,matchMode:k.CONTAINS},designation:{operator:A.AND,constraints:[{value:null,matchMode:k.STARTS_WITH}]}}},H=()=>{o.reset(),p.value=!1,w.value=!1,v.value=!0},W=r=>{o.id=r.id,o.designation=r.designation,o.description=r.description,o.color=r.color.replace("#",""),o.characteristics=r.label_characteristics?JSON.parse(JSON.stringify(r.label_characteristics)):[],p.value=!0,v.value=!0},J=()=>{if(w.value=!0,!o.designation)return;p.value&&o.isDirty?U.require({message:t("labels.messages.confirmChange"),header:t("common.confirmation"),icon:"pi pi-exclamation-triangle",acceptClass:"p-button-warning",accept:()=>F()}):F()},F=()=>{const r=p.value?route("labels.update",o.id):route("labels.store"),i=p.value?"put":"post";o.transform(b=>({...b,color:"#"+b.color,characteristics:b.characteristics.filter(l=>l.name.trim()!=="")})).submit(i,r,{onSuccess:()=>{v.value=!1,V.add({severity:"success",summary:"Succès",detail:t(`labels.messages.${p.value?"updateSuccess":"createSuccess"}`),life:3e3}),o.reset()},onError:()=>V.add({severity:"error",summary:"Erreur",detail:t("common.errorOccurred"),life:3e3})})},P=r=>{U.require({message:t("labels.messages.confirmDelete",{name:r.designation}),header:t("common.deleteConfirmation"),icon:"pi pi-exclamation-circle",acceptClass:"p-button-danger",accept:()=>{le.delete(route("labels.destroy",r.id),{onSuccess:()=>V.add({severity:"success",summary:"Supprimé",detail:t("labels.messages.deleteSuccess"),life:3e3})})}})},G=()=>{o.characteristics.push({id:null,name:"",type:"text",is_required:!1})},K=r=>{o.characteristics.splice(r,1)};return x(()=>p.value?t("labels.dialog.editTitle"):t("labels.dialog.createTitle")),(r,i)=>{const b=Z;return u(),L(ae,{title:"Gestion des Labels"},{default:d(()=>[a(e(se),{title:e(t)("labels.title")},null,8,["title"]),s("div",he,[s("div",xe,[ve,a(e(m),{label:e(t)("labels.actions.add"),icon:"pi pi-plus",raised:"",onClick:H,class:"rounded-xl px-6"},null,8,["label"])]),s("div",ge,[(u(!0),h(S,null,$(R.value,(l,n)=>(u(),h("div",{key:n,class:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all"},[s("div",_e,[s("span",ye,c(e(t)(`labels.stats.${n}`)),1),s("div",we,[s("span",ke,c(l),1),s("div",Ce,[s("i",{class:D([n==="total"?"pi pi-tags":"pi pi-sitemap","text-slate-400"])},null,2)])])])]))),128))]),s("div",Ve,[a(e(ce)),a(e(de)),a(e(oe),{ref_key:"dt",ref:j,value:T.labels.data,dataKey:"id",paginator:!0,rows:10,filters:_.value,"onUpdate:filters":i[2]||(i[2]=l=>_.value=l),filterDisplay:"menu",globalFilterFields:["designation","description"],class:"p-datatable-custom",responsiveLayout:"scroll"},{header:d(()=>[s("div",$e,[a(e(me),{iconPosition:"left"},{default:d(()=>[a(e(be),{class:"pi pi-search text-slate-400"}),a(e(C),{modelValue:_.value.global.value,"onUpdate:modelValue":i[0]||(i[0]=l=>_.value.global.value=l),placeholder:e(t)("labels.toolbar.searchPlaceholder"),class:"w-full md:w-80 rounded-2xl border-slate-200 bg-slate-50/50 focus:bg-white"},null,8,["modelValue","placeholder"])]),_:1}),s("div",Se,[O(a(e(m),{icon:"pi pi-filter-slash",outlined:"",severity:"secondary",onClick:E,class:"rounded-xl"},null,512),[[b,e(t)("labels.toolbar.resetFilters"),void 0,{bottom:!0}]]),a(e(m),{label:e(t)("common.export"),icon:"pi pi-upload",severity:"secondary",text:"",onClick:i[1]||(i[1]=l=>j.value.exportCSV())},null,8,["label"])])])]),default:d(()=>[a(e(y),{field:"designation",header:e(t)("labels.fields.name"),sortable:""},{body:d(({data:l})=>[s("div",Te,[a(e(fe),{label:l.designation[0],shape:"circle",style:I({backgroundColor:l.color+"20",color:l.color}),class:"font-bold"},null,8,["label","style"]),s("span",Ne,c(l.designation),1)])]),filter:d(({filterModel:l})=>[a(e(C),{modelValue:l.value,"onUpdate:modelValue":n=>l.value=n,type:"text",class:"p-column-filter",placeholder:e(t)("common.searchByName")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"]),a(e(y),{header:e(t)("labels.fields.style")},{body:d(({data:l})=>[a(e(z),{value:l.color,style:I({backgroundColor:l.color,color:"#fff"}),class:"rounded-lg px-3 border-none"},null,8,["value","style"])]),_:1},8,["header"]),a(e(y),{field:"description",header:e(t)("labels.fields.description"),class:"text-slate-500 text-sm"},null,8,["header"]),a(e(y),{header:e(t)("labels.fields.characteristics")},{body:d(({data:l})=>{var n;return[s("div",Ue,[(u(!0),h(S,null,$(l.label_characteristics,f=>(u(),L(e(z),{key:f.id,value:f.name,severity:"secondary",class:"bg-slate-100 text-slate-600 border-none px-2"},null,8,["value"]))),128)),(n=l.label_characteristics)!=null&&n.length?B("",!0):(u(),h("span",je,"Aucune"))])]}),_:1},8,["header"]),a(e(y),{header:e(t)("common.actions"),alignFrozen:"right",frozen:""},{body:d(({data:l})=>[s("div",Fe,[a(e(m),{icon:"pi pi-pencil",text:"",rounded:"",severity:"info",onClick:n=>W(l)},null,8,["onClick"]),a(e(m),{icon:"pi pi-trash",text:"",rounded:"",severity:"danger",onClick:n=>P(l)},null,8,["onClick"])])]),_:1},8,["header"])]),_:1},8,["value","filters"])])]),a(e(ie),{visible:v.value,"onUpdate:visible":i[8]||(i[8]=l=>v.value=l),modal:"",header:!1,closable:!1,style:{width:"90vw",maxWidth:"600px"},contentStyle:{maxHeight:"85vh",overflow:"auto"},pt:{root:{class:"rounded-[3rem] overflow-hidden border-none shadow-2xl"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:d(()=>[s("div",ps,[a(e(m),{label:e(t)("common.cancel"),icon:"pi pi-times",text:"",severity:"secondary",onClick:i[7]||(i[7]=l=>v.value=!1),class:"font-bold uppercase text-[10px] tracking-widest"},null,8,["label"]),a(e(m),{label:p.value?e(t)("common.update"):e(t)("common.save"),icon:"pi pi-check-circle",severity:"indigo",class:"px-10 h-14 rounded-2xl shadow-xl shadow-indigo-100 font-black uppercase tracking-widest text-xs",onClick:J,loading:e(o).processing},null,8,["label","loading"])])]),default:d(()=>[s("div",qe,[s("div",Ae,[Le,s("div",De,[s("h2",Oe,c(p.value?e(t)("labels.dialog.editTitle"):e(t)("labels.dialog.createTitle")),1),s("span",Ie,c(p.value?e(t)("labels.dialog.editSubtitle"):e(t)("labels.dialog.createSubtitle")),1)])]),O(a(e(m),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:i[3]||(i[3]=l=>v.value=!1),class:"text-white hover:bg-white/10"},null,512),[[b,e(t)("common.cancel"),void 0,{bottom:!0}]])]),s("div",Be,[s("div",ze,[s("div",Me,[s("div",Re,[s("div",Ee,[s("label",He,c(e(t)("labels.fields.name")),1),a(e(C),{modelValue:e(o).designation,"onUpdate:modelValue":i[4]||(i[4]=l=>e(o).designation=l),class:D(["w-full py-3.5 rounded-xl border-slate-200 shadow-inner",{"p-invalid":w.value&&!e(o).designation}])},null,8,["modelValue","class"]),w.value&&!e(o).designation?(u(),h("small",We,c(e(t)("labels.validation.nameRequired")),1)):B("",!0)]),s("div",Je,[s("label",Pe,c(e(t)("labels.fields.color")),1),s("div",Ge,[a(e(pe),{modelValue:e(o).color,"onUpdate:modelValue":i[5]||(i[5]=l=>e(o).color=l)},null,8,["modelValue"]),s("span",Ke,"#"+c(e(o).color),1)])]),s("div",Ze,[s("label",Qe,c(e(t)("labels.fields.description")),1),a(e(ne),{modelValue:e(o).description,"onUpdate:modelValue":i[6]||(i[6]=l=>e(o).description=l),rows:"2",class:"w-full rounded-xl border-slate-200"},null,8,["modelValue"])])]),s("div",Xe,[s("div",Ye,[s("div",null,[s("h4",es,c(e(t)("labels.fields.technicalAttributes")),1),s("p",ss,c(e(t)("labels.fields.technicalAttributesSubtitle")),1)])]),e(o).characteristics.length?(u(),h("div",ts,[(u(!0),h(S,null,$(e(o).characteristics,(l,n)=>(u(),h("div",{key:n,class:"grid grid-cols-12 items-center gap-3 p-4 bg-white border border-slate-100 rounded-2xl shadow-sm"},[s("div",ls,[a(e(C),{modelValue:l.name,"onUpdate:modelValue":f=>l.name=f,placeholder:e(t)("labels.fields.charName"),class:"w-full rounded-lg border-slate-200 text-sm"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),s("div",as,[a(e(re),{modelValue:l.type,"onUpdate:modelValue":f=>l.type=f,options:M.value,optionLabel:"label",optionValue:"value",class:"w-full rounded-lg border-slate-200 text-sm",disabled:l.id!==null},null,8,["modelValue","onUpdate:modelValue","options","disabled"])]),s("div",os,[a(e(ue),{modelValue:l.is_required,"onUpdate:modelValue":f=>l.is_required=f,binary:!0,inputId:`req-${n}`},null,8,["modelValue","onUpdate:modelValue","inputId"]),s("label",{for:`req-${n}`,class:"text-xs font-bold text-slate-500"},c(e(t)("labels.fields.isRequiredShort")),9,is)]),s("div",rs,[a(e(m),{icon:"pi pi-trash",severity:"danger",text:"",rounded:"",onClick:f=>K(n)},null,8,["onClick"])])]))),128))])):(u(),h("div",ns,ds))]),s("div",us,[a(e(m),{label:e(t)("labels.actions.addChar"),icon:"pi pi-plus",severity:"secondary",outlined:"",onClick:G,class:"rounded-xl"},null,8,["label"])])])])])]),_:1},8,["visible"])]),_:1})}}};export{Is as default};
