import{T as Je}from"./index-BRtQJ42O.js";import{s as Ze}from"./index-BVT6l1o2.js";import{s as Ke}from"./index-CbSmUBB4.js";import{s as Xe}from"./index-gMGiGxzt.js";import{s as Ye,a as et}from"./index-CPJnGVc0.js";import{s as tt}from"./index-5ThWo-k1.js";import{s as st}from"./index-XYa5dVaH.js";import{u as at,a as lt,b as it,r as x,F as $,c as Y,T as ne,d as g,w as Ve,e as w,f as p,g as t,h as B,o as b,i as n,Z as ot,j as e,k as N,t as f,l as O,m as Se,n as De,p as y,q as R,s as nt,v as rt,x as dt,y as ct}from"./app-tNqL7mf1.js";import{_ as ut}from"./AppLayout-C6jF_llb.js";import{s as ee}from"./index-_H4U2U1q.js";import{s as _,a as pt}from"./index-BPmrBSV6.js";import{s as h}from"./index-CASASU4u.js";import{s as V}from"./index-CiHAvnIS.js";import{s as L}from"./index-CAeMJtKO.js";import{s as mt}from"./index-B1KbBACv.js";import{_ as ft}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BbQv9taT.js";import"./index-BgQpF4oC.js";import"./index-CZa1m6mU.js";import"./index-DMRwBNCK.js";import"./DropdownLink-CSp7bdD_.js";import"./index-cPRk1myS.js";import"./index-DYwZWGlh.js";import"./index-LJs_t_xJ.js";import"./index-DkeEpoE0.js";const c=v=>(dt("data-v-114f1ecf"),v=v(),ct(),v),bt={class:"quantum-v11-container p-4 lg:p-8 bg-[#f8fafc] min-h-screen"},xt={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4"},ht={class:"flex items-center gap-4"},vt=c(()=>e("div",{class:"flex h-16 w-16 items-center justify-center rounded-[1rem] bg-primary-600 shadow-xl shadow-primary-200 text-white text-2xl"},[e("i",{class:"pi pi-cog"})],-1)),gt={class:"text-2xl font-black tracking-tighter text-slate-900 uppercase"},yt=c(()=>e("span",{class:"text-primary-600"},"GMAO",-1)),_t={class:"text-slate-500 text-xs font-medium uppercase tracking-widest"},wt={class:"flex gap-2"},qt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},kt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},Vt=c(()=>e("div",{class:"w-14 h-14 rounded-xl bg-slate-100 flex items-center justify-center"},[e("i",{class:"pi pi-box text-2xl text-slate-500"})],-1)),St={class:"text-2xl font-black text-slate-800"},Dt=c(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Total Équipements",-1)),Ct={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},Et=c(()=>e("div",{class:"w-14 h-14 rounded-xl bg-green-50 flex items-center justify-center"},[e("i",{class:"pi pi-check-circle text-2xl text-green-500"})],-1)),Ut={class:"text-2xl font-black text-slate-800"},Tt=c(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"En Service",-1)),At={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},jt=c(()=>e("div",{class:"w-14 h-14 rounded-xl bg-red-50 flex items-center justify-center"},[e("i",{class:"pi pi-exclamation-triangle text-2xl text-red-500"})],-1)),Ft={class:"text-2xl font-black text-slate-800"},Ot=c(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"En Panne",-1)),Lt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},Nt=c(()=>e("div",{class:"w-14 h-14 rounded-xl bg-sky-50 flex items-center justify-center"},[e("i",{class:"pi pi-inbox text-2xl text-sky-500"})],-1)),It={class:"text-2xl font-black text-slate-800"},$t=c(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"En Stock",-1)),Pt={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},Rt=c(()=>e("h3",{class:"font-bold"},"Erreurs lors de la dernière importation :",-1)),Mt={class:"list-disc list-inside mt-2 text-sm"},Qt={class:"card-v11 overflow-hidden border border-slate-200 rounded-2xl bg-white shadow-sm"},zt={class:"flex flex-col md:flex-row justify-between items-center gap-4 p-4"},Bt={class:"flex flex-col md:flex-row items-center gap-3 w-full md:w-auto"},Ht={class:"flex items-center gap-2"},Wt={class:"font-mono text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-md"},Gt=["onClick"],Jt={key:0},Zt={key:1},Kt={class:"flex justify-end gap-2"},Xt={class:"px-8 py-6 bg-slate-900 rounded-xl text-white flex justify-between items-center relative z-50"},Yt={class:"flex items-center gap-5"},es=c(()=>e("div",{class:"w-14 h-14 bg-primary-500 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-primary-500/20"},[e("i",{class:"pi pi-database text-2xl"})],-1)),ts={class:"text-lg font-black text-slate-100 m-0 uppercase tracking-tight"},ss=c(()=>e("p",{class:"text-xs text-slate-500 m-0 font-bold uppercase tracking-widest"},"Master Data & Cycle de Vie Technique",-1)),as={class:"p-8 bg-white"},ls={class:"grid grid-cols-1 md:grid-cols-12 gap-8"},is={class:"md:col-span-7 space-y-6"},os={class:"p-7 bg-slate-50 rounded-[1rem] border border-slate-100"},ns=c(()=>e("div",{class:"flex items-center gap-2 mb-6 italic"},[e("span",{class:"w-2 h-2 rounded-full bg-primary-500"}),e("span",{class:"text-[11px] font-black text-slate-500 uppercase"},"Identité & Origine")],-1)),rs={class:"grid grid-cols-12 gap-4"},ds={class:"col-span-12 flex flex-col gap-1.5"},cs=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase ml-1"},"Unité Parent (Hierarchie)",-1)),us={class:"col-span-4 flex flex-col gap-1.5"},ps=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase ml-1"},"Tag / Code Asset",-1)),ms={class:"col-span-8 flex flex-col gap-1.5"},fs=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase ml-1"},"Désignation complète",-1)),bs={class:"col-span-6 flex flex-col gap-1.5"},xs=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase ml-1"},"Marque (Brand)",-1)),hs={class:"col-span-6 flex flex-col gap-1.5"},vs=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase ml-1"},"Modèle",-1)),gs={class:"col-span-6 flex flex-col gap-1.5"},ys=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase ml-1"},"S/N (Serial Number)",-1)),_s={class:"col-span-6 flex flex-col gap-1.5"},ws=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase ml-1"},"Quantité en stock",-1)),qs={class:"p-7 bg-white rounded-[1rem] border border-slate-100 shadow-sm"},ks=c(()=>e("div",{class:"flex items-center gap-2 mb-6 italic"},[e("span",{class:"w-2 h-2 rounded-full bg-blue-500"}),e("span",{class:"text-[11px] font-black text-slate-500 uppercase"},"Localisation & Propriété")],-1)),Vs={class:"grid grid-cols-2 gap-5"},Ss={class:"flex flex-col gap-1.5"},Ds=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase"},"Région / Site",-1)),Cs={class:"flex flex-col gap-1.5"},Es=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase"},"Localisation précise",-1)),Us={class:"flex flex-col gap-1.5"},Ts=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase"},"Responsable (User)",-1)),As={class:"flex flex-col gap-1.5"},js=c(()=>e("label",{class:"text-[10px] font-black text-slate-400 uppercase"},"Étiquette / Label",-1)),Fs={class:"space-y-4"},Os={class:"flex items-center justify-between px-2"},Ls=c(()=>e("span",{class:"text-[11px] font-black text-slate-500 uppercase italic"},"Spécifications Techniques Additionnelles",-1)),Ns={class:"p-3 bg-slate-50 rounded-[1rem] border-2 border-dashed border-slate-200 max-h-[250px] overflow-y-auto"},Is={class:"md:col-span-5 space-y-6"},$s={class:"p-8 bg-primary-950 rounded-[1rem] text-white shadow-xl relative overflow-hidden"},Ps=c(()=>e("h4",{class:"text-[10px] font-black uppercase tracking-widest text-primary-400 mb-6 italic"},"Statut Opérationnel",-1)),Rs={class:"space-y-5"},Ms={class:"flex flex-col gap-2"},Qs=c(()=>e("label",{class:"text-[9px] font-black opacity-40 uppercase"},"État actuel",-1)),zs={class:"flex flex-col gap-2"},Bs=c(()=>e("label",{class:"text-[9px] font-black opacity-40 uppercase"},"Catégorie d'équipement",-1)),Hs={class:"p-7 bg-white rounded-[1rem] border border-slate-100 shadow-sm space-y-6"},Ws={class:"grid grid-cols-2 gap-4"},Gs={class:"flex flex-col gap-2"},Js=c(()=>e("label",{class:"text-[9px] font-black text-slate-400 uppercase"},"Prix d'Achat",-1)),Zs={class:"flex flex-col gap-2"},Ks=c(()=>e("label",{class:"text-[9px] font-black text-slate-400 uppercase"},"Puissance",-1)),Xs={class:"p-7 bg-slate-900 rounded-[1rem] text-white space-y-5 shadow-2xl"},Ys=c(()=>e("div",{class:"flex items-center gap-2 mb-2"},[e("i",{class:"pi pi-calendar text-primary-400 text-xs"}),e("span",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400"},"Chronologie")],-1)),ea={class:"flex flex-col gap-2"},ta=c(()=>e("label",{class:"text-[9px] font-black opacity-40 uppercase"},"Date d'Acquisition",-1)),sa={class:"flex flex-col gap-2"},aa=c(()=>e("label",{class:"text-[9px] font-black opacity-40 uppercase"},"Expiration Garantie",-1)),la={class:"flex justify-between items-center w-full px-10 py-6 bg-slate-50 border-t border-slate-100"},ia={class:"flex gap-4"},oa={class:"px-8 py-6 bg-red-600 text-white flex justify-between items-center relative z-50"},na={class:"flex items-center gap-4"},ra=c(()=>e("div",{class:"w-12 h-12 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center text-white shadow-inner"},[e("i",{class:"pi pi-exclamation-circle text-2xl animate-pulse"})],-1)),da={class:"font-black text-white m-0 uppercase tracking-tight leading-none"},ca={class:"text-[10px] text-red-100 m-0 mt-1 font-bold uppercase tracking-widest opacity-80"},ua={class:"p-8 bg-white space-y-6"},pa={class:"flex flex-col items-center text-center gap-4"},ma=c(()=>e("div",{class:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center"},[e("i",{class:"pi pi-box text-3xl text-red-400 opacity-50"})],-1)),fa={class:"space-y-2"},ba={class:"text-slate-900 font-bold text-base leading-relaxed"},xa=c(()=>e("p",{class:"text-slate-500 text-xs italic font-medium"}," L'exécution de ce mouvement pourrait entraîner un stock négatif ou une rupture de service. ",-1)),ha=c(()=>e("div",{class:"p-4 bg-amber-50 border border-amber-100 rounded-xl flex gap-3 items-start"},[e("i",{class:"pi pi-info-circle text-amber-600 mt-1"}),e("p",{class:"text-[11px] font-bold text-amber-800 leading-tight uppercase tracking-tight"}," Voulez-vous forcer cette opération ou annuler pour régulariser l'inventaire ? ")],-1)),va={class:"flex justify-between items-center w-full px-8 py-6 bg-slate-50 border-t border-slate-100"},ga={class:"px-8 py-5 bg-slate-900 text-white flex justify-between items-center relative z-50"},ya={class:"flex items-center gap-4"},_a=c(()=>e("div",{class:"w-12 h-12 bg-primary-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-primary-900/20"},[e("i",{class:"pi pi-tags text-xl"})],-1)),wa={class:"font-black text-slate-100 m-0 uppercase tracking-tight"},qa=c(()=>e("p",{class:"text-[10px] text-slate-500 m-0 font-bold uppercase tracking-widest"},"Configuration des catégories",-1)),ka={class:"p-8 bg-white space-y-6"},Va={class:"flex flex-col gap-2"},Sa={for:"equipment_type_name",class:"text-xs font-black text-slate-500 uppercase ml-1"},Da={key:0,class:"text-red-500 font-bold italic text-[10px] ml-1"},Ca={class:"flex flex-col gap-2"},Ea={for:"equipment_type_description",class:"text-xs font-black text-slate-500 uppercase ml-1"},Ua=["placeholder"],Ta={class:"flex justify-between items-center w-full px-8 py-5 bg-slate-50 border-t border-slate-100"},Aa={class:"p-fluid"},ja=c(()=>e("p",{class:"mb-4 text-sm text-slate-600"},[N(" Importez des équipements via un fichier CSV ou Excel. Assurez-vous que votre fichier respecte la structure suivante : "),e("br"),e("code",{class:"bg-slate-100 p-1 rounded text-xs"},"Tag, Désignation, Type, Région, Statut")],-1)),Fa=c(()=>e("p",null,"Glissez-déposez un fichier ici pour le téléverser.",-1)),Oa={__name:"Equipments",props:{equipments:Object,filters:Object,equipmentTypes:Array,regions:Array,users:Array,parentEquipments:Array,labels:Array,queryParams:Object,import_errors:Array},setup(v,{expose:Ce}){var ye,_e,we,qe;const q=v,{t:i}=at(),S=lt(),re=it(),P=x(!1),de=x(!1),H=x(!1),ce=x(1),F=x(!1),A=x(!1),M=x(!1),W=x(((ye=q.filters)==null?void 0:ye.region_id)||null),G=x(!1),Ee=x(((_e=q.filters)==null?void 0:_e.search)||""),te=x(!1),D=x({global:{value:null,matchMode:$.CONTAINS},tag:{operator:Y.AND,constraints:[{value:null,matchMode:$.STARTS_WITH}]},designation:{operator:Y.AND,constraints:[{value:null,matchMode:$.STARTS_WITH}]},"equipment_type.name":{operator:Y.AND,constraints:[{value:null,matchMode:$.STARTS_WITH}]},"region.designation":{operator:Y.AND,constraints:[{value:null,matchMode:$.STARTS_WITH}]},status:{value:null,matchMode:$.EQUALS},region_id:{value:null,matchMode:$.EQUALS}}),T=x({first:q.equipments.from-1,rows:q.equipments.per_page||10,sortField:((we=q.queryParams)==null?void 0:we.sortField)||"created_at",sortOrder:((qe=q.queryParams)==null?void 0:qe.sortOrder)==="desc"?-1:1,filters:D.value}),Ue=()=>{D.value.global.value=null,D.value.tag.constraints[0].value=null,D.value.designation.constraints[0].value=null,D.value["equipment_type.name"].constraints[0].value=null,D.value["region.designation"].constraints[0].value=null,D.value.status.value=null,W.value=null,ie()},l=ne({id:null,tag:"",designation:"",brand:"",model:"",serial_number:"",puissance:null,price:null,status:"en stock",location:"",quantity:null,purchase_date:null,warranty_end_date:null,equipment_type_id:null,region_id:null,parent_id:null,label_id:null,characteristics:[]}),C=ne({id:null,name:"",description:""}),Te=ne({file:null}),E=x([]),Ae=x();x([{field:"tag",header:g(()=>i("equipments.table.tag"))},{field:"designation",header:"Désignation"},{field:"equipment_type.name",header:"Type"},{field:"brand",header:"Marque"},{field:"model",header:"Modèle"},{field:"serial_number",header:"N° de série"},{field:"region.designation",header:"Région"},{field:"location",header:"Localisation"},{field:"status",header:"Statut"},{field:"quantity",header:"Quantité"},{field:"price",header:"Prix"},{field:"purchase_date",header:"Date d'achat"},{field:"warranty_end_date",header:"Fin de garantie"},{field:"user.name",header:"Responsable"}]);const k=x(["tag","designation","equipment_type.name","region.designation","status","quantity"]),se=g(()=>[{label:i("equipments.statusOptions.in_service"),value:"en service"},{label:i("equipments.statusOptions.down"),value:"en panne"},{label:i("equipments.statusOptions.in_maintenance"),value:"en maintenance"},{label:i("equipments.statusOptions.out_of_service"),value:"hors service"},{label:i("equipments.statusOptions.in_stock"),value:"en stock"}]),je=g(()=>!!l.parent_id),Fe=g(()=>l.status==="en stock"),Oe=g(()=>["en service","en maintenance"].includes(l.status)),Le=x([{label:g(()=>i("equipments.characteristicTypes.text")),value:"text"},{label:g(()=>i("equipments.characteristicTypes.number")),value:"number"},{label:g(()=>i("equipments.characteristicTypes.date")),value:"date"},{label:g(()=>i("equipments.characteristicTypes.file")),value:"file"},{label:g(()=>i("equipments.characteristicTypes.boolean")),value:"boolean"}]),Ne=g(()=>{var o;return((o=q.parentEquipments.find(a=>a.id===l.parent_id))==null?void 0:o.status)==="en stock"});Ve(()=>l.parent_id,o=>{const a=[{name:"risk_vibration",type:"number",value:0},{name:"risk_chaleur",type:"number",value:0},{name:"risk_cycle",type:"number",value:0},{name:"risk_bruit",type:"number",value:0},{name:"risk_electrique",type:"number",value:0},{name:"",type:"text",value:null}];if(o){const d=q.parentEquipments.find(r=>r.id===o);if(d){let r=d.characteristics||[];if(typeof r=="string")try{r=JSON.parse(r)}catch(U){console.error("Erreur d'analyse des caractéristiques parent JSON:",U),r=[]}const u=Array.isArray(r)?r.map(U=>[U.name,U.value,U.type]):Object.entries(r).map(([U,j])=>[U,j]);l.characteristics=u.map(([U,j,Q])=>({name:U,value:j,type:Q||(typeof j=="number"?"number":typeof j=="boolean"?"boolean":j&&new Date(j).toString()!=="Invalid Date"?"date":"text")})),l.characteristics.length===0&&(l.characteristics=a)}else A.value||(l.reset("designation","brand","model","equipment_type_id","characteristics"),l.characteristics=a)}else A.value||(l.reset("designation","brand","model","equipment_type_id","characteristics"),l.characteristics=a)},{immediate:!1}),Ve(()=>l.label_id,o=>{if(o){const a=q.labels.find(d=>d.id===o);a&&a.label_characteristics&&a.label_characteristics.forEach(d=>{l.characteristics.some(u=>u.name===d.name)||l.characteristics.push({name:d.name,type:d.type||"text",value:null})})}},{immediate:!1});const ue=()=>{l.reset(),l.characteristics=[{name:"risk_vibration",type:"number",value:0},{name:"risk_chaleur",type:"number",value:0},{name:"risk_cycle",type:"number",value:0},{name:"risk_bruit",type:"number",value:0},{name:"risk_electrique",type:"number",value:0}],A.value=!1,ce.value=1,H.value=!1,P.value=!0},J=()=>{P.value=!1,H.value=!1},ae=o=>{l.id=o.id,l.tag=o.tag,l.designation=o.designation,l.brand=o.brand,l.model=o.model,l.puissance=o.puissance,l.serial_number=o.serial_number,l.status=o.status,l.location=o.location,l.purchase_date=o.purchase_date?new Date(o.purchase_date):null,l.quantity=o.quantity,l.warranty_end_date=o.warranty_end_date?new Date(o.warranty_end_date):null,l.equipment_type_id=o.equipment_type_id,l.region_id=o.region_id,l.parent_id=o.parent_id,l.label_id=o.label_id;let a=[];if(o.characteristics)if(typeof o.characteristics=="string")try{const d=JSON.parse(o.characteristics);Array.isArray(d)?a=d:a=Object.entries(d).map(([r,u])=>({name:r,type:typeof u=="number"?"number":typeof u=="boolean"?"boolean":u&&new Date(u).toString()!=="Invalid Date"?"date":"text",value:u}))}catch(d){console.error("Erreur d'analyse des caractéristiques JSON:",d),a=[]}else typeof o.characteristics=="object"&&o.characteristics!==null&&(Array.isArray(o.characteristics)?a=o.characteristics:a=Object.entries(o.characteristics).map(([d,r])=>({name:d,type:typeof r=="number"?"number":typeof r=="boolean"?"boolean":r&&new Date(r).toString()!=="Invalid Date"?"date":"text",value:r})));l.characteristics=a.map(d=>{let r=d.value;return d.type==="date"&&r&&typeof r=="string"&&(r=new Date(r)),{name:d.name,type:d.type||"text",value:r}}),l.characteristics.length===0&&l.characteristics.push({name:"",type:"text",value:null}),ce.value=1,A.value=!0,P.value=!0},Z=()=>{if(H.value=!0,l.parent_id&&!l.quantity){l.setError("quantity",i("equipments.validation.quantityRequiredForChild"));return}l.clearErrors();const o=A.value?route("equipments.update",l.id):route("equipments.store");A.value,console.log(l),l.transform(a=>{const d=new FormData;A.value&&d.append("_method","PUT");for(const r in a){if(r==="id"||r==="characteristics")continue;const u=a[r];u!=null&&(u instanceof Date?d.append(r,u.toISOString().split("T")[0]):r!=="id"&&d.append(r,u))}return a.characteristics.forEach((r,u)=>{d.append(`characteristics[${u}][name]`,r.name||""),d.append(`characteristics[${u}][type]`,r.type||"text"),r.type==="file"&&r.value instanceof File?d.append(`characteristics[${u}][value]`,r.value):r.value!==null&&r.value!==void 0&&d.append(`characteristics[${u}][value]`,r.value)}),d}).submit("post",o,{onSuccess:()=>{J(),S.add({severity:"success",summary:i("equipments.toast.success"),detail:A.value?i("equipments.toast.updateSuccess"):i("equipments.toast.createSuccess"),life:3e3})},onError:a=>{if(console.error("Erreur lors de la sauvegarde de l'équipement",a),a.quantity&&a.quantity.includes("La quantité du parent est insuffisante ou le parent n'est pas en stock."))F.value=!0;else{F.value=!0;const d=Object.values(a).flat().join(" ; ");S.add({severity:"error",summary:i("equipments.toast.saveError"),detail:d||i("equipments.toast.error"),life:5e3})}},forceFormData:!0})},pe=o=>{re.require({message:i("equipments.confirm.deleteMessage",{name:o.tag||o.designation}),header:i("equipments.confirm.deleteHeader"),icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:i("equipments.confirm.cancel"),acceptLabel:i("equipments.confirm.delete"),acceptClass:"p-button-danger",accept:()=>{B.delete(route("equipments.destroy",o.id),{onSuccess:()=>{S.add({severity:"success",summary:i("equipments.toast.success"),detail:i("equipments.toast.deleteSuccess"),life:3e3})},onError:()=>{S.add({severity:"error",summary:i("equipments.toast.error"),detail:i("equipments.toast.deleteError"),life:3e3})}})}})},Ie=()=>{C.reset(),M.value=!0},K=()=>{M.value=!1,C.reset()},$e=()=>{re.require({message:i("equipments.confirm.bulkDeleteMessage"),header:i("equipments.confirm.deleteHeader"),icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:i("equipments.confirm.cancel"),acceptLabel:i("equipments.confirm.delete"),acceptClass:"p-button-danger",accept:()=>{me()}})},me=()=>{console.log(E),B.post(route("equipments.bulkdestroy"),{ids:E.value.map(o=>o.id),onSuccess:()=>{S.add({severity:"success",summary:i("equipments.toast.success"),detail:i("equipments.toast.bulkDeleteSuccess"),life:3e3}),E.value=null,de.value=!1},onError:o=>{S.add({severity:"error",summary:i("equipments.toast.error"),detail:i("equipments.toast.bulkDeleteError"),life:3e3})}})},Pe=()=>{de.value=!1},fe=()=>{C.post(route("equipment-types.store"),{onSuccess:()=>{K(),S.add({severity:"success",summary:i("equipments.toast.success"),detail:i("equipments.toast.typeCreateSuccess"),life:3e3})},onError:o=>{console.error("Erreur lors de la sauvegarde du type d'équipement",o);const a=Object.values(o).flat().join(" ; ");S.add({severity:"error",summary:i("equipments.toast.error"),detail:a||i("equipments.toast.typeSaveError"),life:3e3})}})},be=()=>{l.characteristics.push({name:"",type:"text",value:null})},xe=o=>{l.characteristics.splice(o,1)},Re=(o,a,d)=>{B.put(route("equipments.update-quantity",o),{quantity:a},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{S.add({severity:"success",summary:i("common.success"),detail:i("equipments.toast.parentQuantityUpdated"),life:3e3}),d&&d()},onError:r=>{console.error("Erreurs validation:",r),S.add({severity:"error",summary:i("common.error"),detail:i("equipments.toast.parentQuantityUpdateError"),life:3e3})}})},Me=()=>{const o=q.parentEquipments.find(a=>a.id===l.parent_id);if(o){parseFloat(o.quantity);const d=parseFloat(l.quantity)||0;Re(l.parent_id,d,()=>{F.value=!1,Z()})}else F.value=!1,Z()},he=()=>{te.value=!0;const o={...T.value,page:T.value.first/T.value.rows+1,per_page:T.value.rows,sortOrder:T.value.sortOrder===1?"asc":"desc",search:D.value.global.value,region_id:W.value};B.get(route("equipments.index"),o,{preserveState:!0,onFinish:()=>{te.value=!1}})},le=o=>{T.value=o,he()},ie=()=>{he()},oe=x(),ve=()=>{oe.value.exportCSV()},ge=o=>{switch(o){case"en service":return"success";case"en panne":return"danger";case"en maintenance":return"warning";case"hors service":return"secondary";case"en stock":return"info";default:return null}},Qe=g(()=>A.value?i("equipments.dialog.editTitle"):i("equipments.dialog.createTitle")),ze=g(()=>!E.value||E.value.length<2),Be=g(()=>E.value&&E.value.length>=2),He=g(()=>E.value&&E.value.length>0?i("equipments.deleteSelected",{count:E.value.length}):i("equipments.deleteSelectedSingle")),X=g(()=>{const o=q.equipments.data.length,a=q.equipments.data.filter(u=>u.status==="en service").length,d=q.equipments.data.filter(u=>u.status==="en stock").length,r=q.equipments.data.filter(u=>u.status==="en panne").length;return{total:o,in_service:a,in_stock:d,down:r}}),We=()=>{Te.reset(),G.value=!0},Ge=o=>{const a=o.files[0];if(!a)return;const d=new FormData;d.append("file",a),B.post(route("equipments.import"),d,{onSuccess:()=>{G.value=!1,S.add({severity:"success",summary:i("common.success"),detail:i("equipments.toast.importStarted"),life:3e3})},onError:r=>{console.error("Erreur lors de l'importation des équipements",r),S.add({severity:"error",summary:"Erreur",detail:"Une erreur est survenue lors de l'envoi du fichier.",life:3e3})}})};return Ce({openNew:ue,hideDialog:J,editEquipment:ae,saveEquipment:Z,deleteEquipment:pe,openNewEquipmentType:Ie,hideEquipmentTypeDialog:K,saveEquipmentType:fe,addCharacteristic:be,removeCharacteristic:xe,performSearch:ie,exportCSV:ve,getStatusSeverity:ge,showPuissance:Oe,confirmDeleteSelected:$e,deleteSelectedEquipments:me,hideDeleteEquipmentsDialog:Pe,bulkDeleteButtonIsDisabled:ze,deleteButtonLabel:He,showBulkDeleteButton:Be,dt:oe,form:l,equipmentDialog:P,equipmentTypeDialog:M,submitted:H,editing:A,search:Ee,statusOptions:se,characteristicTypes:Le,isChild:je,isStockStatus:Fe,dialogTitle:Qe,parentIsStock:Ne,equipmentTypeForm:C}),(o,a)=>{const d=st,r=tt,u=Ye,U=et,j=Xe,Q=Ke,ke=Ze,z=Je;return b(),w(ut,{title:t(i)("equipments.title")},{default:p(()=>[n(t(ot),{title:t(i)("equipments.headTitle")},null,8,["title"]),n(d),n(r),e("div",bt,[e("div",xt,[e("div",ht,[vt,e("div",null,[e("h1",gt,[N(f(t(i)("equipments.title"))+" ",1),yt]),e("p",_t,f(t(i)("equipments.subtitle")),1)])]),e("div",wt,[n(t(h),{label:t(i)("common.import"),icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:We},null,8,["label"]),n(t(h),{label:t(i)("equipments.addNew"),icon:"pi pi-plus",class:"shadow-lg shadow-primary-200",onClick:ue},null,8,["label"])])]),e("div",qt,[e("div",kt,[Vt,e("div",null,[e("div",St,f(X.value.total),1),Dt])]),e("div",Ct,[Et,e("div",null,[e("div",Ut,f(X.value.in_service),1),Tt])]),e("div",At,[jt,e("div",null,[e("div",Ft,f(X.value.down),1),Ot])]),e("div",Lt,[Nt,e("div",null,[e("div",It,f(X.value.in_stock),1),$t])])]),v.import_errors&&v.import_errors.length>0?(b(),O("div",Pt,[Rt,e("ul",Mt,[(b(!0),O(Se,null,De(v.import_errors,(s,m)=>(b(),O("li",{key:m},f(s),1))),128))])])):y("",!0),e("div",Qt,[n(t(pt),{value:v.equipments.data,ref_key:"dt",ref:oe,dataKey:"id",selection:E.value,"onUpdate:selection":a[4]||(a[4]=s=>E.value=s),paginator:!0,rows:v.equipments.per_page,rowsPerPageOptions:[10,25,50,100],filters:D.value,"onUpdate:filters":a[5]||(a[5]=s=>D.value=s),filterDisplay:"menu",globalFilterFields:["tag","designation","equipment_type.name","region.designation","status"],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:t(i)("equipments.table.report"),lazy:!0,onPage:a[6]||(a[6]=s=>le(s)),onSort:a[7]||(a[7]=s=>le(s)),totalRecords:v.equipments.total,loading:te.value,first:T.value.first,"onUpdate:first":a[8]||(a[8]=s=>T.value.first=s),sortField:T.value.sortField,sortOrder:T.value.sortOrder,class:"p-datatable-sm quantum-table"},{header:p(()=>[e("div",zt,[e("div",Bt,[n(t(L),{modelValue:W.value,"onUpdate:modelValue":a[0]||(a[0]=s=>W.value=s),options:v.regions,optionLabel:"designation",optionValue:"id",placeholder:t(i)("equipments.filterByRegion")||"Filtrer par région",showClear:"",onChange:ie,class:"w-full md:w-64 h-11 !rounded-2xl !border-slate-200 !bg-slate-50/50 focus:!ring-2 focus:!ring-primary-500/20 focus:!bg-white transition-all duration-200"},null,8,["modelValue","options","placeholder"]),n(U,{iconPosition:"left",class:"w-full md:w-80"},{default:p(()=>[n(u,{class:"pi pi-search text-slate-400"}),n(t(V),{modelValue:D.value.global.value,"onUpdate:modelValue":a[1]||(a[1]=s=>D.value.global.value=s),onInput:a[2]||(a[2]=s=>le(T.value)),placeholder:t(i)("equipments.searchPlaceholder"),class:"w-full h-11 rounded-2xl border-slate-200 bg-slate-50/50 focus:ring-2 focus:ring-primary-500/20 focus:bg-white transition-all duration-200"},null,8,["modelValue","placeholder"])]),_:1})]),e("div",Ht,[R(n(t(h),{icon:"pi pi-filter-slash",outlined:"",severity:"secondary",onClick:Ue,class:"rounded-xl h-11"},null,512),[[z,t(i)("common.resetFilters"),void 0,{bottom:!0}]]),R(n(t(h),{icon:"pi pi-download",text:"",rounded:"",severity:"secondary",onClick:ve,class:"h-11 w-11"},null,512),[[z,t(i)("common.export"),void 0,{bottom:!0}]]),R(n(t(h),{icon:"pi pi-cog",text:"",rounded:"",severity:"secondary",onClick:a[3]||(a[3]=s=>Ae.value.toggle(s)),class:"h-11 w-11"},null,512),[[z,"Colonnes",void 0,{bottom:!0}]])])])]),default:p(()=>[n(t(_),{selectionMode:"multiple",headerStyle:"width: 3rem"}),k.value.includes("tag")?(b(),w(t(_),{key:0,field:"tag",header:t(i)("equipments.table.tag"),sortable:!0,style:{"min-width":"8rem"}},{body:p(({data:s})=>[e("span",Wt,f(s.tag),1)]),filter:p(({filterModel:s})=>[n(t(V),{modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,type:"text",class:"p-column-filter",placeholder:t(i)("equipments.table.filter.tag")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):y("",!0),k.value.includes("designation")?(b(),w(t(_),{key:1,field:"designation",header:t(i)("equipments.table.designation"),sortable:!0,style:{"min-width":"12rem"}},{body:p(({data:s})=>[e("div",{class:"font-bold text-slate-800 tracking-tight cursor-pointer",onClick:m=>ae(s)},f(s.designation),9,Gt)]),filter:p(({filterModel:s})=>[n(t(V),{modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,type:"text",class:"p-column-filter",placeholder:t(i)("equipments.table.filter.designation")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):y("",!0),k.value.includes("equipment_type.name")?(b(),w(t(_),{key:2,field:"equipment_type.name",header:t(i)("equipments.table.type"),sortable:!0,style:{"min-width":"10rem"}},{body:p(s=>{var m,I;return[s.data.parent_id&&s.data.parent?(b(),O("span",Jt,f((m=s.data.parent.equipment_type)==null?void 0:m.name),1)):(b(),O("span",Zt,f((I=s.data.equipment_type)==null?void 0:I.name),1))]}),filter:p(({filterModel:s})=>[n(t(V),{modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,type:"text",class:"p-column-filter",placeholder:t(i)("equipments.table.filter.type")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):y("",!0),k.value.includes("brand")?(b(),w(t(_),{key:3,field:"brand",header:t(i)("equipments.table.brand"),sortable:!0,style:{"min-width":"8rem"}},null,8,["header"])):y("",!0),k.value.includes("model")?(b(),w(t(_),{key:4,field:"model",header:t(i)("equipments.table.model"),sortable:!0,style:{"min-width":"8rem"}},null,8,["header"])):y("",!0),k.value.includes("serial_number")?(b(),w(t(_),{key:5,field:"serial_number",header:"N° de série",sortable:!0,style:{"min-width":"10rem"}})):y("",!0),k.value.includes("region.designation")?(b(),w(t(_),{key:6,field:"region.designation",header:t(i)("equipments.table.region"),sortable:!0,style:{"min-width":"8rem"}},{body:p(s=>{var m;return[N(f((m=s.data.region)==null?void 0:m.designation),1)]}),filter:p(({filterModel:s})=>[n(t(V),{modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,type:"text",class:"p-column-filter",placeholder:t(i)("equipments.table.filter.region")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):y("",!0),k.value.includes("location")?(b(),w(t(_),{key:7,field:"location",header:"Localisation",sortable:!0,style:{"min-width":"10rem"}})):y("",!0),k.value.includes("status")?(b(),w(t(_),{key:8,field:"status",header:t(i)("equipments.table.status"),sortable:!0,style:{"min-width":"10rem"}},{body:p(s=>[n(j,{value:t(i)(`equipments.statusOptions.${s.data.status.replace(/ /g,"_")}`,s.data.status),severity:ge(s.data.status),class:"uppercase text-[9px] px-2"},null,8,["value","severity"])]),filter:p(({filterModel:s})=>[n(t(L),{modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,options:se.value,optionLabel:"label",optionValue:"value",placeholder:t(i)("equipments.table.filter.status"),class:"p-column-filter",showClear:""},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]),_:1},8,["header"])):y("",!0),k.value.includes("quantity")?(b(),w(t(_),{key:9,field:"quantity",header:t(i)("equipments.table.quantity"),sortable:!0,style:{"min-width":"8rem"}},{body:p(s=>[N(f(s.data.quantity),1)]),_:1},8,["header"])):y("",!0),k.value.includes("price")?(b(),w(t(_),{key:10,field:"price",header:"Prix",sortable:!0,style:{"min-width":"8rem"}},{body:p(({data:s})=>[N(f(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(s.price)),1)]),_:1})):y("",!0),k.value.includes("purchase_date")?(b(),w(t(_),{key:11,field:"purchase_date",header:"Date d'achat",sortable:!0,style:{"min-width":"10rem"}},{body:p(({data:s})=>[N(f(s.purchase_date?new Date(s.purchase_date).toLocaleDateString():""),1)]),_:1})):y("",!0),k.value.includes("warranty_end_date")?(b(),w(t(_),{key:12,field:"warranty_end_date",header:"Fin de garantie",sortable:!0,style:{"min-width":"10rem"}},{body:p(({data:s})=>[N(f(s.warranty_end_date?new Date(s.warranty_end_date).toLocaleDateString():""),1)]),_:1})):y("",!0),k.value.includes("user.name")?(b(),w(t(_),{key:13,field:"user.name",header:"Responsable",sortable:!0,style:{"min-width":"10rem"}},{body:p(s=>{var m;return[N(f((m=s.data.user)==null?void 0:m.name),1)]}),_:1})):y("",!0),n(t(_),{header:"Actions",alignFrozen:"right",frozen:"",class:"pr-8"},{body:p(({data:s})=>[e("div",Kt,[R(n(t(h),{icon:"pi pi-pencil",text:"",rounded:"",onClick:m=>ae(s),class:"!text-slate-400 hover:!bg-primary-50 hover:!text-primary-600 transition-all"},null,8,["onClick"]),[[z,"Modifier",void 0,{top:!0}]]),R(n(t(h),{icon:"pi pi-trash",text:"",rounded:"",onClick:m=>pe(s),class:"!text-slate-400 hover:!bg-red-50 hover:!text-red-500 transition-all"},null,8,["onClick"]),[[z,"Supprimer",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","selection","rows","filters","currentPageReportTemplate","totalRecords","loading","first","sortField","sortOrder"])])]),n(t(ee),{visible:P.value,"onUpdate:visible":a[26]||(a[26]=s=>P.value=s),modal:"",header:!1,closable:!1,style:{width:"95vw",maxWidth:"1150px"},contentStyle:{maxHeight:"90vh",overflow:"auto"},pt:{root:{class:"rounded-[3rem] overflow-hidden border-none shadow-2xl bg-white"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:p(()=>[e("div",la,[n(t(h),{label:t(i)("common.cancel"),icon:"pi pi-times",text:"",severity:"secondary",onClick:J,class:"font-bold uppercase text-[10px] tracking-widest"},null,8,["label"]),e("div",ia,[n(t(h),{label:t(l).id?"Mettre à jour":"Enregistrer Asset",icon:"pi pi-check-circle",class:"px-12 h-14 rounded-2xl shadow-xl shadow-primary-200 font-black uppercase tracking-widest text-xs",onClick:Z,loading:t(l).processing},null,8,["label","loading"])])])]),default:p(()=>[e("div",Xt,[e("div",Yt,[es,e("div",null,[e("h4",ts,f(t(l).id?"Fiche Asset Expert":"Nouvel Enregistrement Asset"),1),ss])]),n(t(h),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:J,class:"text-white hover:bg-white/10"})]),e("div",as,[e("div",ls,[e("div",is,[e("div",os,[ns,e("div",rs,[e("div",ds,[cs,n(t(L),{modelValue:t(l).parent_id,"onUpdate:modelValue":a[9]||(a[9]=s=>t(l).parent_id=s),options:v.parentEquipments,optionLabel:"designation",optionValue:"id",filter:"",class:"w-full rounded-xl border-slate-200 font-black text-slate-400",placeholder:"Aucun parent"},null,8,["modelValue","options"])]),e("div",us,[ps,n(t(V),{modelValue:t(l).tag,"onUpdate:modelValue":a[10]||(a[10]=s=>t(l).tag=s),class:"w-full py-3 rounded-xl border-slate-200 font-mono text-primary-600 font-bold",placeholder:"TAG-000"},null,8,["modelValue"])]),e("div",ms,[fs,n(t(V),{modelValue:t(l).designation,"onUpdate:modelValue":a[11]||(a[11]=s=>t(l).designation=s),class:"w-full py-3 rounded-xl border-slate-200 font-bold",placeholder:"Nom de l'équipement"},null,8,["modelValue"])]),e("div",bs,[xs,n(t(V),{modelValue:t(l).brand,"onUpdate:modelValue":a[12]||(a[12]=s=>t(l).brand=s),class:"w-full py-3 rounded-xl border-slate-200"},null,8,["modelValue"])]),e("div",hs,[vs,n(t(V),{modelValue:t(l).model,"onUpdate:modelValue":a[13]||(a[13]=s=>t(l).model=s),class:"w-full py-3 rounded-xl border-slate-200"},null,8,["modelValue"])]),e("div",gs,[ys,n(t(V),{modelValue:t(l).serial_number,"onUpdate:modelValue":a[14]||(a[14]=s=>t(l).serial_number=s),class:"w-full py-3 rounded-xl border-slate-200 font-mono"},null,8,["modelValue"])]),e("div",_s,[ws,n(Q,{modelValue:t(l).quantity,"onUpdate:modelValue":a[15]||(a[15]=s=>t(l).quantity=s),showButtons:"",min:0,class:"w-full",inputClass:"py-3 rounded-xl border-slate-200"},null,8,["modelValue"])])])]),e("div",qs,[ks,e("div",Vs,[e("div",Ss,[Ds,n(t(L),{modelValue:t(l).region_id,"onUpdate:modelValue":a[16]||(a[16]=s=>t(l).region_id=s),options:v.regions,optionLabel:"designation",optionValue:"id",class:"rounded-xl border-slate-200"},null,8,["modelValue","options"])]),e("div",Cs,[Es,n(t(V),{modelValue:t(l).location,"onUpdate:modelValue":a[17]||(a[17]=s=>t(l).location=s),placeholder:"Ex: Hangar A / Zone 4",class:"py-3 rounded-xl border-slate-200"},null,8,["modelValue"])]),e("div",Us,[Ts,n(t(L),{modelValue:t(l).user_id,"onUpdate:modelValue":a[18]||(a[18]=s=>t(l).user_id=s),options:v.users,optionLabel:"name",optionValue:"id",filter:"",class:"rounded-xl border-slate-200"},null,8,["modelValue","options"])]),e("div",As,[js,n(t(L),{modelValue:t(l).label_id,"onUpdate:modelValue":a[19]||(a[19]=s=>t(l).label_id=s),options:v.labels,optionLabel:"name",optionValue:"id",class:"rounded-xl border-slate-200"},null,8,["modelValue","options"])])])]),e("div",Fs,[e("div",Os,[Ls,n(t(h),{icon:"pi pi-plus",label:"Ajouter",onClick:be,text:"",class:"text-[10px] font-black text-primary-600 uppercase"})]),e("div",Ns,[(b(!0),O(Se,null,De(t(l).characteristics,(s,m)=>(b(),O("div",{key:m,class:"flex gap-3 p-2 mb-2 bg-white rounded-xl items-center shadow-sm border border-slate-100"},[n(t(V),{modelValue:s.name,"onUpdate:modelValue":I=>s.name=I,placeholder:"Nom (ex: Voltage)",class:"flex-1 text-xs border-none font-bold"},null,8,["modelValue","onUpdate:modelValue"]),n(t(V),{modelValue:s.value,"onUpdate:modelValue":I=>s.value=I,placeholder:"Valeur",class:"flex-1 text-xs border-none"},null,8,["modelValue","onUpdate:modelValue"]),n(t(h),{icon:"pi pi-trash",severity:"danger",text:"",onClick:I=>xe(m),class:"p-button-sm"},null,8,["onClick"])]))),128))])])]),e("div",Is,[e("div",$s,[Ps,e("div",Rs,[e("div",Ms,[Qs,n(t(L),{modelValue:t(l).status,"onUpdate:modelValue":a[20]||(a[20]=s=>t(l).status=s),options:se.value,optionLabel:"label",optionValue:"value",class:"w-full bg-white/5 border-white/10 text-white rounded-xl"},null,8,["modelValue","options"])]),e("div",zs,[Bs,n(t(L),{modelValue:t(l).equipment_type_id,"onUpdate:modelValue":a[21]||(a[21]=s=>t(l).equipment_type_id=s),options:v.equipmentTypes,optionLabel:"name",optionValue:"id",class:"w-full bg-white/5 border-white/10 text-white rounded-xl"},null,8,["modelValue","options"])])])]),e("div",Hs,[e("div",Ws,[e("div",Gs,[Js,n(Q,{modelValue:t(l).price,"onUpdate:modelValue":a[22]||(a[22]=s=>t(l).price=s),mode:"currency",currency:"USD",class:"w-full",inputClass:"py-3 bg-slate-50 border-none rounded-xl font-bold text-slate-700"},null,8,["modelValue"])]),e("div",Zs,[Ks,n(Q,{modelValue:t(l).puissance,"onUpdate:modelValue":a[23]||(a[23]=s=>t(l).puissance=s),suffix:" kW",class:"w-full",inputClass:"py-3 bg-slate-50 border-none rounded-xl font-bold text-slate-700"},null,8,["modelValue"])])])]),e("div",Xs,[Ys,e("div",ea,[ta,n(ke,{modelValue:t(l).purchase_date,"onUpdate:modelValue":a[24]||(a[24]=s=>t(l).purchase_date=s),class:"w-full",inputClass:"bg-white/5 border-none text-white rounded-xl py-3 text-xs",showIcon:""},null,8,["modelValue"])]),e("div",sa,[aa,n(ke,{modelValue:t(l).warranty_end_date,"onUpdate:modelValue":a[25]||(a[25]=s=>t(l).warranty_end_date=s),class:"w-full",inputClass:"bg-white/5 border-none text-white rounded-xl py-3 text-xs",showIcon:""},null,8,["modelValue"])])])])])])]),_:1},8,["visible"]),n(t(ee),{visible:F.value,"onUpdate:visible":a[29]||(a[29]=s=>F.value=s),modal:"",header:!1,closable:!1,style:{width:"90vw",maxWidth:"500px"},pt:{root:{class:"rounded-[3rem] overflow-hidden border-none shadow-2xl bg-white"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:p(()=>[e("div",va,[n(t(h),{label:t(i)("equipments.insufficientQuantityDialog.cancel"),icon:"pi pi-arrow-left",text:"",severity:"secondary",onClick:a[28]||(a[28]=s=>F.value=!1),class:"font-black uppercase text-[10px] tracking-widest"},null,8,["label"]),n(t(h),{label:t(i)("equipments.insufficientQuantityDialog.performMovement"),icon:"pi pi-bolt",severity:"danger",class:"px-8 h-12 rounded-2xl shadow-xl shadow-red-100 font-black uppercase tracking-widest text-xs",onClick:Me},null,8,["label"])])]),default:p(()=>[e("div",oa,[e("div",na,[ra,e("div",null,[e("h4",da,f(t(i)("equipments.insufficientQuantityDialog.title")),1),e("p",ca,f(t(i)("equipments.insufficientQuantityDialog.subtitle")||"Alerte de Stock"),1)])]),n(t(h),{icon:"pi pi-times",variant:"text",rounded:"",onClick:a[27]||(a[27]=s=>F.value=!1),class:"text-white hover:bg-white/10"})]),e("div",ua,[e("div",pa,[ma,e("div",fa,[e("p",ba,f(t(i)("equipments.insufficientQuantityDialog.message")),1),xa])]),ha])]),_:1},8,["visible"]),n(t(ee),{visible:M.value,"onUpdate:visible":a[32]||(a[32]=s=>M.value=s),modal:"",header:!1,closable:!1,style:{width:"90vw",maxWidth:"500px"},contentStyle:{maxHeight:"80vh",overflow:"hidden"},pt:{root:{class:"rounded-[3rem] overflow-hidden border-none shadow-2xl bg-white"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:p(()=>[e("div",Ta,[n(t(h),{label:t(i)("equipments.typeDialog.cancel"),icon:"pi pi-times",text:"",severity:"secondary",onClick:K,class:"font-bold uppercase text-[10px] tracking-widest"},null,8,["label"]),n(t(h),{label:t(i)("equipments.typeDialog.create"),icon:"pi pi-check-circle",class:"px-8 h-12 rounded-2xl shadow-xl shadow-primary-100 font-black uppercase tracking-widest text-xs",onClick:fe,loading:t(C).processing},null,8,["label","loading"])])]),default:p(()=>[e("div",ga,[e("div",ya,[_a,e("div",null,[e("h4",wa,f(t(i)("equipments.typeDialog.title")),1),qa])]),n(t(h),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:K,class:"text-white hover:bg-white/10"})]),e("div",ka,[e("div",Va,[e("label",Sa,f(t(i)("equipments.typeDialog.name")),1),n(U,{iconPosition:"left"},{default:p(()=>[n(u,{class:"pi pi-tag"}),n(t(V),{id:"equipment_type_name",modelValue:t(C).name,"onUpdate:modelValue":a[30]||(a[30]=s=>t(C).name=s),modelModifiers:{trim:!0},required:"",autofocus:"",placeholder:t(i)("equipments.typeDialog.name"),class:nt(["w-full py-3.5 rounded-xl border-slate-200 focus:ring-4 focus:ring-primary-50 font-bold",{"p-invalid":t(C).errors.name}])},null,8,["modelValue","placeholder","class"])]),_:1}),t(C).errors.name?(b(),O("small",Da,f(t(C).errors.name),1)):y("",!0)]),e("div",Ca,[e("label",Ea,f(t(i)("equipments.typeDialog.description")),1),R(e("textarea",{id:"equipment_type_description","onUpdate:modelValue":a[31]||(a[31]=s=>t(C).description=s),rows:"4",class:"w-full p-4 rounded-xl border border-slate-200 bg-slate-50 focus:bg-white focus:ring-4 focus:ring-primary-50 transition-all text-sm outline-none",placeholder:t(i)("equipments.typeDialog.description")},null,8,Ua),[[rt,t(C).description,void 0,{trim:!0}]])])])]),_:1},8,["visible"]),n(t(ee),{visible:G.value,"onUpdate:visible":a[33]||(a[33]=s=>G.value=s),modal:"",header:"Importer des Équipements",style:{width:"40rem"}},{default:p(()=>[e("div",Aa,[ja,n(t(mt),{name:"file",onSelect:o.onFileSelect,multiple:!1,accept:".csv,.txt,.xls,.xlsx",maxFileSize:1e6,chooseLabel:"Choisir un fichier",auto:!0,customUpload:"",onUploader:Ge},{empty:p(()=>[Fa]),_:1},8,["onSelect"])])]),_:1},8,["visible"])]),_:1},8,["title"])}}},nl=ft(Oa,[["__scopeId","data-v-114f1ecf"]]);export{nl as default};
