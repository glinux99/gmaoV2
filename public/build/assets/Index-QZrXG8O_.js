import{_ as D}from"./AppLayout-SGD7JHFV.js";import{u as G,a as T,r as b,T as z,d as P,F as L,w as R,h as V,e as k,f as n,o as u,i as o,g as t,Z as W,j as e,t as c,l as _,n as K,p as I,m as Z,s as N,x as H,y as J}from"./app-gDNqx2_D.js";import{p as Q}from"./lodash-CROAv4tr.js";import{s as m}from"./index-BFXGy4uN.js";import{s as X}from"./index-bSGFH6Vt.js";import{s as C,a as Y}from"./index-C2t85Ev4.js";import{s as U}from"./index-DnMOyY1I.js";import{a as ee,s as te}from"./index-3Y3FmX7C.js";import{s as se}from"./index-psDJnd0s.js";import{s as ae}from"./index-5fxx7ZJm.js";import{s as le}from"./index-LIEjb82k.js";import{s as oe}from"./index-BHExvObj.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DIW2SyDI.js";import"./index-E0OnojZQ.js";import"./index-CadKbAM9.js";import"./index-C57fO0mp.js";import"./index-qcYzN5_Q.js";import"./index-qtJx-Jx6.js";import"./index-DWMCXZ5G.js";import"./index-Sf75UUsw.js";import"./index-Dqyvdu4C.js";import"./index-CaNPRaEQ.js";const r=d=>(H("data-v-5550e81a"),d=d(),J(),d),re={class:"quantum-v11-container p-4 lg:p-8 bg-[#f8fafc] min-h-screen"},ne={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4"},de={class:"flex items-center gap-4"},ce=r(()=>e("div",{class:"flex h-16 w-16 items-center justify-center rounded-[1rem] bg-primary-600 shadow-xl shadow-primary-200"},[e("i",{class:"pi pi-shield text-2xl text-white"})],-1)),pe={class:"text-2xl font-black tracking-tighter text-slate-900 uppercase"},ue=r(()=>e("p",{class:"text-slate-500 text-xs font-medium uppercase tracking-widest"},"Contrôle d'accès & Sécurité",-1)),me={class:"flex gap-2"},xe={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8"},fe={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},be=r(()=>e("div",{class:"w-14 h-14 rounded-xl bg-slate-100 flex items-center justify-center"},[e("i",{class:"pi pi-lock text-2xl text-slate-500"})],-1)),ge={class:"text-2xl font-black text-slate-800"},_e=r(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Total Permissions",-1)),ve={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},he=r(()=>e("div",{class:"w-14 h-14 rounded-xl bg-blue-50 flex items-center justify-center"},[e("i",{class:"pi pi-globe text-2xl text-blue-500"})],-1)),we={class:"text-2xl font-black text-slate-800"},ye=r(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Guard Web",-1)),ke={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},Ce=r(()=>e("div",{class:"w-14 h-14 rounded-xl bg-purple-50 flex items-center justify-center"},[e("i",{class:"pi pi-bolt text-2xl text-purple-500"})],-1)),$e={class:"text-2xl font-black text-slate-800"},Se=r(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Guard API",-1)),je={class:"card-v11 overflow-hidden border border-slate-200 rounded-2xl bg-white shadow-sm"},Pe={class:"flex flex-col md:flex-row justify-between items-center gap-4 p-4"},Ve={class:"flex items-center gap-2"},Ie={key:0,class:"font-bold text-slate-800 tracking-tight"},Ne={key:2,class:"text-slate-500 text-xs font-mono"},Ue=r(()=>e("div",{class:"font-semibold mb-3"},"Colonnes à afficher",-1)),qe={class:"px-8 py-4 bg-slate-900 rounded-xl text-white flex justify-between items-center shadow-lg relative z-50"},Ae={class:"flex items-center gap-4"},Me=r(()=>e("div",{class:"p-2 bg-primary-500/20 rounded-lg border border-primary-500/30"},[e("i",{class:"pi pi-key text-primary-400 text-xl"})],-1)),Be={class:"flex flex-col"},Ee={class:"text-sm font-black uppercase tracking-widest text-white leading-none"},Fe=r(()=>e("span",{class:"text-[9px] text-primary-300 font-bold uppercase tracking-tighter mt-1 italic"},"Security Policy Console",-1)),Oe={class:"p-6 space-y-6"},De={class:"p-4 bg-slate-50 rounded-xl border border-slate-100"},Ge=r(()=>e("label",{class:"text-[10px] font-black uppercase text-slate-400 tracking-widest block mb-3"},"Identifiant Unique",-1)),Te={key:0,class:"p-error block mt-1"},ze={class:"p-4 bg-slate-50 rounded-xl border border-slate-100"},Le=r(()=>e("label",{class:"text-[10px] font-black uppercase text-slate-400 tracking-widest block mb-3"},"Contexte (Guard)",-1)),Re={class:"flex gap-4"},We=r(()=>e("span",{class:"text-xs font-bold"},"WEB",-1)),Ke=[We],Ze=r(()=>e("span",{class:"text-xs font-bold"},"API",-1)),He=[Ze],Je={class:"flex justify-between items-center w-full px-2"},Qe={__name:"Index",props:{title:String,filters:Object,permissions:Object,roles:Object,perPage:Number},setup(d){var j;const{debounce:q}=Q,x=d;G();const A=T(),$=b(),p=b(!1),S=b([]),l=z({id:null,name:"",guard_name:"web"}),v=P(()=>({total:x.permissions.total||0,web:x.permissions.data.filter(i=>i.guard_name==="web").length,api:x.permissions.data.filter(i=>i.guard_name==="api").length})),h=[{field:"name",header:"Nom Permission",sortable:!0},{field:"guard_name",header:"Guard",sortable:!0},{field:"created_at",header:"Date Création",sortable:!0}],w=b(h.map(i=>i.field)),M=P(()=>h.filter(i=>w.value.includes(i.field))),B=()=>{l.reset(),l.clearErrors(),p.value=!0},E=i=>{l.clearErrors(),l.id=i.id,l.name=i.name,l.guard_name=i.guard_name,p.value=!0},F=()=>{const i=l.id?route("permission.update",l.id):route("permission.store");l.submit(l.id?"put":"post",i,{onSuccess:()=>{p.value=!1,A.add({severity:"success",summary:"Succès",detail:"Permission enregistrée",life:3e3})}})},f=b({global:{value:((j=x.filters)==null?void 0:j.search)||null,matchMode:L.CONTAINS}});R(()=>f.value.global.value,q(i=>{V.get(route("permission.index"),{search:i},{preserveState:!0,replace:!0})},300));const O=i=>{V.get(route("permission.index"),{page:i.page+1},{preserveState:!0})};return(i,a)=>(u(),k(D,null,{default:n(()=>[o(t(W),{title:x.title},null,8,["title"]),o(t(se)),e("div",re,[e("div",ne,[e("div",de,[ce,e("div",null,[e("h1",pe,c(x.title),1),ue])]),e("div",me,[o(t(m),{label:"Nouvelle Permission",icon:"pi pi-plus",class:"shadow-lg shadow-primary-200",onClick:B})])]),e("div",xe,[e("div",fe,[be,e("div",null,[e("div",ge,c(v.value.total),1),_e])]),e("div",ve,[he,e("div",null,[e("div",we,c(v.value.web),1),ye])]),e("div",ke,[Ce,e("div",null,[e("div",$e,c(v.value.api),1),Se])])]),e("div",je,[o(t(Y),{lazy:"",value:d.permissions.data,rows:d.permissions.per_page,totalRecords:d.permissions.total,selection:S.value,"onUpdate:selection":a[2]||(a[2]=s=>S.value=s),dataKey:"id",filters:f.value,"onUpdate:filters":a[3]||(a[3]=s=>f.value=s),onPage:O,paginator:"",class:"p-datatable-sm quantum-table"},{header:n(()=>[e("div",Pe,[o(t(ee),{iconPosition:"left"},{default:n(()=>[o(t(te),{class:"pi pi-search text-slate-400"}),o(t(U),{modelValue:f.value.global.value,"onUpdate:modelValue":a[0]||(a[0]=s=>f.value.global.value=s),placeholder:"Rechercher une règle...",class:"w-full md:w-80 rounded-2xl border-slate-200 bg-slate-50/50"},null,8,["modelValue"])]),_:1}),e("div",Ve,[o(t(m),{icon:"pi pi-download",text:"",rounded:"",severity:"secondary"}),o(t(m),{icon:"pi pi-cog",text:"",rounded:"",severity:"secondary",onClick:a[1]||(a[1]=s=>$.value.toggle(s))})])])]),default:n(()=>[o(t(C),{selectionMode:"multiple",headerStyle:"width: 3rem"}),(u(!0),_(Z,null,K(M.value,s=>(u(),k(t(C),{key:s.field,field:s.field,header:s.header,sortable:s.sortable},{body:n(({data:g,field:y})=>[y==="name"?(u(),_("span",Ie,c(g.name),1)):y==="guard_name"?(u(),k(t(oe),{key:1,value:g.guard_name,severity:"secondary",class:"text-[9px] px-2"},null,8,["value"])):y==="created_at"?(u(),_("span",Ne,c(new Date(g.created_at).toLocaleDateString()),1)):I("",!0)]),_:2},1032,["field","header","sortable"]))),128)),o(t(C),{header:"Actions",headerStyle:"width: 5rem"},{body:n(({data:s})=>[o(t(m),{icon:"pi pi-pencil",class:"p-button-rounded p-button-text p-button-secondary",onClick:g=>E(s)},null,8,["onClick"])]),_:1})]),_:1},8,["value","rows","totalRecords","selection","filters"])])]),o(t(le),{ref_key:"op",ref:$,class:"p-4"},{default:n(()=>[Ue,o(t(ae),{modelValue:w.value,"onUpdate:modelValue":a[4]||(a[4]=s=>w.value=s),options:h,optionLabel:"header",optionValue:"field",display:"chip",class:"w-full max-w-xs"},null,8,["modelValue"])]),_:1},512),o(t(X),{visible:p.value,"onUpdate:visible":a[10]||(a[10]=s=>p.value=s),modal:"",header:!1,closable:!1,class:"quantum-dialog w-full max-w-lg",pt:{mask:{style:"backdrop-filter: blur(4px)"}}},{footer:n(()=>[e("div",Je,[o(t(m),{label:"Abandonner",icon:"pi pi-times",class:"p-button-text p-button-secondary",onClick:a[9]||(a[9]=s=>p.value=!1)}),o(t(m),{label:"Appliquer",icon:"pi pi-check",class:"px-6 shadow-lg shadow-primary-100",onClick:F,loading:t(l).processing},null,8,["loading"])])]),default:n(()=>[e("div",qe,[e("div",Ae,[Me,e("div",Be,[e("h2",Ee,c(t(l).id?"Modifier Permission":"Nouvelle Permission"),1),Fe])]),o(t(m),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:a[5]||(a[5]=s=>p.value=!1),class:"text-white hover:bg-white/10"})]),e("div",Oe,[e("div",De,[Ge,o(t(U),{modelValue:t(l).name,"onUpdate:modelValue":a[6]||(a[6]=s=>t(l).name=s),class:"w-full quantum-input",placeholder:"ex: manage-users",invalid:!!t(l).errors.name},null,8,["modelValue","invalid"]),t(l).errors.name?(u(),_("small",Te,c(t(l).errors.name),1)):I("",!0)]),e("div",ze,[Le,e("div",Re,[e("div",{class:N(["flex-1 p-3 rounded-xl border-2 transition-all cursor-pointer flex items-center justify-center gap-3",t(l).guard_name==="web"?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 bg-white"]),onClick:a[7]||(a[7]=s=>t(l).guard_name="web")},Ke,2),e("div",{class:N(["flex-1 p-3 rounded-xl border-2 transition-all cursor-pointer flex items-center justify-center gap-3",t(l).guard_name==="api"?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 bg-white"]),onClick:a[8]||(a[8]=s=>t(l).guard_name="api")},He,2)])])])]),_:1},8,["visible"])]),_:1}))}},wt=ie(Qe,[["__scopeId","data-v-5550e81a"]]);export{wt as default};
