import{T as Ie}from"./index-BRtQJ42O.js";import{B as Ae,C as Re,o as m,l as v,m as B,n as Q,D as M,j as t,E as K,p as h,u as Ee,a as Le,b as Ne,r as g,d as R,T as Be,w as de,i,f as p,g as e,z as ce,F as N,c as me,Z as He,t as o,s as ue,k as pe,q,e as V,A as Ke,h as W}from"./app-tNqL7mf1.js";import{_ as qe}from"./AppLayout-C6jF_llb.js";import{u as We,s as Qe}from"./index-BEDr8c0Y.js";import{s as _}from"./index-CASASU4u.js";import{a as Ze,s as E}from"./index-CiHAvnIS.js";import{a as Pe,s as y}from"./index-BPmrBSV6.js";import{s as fe}from"./index-_H4U2U1q.js";import{s as j}from"./index-CAeMJtKO.js";import{s as ve}from"./index-BVT6l1o2.js";import{s as Ge}from"./index-XYa5dVaH.js";import{s as Je}from"./index-5ThWo-k1.js";import{a as Xe,s as Ye}from"./index-CPJnGVc0.js";import{s as U}from"./index-gMGiGxzt.js";import{s as et}from"./index-q1tfaD0y.js";import{s as tt}from"./index-Cwc5oASI.js";import{s as st}from"./index-CWrx6gPK.js";import{s as lt}from"./index-DYwZWGlh.js";import{s as nt}from"./index-BYw5n5iI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CSp7bdD_.js";import"./index-cPRk1myS.js";import"./index-BgQpF4oC.js";import"./index-CbSmUBB4.js";import"./index-CZa1m6mU.js";import"./index-BbQv9taT.js";import"./index-DMRwBNCK.js";var ot=function(l){var c=l.dt;return`
.p-timeline {
    display: flex;
    flex-grow: 1;
    flex-direction: column;
}

.p-timeline-left .p-timeline-event-opposite {
    text-align: right;
}

.p-timeline-left .p-timeline-event-content {
    text-align: left;
}

.p-timeline-right .p-timeline-event {
    flex-direction: row-reverse;
}

.p-timeline-right .p-timeline-event-opposite {
    text-align: left;
}

.p-timeline-right .p-timeline-event-content {
    text-align: right;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) {
    flex-direction: row-reverse;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite {
    text-align: right;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content {
    text-align: left;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-opposite {
    text-align: left;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-content {
    text-align: right;
}

.p-timeline-vertical .p-timeline-event-opposite,
.p-timeline-vertical .p-timeline-event-content {
    padding: `.concat(c("timeline.vertical.event.content.padding"),`;
}

.p-timeline-vertical .p-timeline-event-connector {
    width: `).concat(c("timeline.event.connector.size"),`;
}

.p-timeline-event {
    display: flex;
    position: relative;
    min-height: `).concat(c("timeline.event.min.height"),`;
}

.p-timeline-event:last-child {
    min-height: 0;
}

.p-timeline-event-opposite {
    flex: 1;
}

.p-timeline-event-content {
    flex: 1;
}

.p-timeline-event-separator {
    flex: 0;
    display: flex;
    align-items: center;
    flex-direction: column;
}

.p-timeline-event-marker {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    align-self: baseline;
    border-width: `).concat(c("timeline.event.marker.border.width"),`;
    border-style: solid;
    border-color: `).concat(c("timeline.event.marker.border.color"),`;
    border-radius: `).concat(c("timeline.event.marker.border.radius"),`;
    width: `).concat(c("timeline.event.marker.size"),`;
    height: `).concat(c("timeline.event.marker.size"),`;
    background: `).concat(c("timeline.event.marker.background"),`;
}

.p-timeline-event-marker::before {
    content: " ";
    border-radius: `).concat(c("timeline.event.marker.content.border.radius"),`;
    width: `).concat(c("timeline.event.marker.content.size"),`;
    height:`).concat(c("timeline.event.marker.content.size"),`;
    background: `).concat(c("timeline.event.marker.content.background"),`;
}

.p-timeline-event-marker::after {
    content: " ";
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: `).concat(c("timeline.event.marker.border.radius"),`;
    box-shadow: `).concat(c("timeline.event.marker.content.inset.shadow"),`;
}

.p-timeline-event-connector {
    flex-grow: 1;
    background: `).concat(c("timeline.event.connector.color"),`;
}

.p-timeline-horizontal {
    flex-direction: row;
}

.p-timeline-horizontal .p-timeline-event {
    flex-direction: column;
    flex: 1;
}

.p-timeline-horizontal .p-timeline-event:last-child {
    flex: 0;
}

.p-timeline-horizontal .p-timeline-event-separator {
    flex-direction: row;
}

.p-timeline-horizontal .p-timeline-event-connector {
    width: 100%;
    height: `).concat(c("timeline.event.connector.size"),`;
}

.p-timeline-horizontal .p-timeline-event-opposite,
.p-timeline-horizontal .p-timeline-event-content {
    padding: `).concat(c("timeline.horizontal.event.content.padding"),`;
}

.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(even) {
    flex-direction: column-reverse;
}

.p-timeline-bottom .p-timeline-event {
    flex-direction: column-reverse;
}
`)},it={root:function(l){var c=l.props;return["p-timeline p-component","p-timeline-"+c.align,"p-timeline-"+c.layout]},event:"p-timeline-event",eventOpposite:"p-timeline-event-opposite",eventSeparator:"p-timeline-event-separator",eventMarker:"p-timeline-event-marker",eventConnector:"p-timeline-event-connector",eventContent:"p-timeline-event-content"},at=Ae.extend({name:"timeline",theme:ot,classes:it}),rt={name:"BaseTimeline",extends:Ze,props:{value:null,align:{mode:String,default:"left"},layout:{mode:String,default:"vertical"},dataKey:null},style:at,provide:function(){return{$pcTimeline:this,$parentInstance:this}}},xe={name:"Timeline",extends:rt,inheritAttrs:!1,methods:{getKey:function(l,c){return this.dataKey?Re(l,this.dataKey):c},getPTOptions:function(l,c){return this.ptm(l,{context:{index:c,count:this.value.length}})}}};function dt(u,l,c,F,Z,C){return m(),v("div",M({class:u.cx("root")},u.ptmi("root")),[(m(!0),v(B,null,Q(u.value,function(b,x){return m(),v("div",M({key:C.getKey(b,x),class:u.cx("event"),ref_for:!0},C.getPTOptions("event",x)),[t("div",M({class:u.cx("eventOpposite",{index:x}),ref_for:!0},C.getPTOptions("eventOpposite",x)),[K(u.$slots,"opposite",{item:b,index:x})],16),t("div",M({class:u.cx("eventSeparator"),ref_for:!0},C.getPTOptions("eventSeparator",x)),[K(u.$slots,"marker",{item:b,index:x},function(){return[t("div",M({class:u.cx("eventMarker"),ref_for:!0},C.getPTOptions("eventMarker",x)),null,16)]}),x!==u.value.length-1?K(u.$slots,"connector",{key:0,item:b,index:x},function(){return[t("div",M({class:u.cx("eventConnector"),ref_for:!0},C.getPTOptions("eventConnector",x)),null,16)]}):h("",!0)],16),t("div",M({class:u.cx("eventContent"),ref_for:!0},C.getPTOptions("eventContent",x)),[K(u.$slots,"content",{item:b,index:x})],16)],16)}),128))],16)}xe.render=dt;const ct={class:"p-4 lg:p-10 bg-[#F8FAFC] min-h-screen"},mt={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-10"},ut={class:"flex items-center gap-4"},pt=t("div",{class:"w-14 h-14 bg-primary-600 rounded-2xl flex items-center justify-center shadow-xl shadow-primary-100 rotate-3"},[t("i",{class:"pi pi-bolt text-white text-xl"})],-1),ft=["innerHTML"],vt={class:"text-slate-500 text-xs font-medium uppercase tracking-widest"},xt={class:"flex gap-3 bg-white p-2 rounded-2xl shadow-sm border border-slate-100"},_t={key:0,class:"flex gap-2"},ht={class:"flex gap-2"},gt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},bt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},yt=t("div",{class:"w-14 h-14 rounded-xl bg-slate-100 flex items-center justify-center"},[t("i",{class:"pi pi-bolt text-2xl text-slate-500"})],-1),kt={class:"text-2xl font-black text-slate-800"},wt={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},Vt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},Ct=t("div",{class:"w-14 h-14 rounded-xl bg-green-50 flex items-center justify-center"},[t("i",{class:"pi pi-check-circle text-2xl text-green-500"})],-1),St={class:"text-2xl font-black text-slate-800"},zt={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},Tt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},Ft=t("div",{class:"w-14 h-14 rounded-xl bg-red-50 flex items-center justify-center"},[t("i",{class:"pi pi-exclamation-triangle text-2xl text-red-500"})],-1),$t={class:"text-2xl font-black text-slate-800"},jt={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},Ut={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},Dt=t("div",{class:"w-14 h-14 rounded-xl bg-sky-50 flex items-center justify-center"},[t("i",{class:"pi pi-inbox text-2xl text-sky-500"})],-1),Ot={class:"text-2xl font-black text-slate-800"},Mt={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},It={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},At={class:"lg:col-span-2"},Rt={class:"text-sm font-black text-slate-600 uppercase tracking-widest mb-4"},Et={key:0,class:"flex flex-wrap gap-4"},Lt=["onClick"],Nt=t("div",{class:"w-10 h-10 rounded-lg bg-sky-100 flex items-center justify-center"},[t("i",{class:"pi pi-map-marker text-lg text-sky-600"})],-1),Bt={class:"text-xl font-black text-slate-800"},Ht={class:"text-[10px] font-bold text-slate-500 uppercase tracking-wider"},Kt={key:1,class:"text-center py-4 bg-white rounded-xl border border-slate-200 text-slate-400 italic text-sm"},qt={key:2,class:"mt-6 p-6 bg-primary-50 border-2 border-dashed border-primary-200 rounded-2xl animate-fade-in"},Wt={class:"flex justify-between items-center mb-4"},Qt={class:"text-sm font-black text-primary-800 uppercase tracking-widest"},Zt={class:"text-primary-600"},Pt={class:"flex flex-wrap gap-3"},Gt=t("div",{class:"w-8 h-8 rounded-md bg-primary-100 flex items-center justify-center"},[t("i",{class:"pi pi-compass text-sm text-primary-700"})],-1),Jt={class:"text-lg font-black text-slate-800"},Xt={class:"text-[9px] font-bold text-primary-600/80 uppercase tracking-wider"},Yt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm"},es={class:"text-sm font-black text-slate-600 uppercase tracking-widest mb-4"},ts={class:"flex justify-center items-center h-48"},ss={class:"bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-200/60 overflow-hidden"},ls={class:"flex justify-between items-center p-4"},ns={class:"flex items-center gap-2"},os={class:"flex items-center gap-4"},is=t("div",{class:"w-12 h-12 rounded-xl flex items-center justify-center bg-slate-100"},[t("i",{class:"pi pi-bolt text-slate-500"})],-1),as={class:"flex flex-col"},rs=["onClick"],ds={class:"text-[10px] font-mono text-slate-400 tracking-tighter"},cs=["href"],ms=t("i",{class:"pi pi-user text-primary-400 text-xs group-hover:text-primary-600"},null,-1),us={class:"text-sm font-bold text-slate-600 group-hover:text-primary-600 group-hover:underline"},ps={key:1,class:"text-slate-400 text-xs italic"},fs={class:"text-xs font-medium text-slate-500"},vs={class:"text-xs font-medium text-slate-500"},xs={class:"text-xs font-medium text-slate-500"},_s=["title"],hs={class:"flex gap-2 justify-end"},gs={class:"bg-slate-50 p-6 border-t border-slate-200"},bs={class:"text-xs font-black uppercase tracking-widest text-slate-600 mb-6 flex items-center gap-3"},ys=t("i",{class:"pi pi-history text-primary-500"},null,-1),ks={key:0},ws=t("i",{class:"pi pi-arrow-right-arrow-left text-sm"},null,-1),Vs=[ws],Cs={class:"p-4 bg-white rounded-xl border border-slate-200 shadow-sm mb-4"},Ss={class:"text-xs font-bold text-slate-500 mb-2"},zs={class:"flex items-center gap-3 text-sm"},Ts=t("i",{class:"pi pi-angle-double-right text-slate-400"},null,-1),Fs={class:"text-right text-[10px] italic text-slate-400 mt-3"},$s={key:1,class:"text-center py-4 text-slate-400 italic text-sm"},js={class:"text-sm font-black text-slate-800 mb-4"},Us={class:"px-8 py-5 bg-slate-900 text-white flex justify-between items-center relative z-50 rounded-xl"},Ds={class:"flex items-center gap-4"},Os=t("div",{class:"p-2.5 bg-blue-500/20 rounded-xl border border-blue-500/30"},[t("i",{class:"pi pi-bolt text-blue-400 text-xl"})],-1),Ms={class:"flex flex-col"},Is={class:"text-sm font-black uppercase tracking-[0.15em] text-white leading-none"},As={class:"text-[9px] text-blue-300 font-bold uppercase tracking-tighter mt-1.5 opacity-80 italic"},Rs={class:"p-8 bg-white max-h-[70vh] overflow-y-auto scroll-smooth"},Es={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5 py-4"},Ls={class:"flex flex-col gap-2 md:col-span-2"},Ns={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Bs={class:"flex flex-col gap-2"},Hs={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Ks={class:"flex flex-col gap-2"},qs={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Ws={class:"flex flex-col gap-2"},Qs={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Zs={class:"flex flex-col gap-2"},Ps={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Gs={class:"flex flex-col gap-2"},Js={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Xs={key:0,class:"flex items-center gap-2 overflow-hidden"},Ys={class:"flex flex-row items-center gap-2 truncate"},el={class:"text-xs font-semibold text-slate-900 leading-none"},tl={class:"text-[10px] text-indigo-600 font-bold uppercase leading-none"},sl={key:0,class:"pi pi-exclamation-triangle text-red-500 text-[10px]"},ll={key:1,class:"text-xs text-slate-400 font-normal"},nl={class:"flex items-center justify-between w-full py-0"},ol={class:"flex flex-col py-1"},il={class:"text-xs font-bold text-slate-800 leading-tight"},al={class:"flex items-center gap-1"},rl={class:"text-[9px] text-slate-500 uppercase tracking-tighter"},dl={class:"flex gap-1"},cl={class:"py-1 px-3 border-t bg-slate-50 text-[9px] text-slate-400 italic"},ml={class:"flex flex-col gap-2"},ul={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},pl={class:"flex flex-col gap-2"},fl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},vl={class:"flex flex-col gap-2"},xl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},_l={class:"flex items-center gap-2 md:col-span-2"},hl={for:"is_additional",class:"text-sm font-bold text-slate-700"},gl={class:"flex flex-col gap-2 md:col-span-2"},bl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},yl={class:"flex justify-between items-center w-full px-8 py-5 bg-slate-50 border-t border-slate-100"},kl={class:"px-8 py-5 bg-slate-900 text-white flex justify-between items-center relative z-50 rounded-xl"},wl={class:"flex items-center gap-4"},Vl=t("div",{class:"p-2.5 bg-blue-500/20 rounded-xl border border-blue-500/30"},[t("i",{class:"pi pi-arrows-h text-blue-400 text-xl"})],-1),Cl={class:"flex flex-col"},Sl={class:"text-sm font-black uppercase tracking-[0.15em] text-white leading-none"},zl=t("span",{class:"text-[9px] text-blue-300 font-bold uppercase tracking-tighter mt-1.5 opacity-80 italic"},"Mouvement inter-régional",-1),Tl={class:"p-8 bg-white max-h-[70vh] overflow-y-auto scroll-smooth space-y-6"},Fl={class:"flex flex-col gap-2"},$l={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},jl={key:0,class:"p-error"},Ul={class:"flex flex-col gap-2"},Dl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Ol={class:"flex items-center justify-between w-full"},Ml={class:"flex flex-col"},Il={class:"font-bold text-sm"},Al={class:"flex items-center gap-2 text-xs text-slate-500"},Rl=t("i",{class:"pi pi-map-marker text-[10px]"},null,-1),El={class:"font-semibold text-slate-600"},Ll=t("i",{class:"pi pi-angle-right text-[8px] text-primary-500"},null,-1),Nl={class:"font-black text-primary-600"},Bl={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},Hl={class:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3"},Kl={class:"max-h-48 overflow-y-auto space-y-2 pr-2"},ql={class:"text-sm font-bold text-slate-700"},Wl={key:0,class:"text-center py-4 text-slate-400 italic text-xs"},Ql={class:"flex justify-between items-center w-full px-8 py-5 bg-slate-50 border-t border-slate-100"},kn={__name:"Meters",props:{meters:Object,filters:Object,connections:Array,regions:Array,zones:Array},setup(u){const{t:l}=Ee(),c=u,F=Le(),Z=Ne(),C=g(),b=g(!1);g(!1);const x=g(!1),J=g([]),P=g(!1),X=g(),_e=g([{field:"serial_number",header:l("meters.table.serial_number")},{field:"type",header:l("meters.table.type")},{field:"status",header:l("meters.table.status")},{field:"connection_full_name",header:l("meters.table.connection_full_name")},{field:"installation_date",header:l("meters.table.installation_date")},{field:"region_name",header:l("meters.table.region_name")},{field:"zone_name",header:l("meters.table.zone_name")},{field:"is_additional",header:l("meters.table.is_additional")},{field:"notes",header:l("meters.table.notes")}]),k=g(["serial_number","type","status","connection_full_name","region_name"]),D=g(),Y=()=>{D.value={global:{value:null,matchMode:N.CONTAINS},serial_number:{operator:me.AND,constraints:[{value:null,matchMode:N.STARTS_WITH}]},type:{value:null,matchMode:N.EQUALS},status:{value:null,matchMode:N.EQUALS},"connection.full_name":{operator:me.AND,constraints:[{value:null,matchMode:N.STARTS_WITH}]}}};Y();const S=g({first:c.meters.from-1,rows:c.meters.per_page,sortField:"created_at",sortOrder:-1,filters:D.value}),ee=()=>{P.value=!0;const a={...S.value,page:S.value.first/S.value.rows+1};W.get(route("meters.index"),a,{preserveState:!0,onFinish:()=>{P.value=!1}})},te=a=>{S.value=a,ee()},he=a=>{S.value.filters=D.value,ee()},O=R(()=>{const a={total:c.meters.total,active:0,in_stock:0,faulty:0};return c.meters.data.forEach(n=>{a.hasOwnProperty(n.status)&&a[n.status]++}),a}),se=R(()=>{const a={};return c.meters.data.forEach(n=>{var f;if(n.status==="in_stock"&&n.region){const s=((f=n.region)==null?void 0:f.designation)||"Non spécifiée";a[s]||(a[s]=0),a[s]++}}),Object.entries(a).map(([n,f])=>({name:n,count:f}))}),le=R(()=>{if(!T.value)return[];const a={};return c.meters.data.forEach(n=>{var s,d;const f=((s=n.region)==null?void 0:s.designation)||"Non spécifiée";if(n.status==="in_stock"&&f===T.value){const w=((d=n.zone)==null?void 0:d.nomenclature)||"Hors-zone";a[w]||(a[w]=0),a[w]++}}),Object.entries(a).map(([n,f])=>({name:n,count:f})).sort((n,f)=>n.name.localeCompare(f.name))}),ge=R(()=>{var f,s,d;const a=getComputedStyle(document.documentElement),n=(w,I)=>a.getPropertyValue(w).trim()||I;return{labels:[l("meters.stats.active"),l("meters.stats.in_stock"),l("meters.stats.faulty")],datasets:[{data:[((f=O.value)==null?void 0:f.active)||0,((s=O.value)==null?void 0:s.in_stock)||0,((d=O.value)==null?void 0:d.faulty)||0],backgroundColor:[n("--indigo-500","#6366f1"),n("--orange-500","#f59e0b"),n("--rose-500","#f43f5e")],hoverBackgroundColor:[n("--indigo-400","#818cf8"),n("--orange-400","#fbbf24"),n("--rose-400","#fb7185")]}]}}),be=g({plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,font:{weight:"bold"}}}}}),ne=g(["prepaid","postpaid"]),oe=g(["active","inactive","in_stock","faulty"]),ie=a=>({active:"success",in_stock:"info",faulty:"danger",inactive:"warning"})[a]||"secondary",r=Be({id:null,serial_number:"",model:"",manufacturer:"",type:"prepaid",status:"in_stock",installation_date:null,connection_id:null,region_id:null,zone_id:null,is_additional:!1,notes:""}),ye=()=>{r.reset(),x.value=!1,b.value=!0},ae=a=>{r.clearErrors(),Object.assign(r,{...a,installation_date:a.installation_date?new Date(a.installation_date):null,region_id:a.region_id,zone_id:a.zone_id,is_additional:a.is_additional}),x.value=!0,b.value=!0},ke=()=>{const a=x.value?route("meters.update",r.id):route("meters.store"),n=x.value?"put":"post";r.transform(f=>({...f,installation_date:f.installation_date?new Date(f.installation_date).toISOString().split("T")[0]:null})).submit(n,a,{onSuccess:()=>{b.value=!1,F.add({severity:"success",summary:"Succès",detail:`Compteur ${x.value?"mis à jour":"créé"} avec succès.`,life:3e3})},onError:f=>{const s=Object.values(f).join(", ");F.add({severity:"error",summary:"Erreur de sauvegarde",detail:s,life:5e3})}})},we=a=>{Z.require({message:l("meters.confirm.deleteMessage",{serial_number:a.serial_number}),header:l("meters.confirm.deleteHeader"),icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:()=>{W.delete(route("meters.destroy",a.id),{onSuccess:()=>F.add({severity:"success",summary:l("common.success"),detail:l("meters.toast.deleteSuccess"),life:3e3})})}})},Ve=()=>{Z.require({message:l("meters.confirm.bulkDeleteMessage",{count:z.value.length}),header:l("meters.confirm.bulkDeleteHeader"),icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",acceptLabel:l("common.delete"),rejectLabel:l("common.cancel"),accept:()=>{Ce()}})},Ce=()=>{W.post(route("meters.bulkdestroy"),{ids:z.value.map(a=>a.id)},{onSuccess:()=>{F.add({severity:"success",summary:l("common.success"),detail:l("meters.toast.bulkDeleteSuccess"),life:3e3}),z.value=[]},onError:()=>{F.add({severity:"error",summary:l("common.error"),detail:l("meters.toast.bulkDeleteError"),life:3e3})}})},Se=()=>{document.getElementById("import-file").click()},ze=a=>{const n=a.target.files[0];if(!n)return;const f=new FormData;f.append("file",n),W.post(route("meters.import"),f,{onSuccess:()=>{F.add({severity:"success",summary:l("common.success"),detail:l("meters.toast.importStarted"),life:3e3})},onError:s=>{const d=Object.values(s).join(", ");F.add({severity:"error",summary:l("meters.toast.importError"),detail:d||l("meters.toast.fileInvalid"),life:5e3})}})},z=g([]),Te=R(()=>c.meters.data),{transferDialog:L,transferForm:$,itemsToTransfer:H,transferSearchQuery:G,availableItemsForTransfer:Fe,openTransferDialog:$e,confirmTransfer:je,searchItemsForTransfer:Ue,addItemToTransfer:De,removeItemFromTransfer:Oe}=We({allItems:Te,selectedItems:z,transferRouteName:route("meters.bulk-transfer"),idKey:"meter_ids",stockStatus:["in_stock","available"],translations:{attention:l("common.attention"),selectDestinationRegion:l("myActivities.dialog.selectDestinationRegion"),success:l("common.success"),transferSuccess:a=>l("myActivities.dialog.transferSuccess",{count:a}),transferError:l("myActivities.dialog.transferError")}}),re=R(()=>r.region_id?c.zones.filter(a=>a.region_id===r.region_id):[]);de(()=>r.region_id,a=>{r.zone_id=null});const T=g(null),Me=a=>{T.value===a?T.value=null:T.value=a};return de(()=>r.connection_id,a=>{if(r.region_id=null,r.zone_id=null,r.meter_id=null,a&&!r.meter_id){const n=c.connections.find(f=>f.id===a);n&&(r.region_id=n.region_id,r.zone_id=n.zone_id,r.meter_id=n.meter_id)}}),(a,n)=>{const f=Ie;return m(),v(B,null,[i(qe,null,{default:p(()=>[i(e(He),{title:e(l)("meters.title")},null,8,["title"]),t("div",ct,[t("div",mt,[t("div",ut,[pt,t("div",null,[t("h1",{class:"text-2xl font-black tracking-tighter text-slate-900 uppercase",innerHTML:e(l)("meters.titleHtml")},null,8,ft),t("p",vt,o(e(l)("meters.subtitle")),1)])]),t("div",xt,[z.value.length>0?(m(),v("div",_t,[i(e(_),{label:e(l)("meters.actions.transfer")+` (${z.value.length})`,icon:"pi pi-arrows-h",severity:"info",onClick:e($e),class:"rounded-xl px-4"},null,8,["label","onClick"]),i(e(_),{label:e(l)("meters.actions.delete")+` (${z.value.length})`,icon:"pi pi-trash",severity:"danger",onClick:Ve,class:"rounded-xl px-4"},null,8,["label"])])):h("",!0),t("div",ht,[t("input",{type:"file",id:"import-file",class:"hidden",accept:".csv,.xlsx",onChange:ze},null,32),i(e(_),{label:e(l)("meters.actions.import"),icon:"pi pi-upload",severity:"secondary",onClick:Se,class:"rounded-xl px-4"},null,8,["label"]),i(e(_),{label:e(l)("meters.actions.add"),icon:"pi pi-plus",raised:"",onClick:ye,class:"rounded-xl px-6"},null,8,["label"])])])]),t("div",gt,[t("div",bt,[yt,t("div",null,[t("div",kt,o(O.value.total),1),t("div",wt,o(e(l)("meters.stats.total")),1)])]),t("div",Vt,[Ct,t("div",null,[t("div",St,o(O.value.active),1),t("div",zt,o(e(l)("meters.stats.active")),1)])]),t("div",Tt,[Ft,t("div",null,[t("div",$t,o(O.value.faulty),1),t("div",jt,o(e(l)("meters.stats.faulty")),1)])]),t("div",Ut,[Dt,t("div",null,[t("div",Ot,o(O.value.in_stock),1),t("div",Mt,o(e(l)("meters.stats.in_stock")),1)])])]),t("div",It,[t("div",At,[t("h3",Rt,o(e(l)("meters.stats.stock_by_region")),1),se.value.length>0?(m(),v("div",Et,[(m(!0),v(B,null,Q(se.value,s=>(m(),v("div",{key:s.name,onClick:d=>Me(s.name),class:ue(["p-4 bg-white rounded-xl border-2 shadow-sm flex items-center gap-4 cursor-pointer transition-all duration-300",T.value===s.name?"border-primary-500 ring-4 ring-primary-100":"border-slate-200 hover:border-primary-300"])},[Nt,t("div",null,[t("div",Bt,o(s.count),1),t("div",Ht,o(s.name),1)])],10,Lt))),128))])):(m(),v("div",Kt,o(e(l)("meters.messages.no_stock")),1)),T.value&&le.value.length>0?(m(),v("div",qt,[t("div",Wt,[t("h3",Qt,[pe(o(e(l)("meters.stats.stock_detail_for"))+" ",1),t("span",Zt,o(T.value),1)]),q(i(e(_),{icon:"pi pi-times",text:"",rounded:"",severity:"secondary",onClick:n[0]||(n[0]=s=>T.value=null)},null,512),[[f,e(l)("meters.actions.close_details"),void 0,{bottom:!0}]])]),t("div",Pt,[(m(!0),v(B,null,Q(le.value,s=>(m(),v("div",{key:s.name,class:"p-3 bg-white rounded-lg border border-primary-100 shadow-sm flex items-center gap-3"},[Gt,t("div",null,[t("div",Jt,o(s.count),1),t("div",Xt,o(s.name),1)])]))),128))])])):h("",!0)]),t("div",Yt,[t("h3",es,o(e(l)("meters.stats.distribution_by_status")),1),t("div",ts,[i(e(nt),{type:"doughnut",data:ge.value,options:be.value,class:"w-full md:w-48"},null,8,["data","options"])])])]),t("div",ss,[i(e(Pe),{expandedRows:J.value,"onUpdate:expandedRows":n[4]||(n[4]=s=>J.value=s),ref_key:"dt",ref:C,value:u.meters.data,selection:z.value,"onUpdate:selection":n[5]||(n[5]=s=>z.value=s),filters:D.value,"onUpdate:filters":n[6]||(n[6]=s=>D.value=s),dataKey:"id",loading:P.value,paginator:!0,rows:u.meters.per_page,totalRecords:u.meters.total,lazy:!0,onPage:n[7]||(n[7]=s=>te(s)),onFilter:n[8]||(n[8]=s=>he(s)),onSort:n[9]||(n[9]=s=>te(s)),first:S.value.first,"onUpdate:first":n[10]||(n[10]=s=>S.value.first=s),sortField:S.value.sortField,sortOrder:S.value.sortOrder,filterDisplay:"menu",globalFilterFields:["serial_number","model","manufacturer","type","status","connection.full_name"],class:"p-datatable-custom",removableSort:""},{header:p(()=>[t("div",ls,[i(e(Xe),{iconPosition:"left"},{default:p(()=>[i(e(Ye),{class:"pi pi-search text-primary-500"}),i(e(E),{modelValue:D.value.global.value,"onUpdate:modelValue":n[1]||(n[1]=s=>D.value.global.value=s),placeholder:e(l)("meters.table.search_placeholder"),class:"w-full md:w-96 rounded-2xl border-none bg-slate-100"},null,8,["modelValue","placeholder"])]),_:1}),t("div",ns,[q(i(e(_),{icon:"pi pi-filter-slash",outlined:"",severity:"secondary",onClick:Y,class:"rounded-xl"},null,512),[[f,e(l)("common.resetFilters"),void 0,{bottom:!0}]]),q(i(e(_),{icon:"pi pi-download",text:"",rounded:"",severity:"secondary",onClick:n[2]||(n[2]=s=>C.value.exportCSV())},null,512),[[f,e(l)("common.exportCSV"),void 0,{bottom:!0}]]),q(i(e(_),{icon:"pi pi-cog",text:"",rounded:"",severity:"secondary",onClick:n[3]||(n[3]=s=>X.value.toggle(s))},null,512),[[f,e(l)("common.selectColumns"),void 0,{bottom:!0}]])])])]),expansion:p(({data:s})=>[t("div",gs,[t("h4",bs,[ys,pe(" "+o(e(l)("meters.history.title")),1)]),s.transfers&&s.transfers.length>0?(m(),v("div",ks,[i(e(xe),{value:s.transfers,align:"alternate",class:"custom-timeline"},{marker:p(d=>[t("span",{class:ue(["flex w-8 h-8 items-center justify-center text-white rounded-full z-10 shadow-lg",{"bg-primary-500":d.index===0,"bg-slate-400":d.index>0}])},Vs,2)]),content:p(d=>[t("div",Cs,[t("div",Ss,o(new Date(d.item.transfer_date).toLocaleString("fr-FR")),1),t("div",zs,[i(e(U),{value:d.item.old_region.designation,class:"bg-slate-200 text-slate-700 font-bold"},null,8,["value"]),Ts,i(e(U),{value:d.item.new_region.designation,class:"bg-primary-100 text-primary-800 font-bold"},null,8,["value"])]),t("div",Fs,o(e(l)("meters.history.by_user",{user:d.item.user.name})),1)])]),_:2},1032,["value"])])):(m(),v("div",$s,o(e(l)("meters.history.none")),1))])]),default:p(()=>[i(e(y),{expander:!0,headerStyle:"width: 3rem",frozen:""}),i(e(y),{selectionMode:"multiple",headerStyle:"width: 3rem",frozen:""}),k.value.includes("serial_number")?(m(),V(e(y),{key:0,field:"serial_number",header:e(l)("meters.table.serial_number"),sortable:"",filterField:"serial_number",frozen:"",class:"min-w-[250px]"},{body:p(({data:s})=>[t("div",os,[is,t("div",as,[t("a",{href:"#",onClick:Ke(d=>ae(s),["prevent"]),class:"font-black text-slate-800 leading-none mb-1 hover:text-primary-600 hover:underline"},o(s.serial_number),9,rs),t("span",ds,o(s.manufacturer)+" - "+o(s.model),1)])])]),filter:p(({filterModel:s})=>[i(e(E),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,type:"text",class:"p-column-filter",placeholder:e(l)("meters.filter.by_serial")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):h("",!0),k.value.includes("type")?(m(),V(e(y),{key:1,field:"type",header:e(l)("meters.table.type"),sortable:"",filterField:"type"},{body:p(({data:s})=>[i(e(U),{value:s.type,class:"rounded-lg px-3 font-black text-[10px] uppercase border-none"},null,8,["value"])]),filter:p(({filterModel:s})=>[i(e(j),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,options:ne.value,placeholder:e(l)("meters.filter.by_type"),class:"w-full",showClear:""},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]),_:1},8,["header"])):h("",!0),k.value.includes("status")?(m(),V(e(y),{key:2,field:"status",header:e(l)("meters.table.status"),sortable:"",filterField:"status"},{body:p(({data:s})=>[i(e(U),{value:s.status,severity:ie(s.status),class:"rounded-lg px-3 font-black text-[10px] uppercase"},null,8,["value","severity"])]),filter:p(({filterModel:s})=>[i(e(j),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,options:oe.value,placeholder:e(l)("meters.filter.by_status"),class:"w-full",showClear:""},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]),_:1},8,["header"])):h("",!0),k.value.includes("connection_full_name")?(m(),V(e(y),{key:3,field:"connection_full_name",header:e(l)("meters.table.connection_full_name"),sortable:"",filterField:"connection.full_name"},{body:p(({data:s})=>[s.connection?(m(),v("a",{key:0,href:a.route("connections.show",s.connection.id),class:"flex items-center gap-2 group"},[ms,t("span",us,o(s.connection.first_name)+" "+o(s.connection.last_name),1)],8,cs)):(m(),v("span",ps,o(e(l)("meters.table.unassigned")),1))]),filter:p(({filterModel:s})=>[i(e(E),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,type:"text",class:"p-column-filter",placeholder:e(l)("meters.filter.by_client")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):h("",!0),k.value.includes("installation_date")?(m(),V(e(y),{key:4,field:"installation_date",header:e(l)("meters.table.installation_date"),sortable:"",filterField:"installation_date",dataType:"date"},{body:p(({data:s})=>[t("span",fs,o(s.installation_date?new Date(s.installation_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):e(l)("common.notApplicableShort")),1)]),filter:p(({filterModel:s})=>[i(e(ve),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,dateFormat:"dd/mm/yy",placeholder:e(l)("common.date_format_placeholder"),mask:"99/99/9999"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):h("",!0),k.value.includes("region_name")?(m(),V(e(y),{key:5,field:"region_name",header:e(l)("meters.table.region_name"),sortable:""},{body:p(({data:s})=>{var d;return[t("span",vs,o((d=s.region)==null?void 0:d.designation),1)]}),_:1},8,["header"])):h("",!0),k.value.includes("zone_name")?(m(),V(e(y),{key:6,field:"zone_name",header:e(l)("meters.table.zone_name"),sortable:""},{body:p(({data:s})=>{var d;return[t("span",xs,o((d=s.zone)==null?void 0:d.nomenclature),1)]}),_:1},8,["header"])):h("",!0),k.value.includes("is_additional")?(m(),V(e(y),{key:7,field:"is_additional",header:e(l)("meters.table.is_additional"),sortable:""},{body:p(({data:s})=>[i(e(U),{value:s.is_additional?e(l)("common.yes"):e(l)("common.no"),severity:s.is_additional?"success":"secondary",class:"rounded-lg px-3 font-black text-[10px] uppercase"},null,8,["value","severity"])]),_:1},8,["header"])):h("",!0),k.value.includes("notes")?(m(),V(e(y),{key:8,field:"notes",header:e(l)("meters.table.notes"),class:"min-w-[250px]"},{body:p(({data:s})=>[t("p",{class:"text-xs text-slate-500 truncate",title:s.notes},o(s.notes||e(l)("common.notApplicableShort")),9,_s)]),_:1},8,["header"])):h("",!0),i(e(y),{header:e(l)("common.actions"),alignFrozen:"right",frozen:""},{body:p(({data:s})=>[t("div",hs,[i(e(_),{icon:"pi pi-pencil",text:"",rounded:"",severity:"info",onClick:d=>ae(s)},null,8,["onClick"]),i(e(_),{icon:"pi pi-trash",text:"",rounded:"",severity:"danger",onClick:d=>we(s)},null,8,["onClick"])])]),_:1},8,["header"])]),_:1},8,["expandedRows","value","selection","filters","loading","rows","totalRecords","first","sortField","sortOrder"])]),i(e(tt),{ref_key:"op",ref:X,appendTo:"body",id:"column_op",class:"p-4"},{default:p(()=>[t("h4",js,o(e(l)("common.customize_columns")),1),i(e(st),{modelValue:k.value,"onUpdate:modelValue":n[11]||(n[11]=s=>k.value=s),options:_e.value,optionLabel:"header",optionValue:"field",placeholder:"Sélectionnez les colonnes",display:"chip",class:"w-full max-w-xs"},null,8,["modelValue","options"])]),_:1},512)]),i(e(fe),{visible:b.value,"onUpdate:visible":n[25]||(n[25]=s=>b.value=s),modal:"",header:!1,closable:!1,style:{width:"95vw",maxWidth:"650px"},pt:{root:{class:"rounded-[3rem] overflow-hidden border-none shadow-2xl"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:p(()=>[t("div",yl,[i(e(_),{label:e(l)("common.cancel"),icon:"pi pi-times",text:"",severity:"secondary",onClick:n[24]||(n[24]=s=>b.value=!1),class:"font-bold uppercase text-[10px] tracking-widest"},null,8,["label"]),i(e(_),{label:x.value?e(l)("common.update"):e(l)("common.save"),icon:"pi pi-check-circle",severity:"indigo",onClick:ke,loading:e(r).processing,class:"px-10 h-14 rounded-2xl shadow-xl shadow-indigo-100 font-black uppercase tracking-widest text-xs"},null,8,["label","loading"])])]),default:p(()=>[t("div",null,[t("div",Us,[t("div",Ds,[Os,t("div",Ms,[t("h2",Is,o(x.value?e(l)("meters.dialog.editTitle"):e(l)("meters.dialog.createTitle")),1),t("span",As,o(e(l)("meters.dialog.subtitle")),1)])]),i(e(_),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:n[12]||(n[12]=s=>b.value=!1),class:"text-white hover:bg-white/10"})]),t("div",Rs,[t("div",Es,[t("div",Ls,[t("label",Ns,o(e(l)("meters.form.serial_number")),1),i(e(E),{modelValue:e(r).serial_number,"onUpdate:modelValue":n[13]||(n[13]=s=>e(r).serial_number=s),class:"w-full",placeholder:e(l)("meters.form.serial_number_placeholder"),invalid:e(r).errors.serial_number},null,8,["modelValue","placeholder","invalid"])]),t("div",Bs,[t("label",Hs,o(e(l)("meters.form.manufacturer")),1),i(e(E),{modelValue:e(r).manufacturer,"onUpdate:modelValue":n[14]||(n[14]=s=>e(r).manufacturer=s),class:"w-full",placeholder:e(l)("meters.form.manufacturer_placeholder")},null,8,["modelValue","placeholder"])]),t("div",Ks,[t("label",qs,o(e(l)("meters.form.model")),1),i(e(E),{modelValue:e(r).model,"onUpdate:modelValue":n[15]||(n[15]=s=>e(r).model=s),class:"w-full",placeholder:e(l)("meters.form.model_placeholder")},null,8,["modelValue","placeholder"])]),t("div",Ws,[t("label",Qs,o(e(l)("meters.form.type")),1),i(e(j),{modelValue:e(r).type,"onUpdate:modelValue":n[16]||(n[16]=s=>e(r).type=s),options:ne.value,class:"w-full",placeholder:e(l)("meters.form.type_placeholder")},null,8,["modelValue","options","placeholder"])]),t("div",Zs,[t("label",Ps,o(e(l)("meters.form.status")),1),i(e(j),{modelValue:e(r).status,"onUpdate:modelValue":n[17]||(n[17]=s=>e(r).status=s),options:oe.value,class:"w-full",placeholder:e(l)("meters.form.status_placeholder")},null,8,["modelValue","options","placeholder"])]),t("div",Gs,[t("label",Js,o(e(l)("meters.form.connection")),1),i(e(j),{modelValue:e(r).connection_id,"onUpdate:modelValue":n[18]||(n[18]=s=>e(r).connection_id=s),options:u.connections,optionValue:"id",filter:"",class:"w-full shadow-sm border-slate-200 p-inputtext-sm",placeholder:e(l)("keypads.form.connection_placeholder"),showClear:"","filter-fields":["full_name","first_name","last_name","customer_code"]},{value:p(s=>{var d,w,I;return[s.value?(m(),v("div",Xs,[t("div",Ys,[t("span",el,o((d=u.connections.find(A=>A.id===s.value))==null?void 0:d.full_name),1),t("span",tl,o((w=u.connections.find(A=>A.id===s.value))==null?void 0:w.customer_code),1),(I=u.connections.find(A=>A.id===s.value))!=null&&I.keypad_id?(m(),v("i",sl)):h("",!0)])])):(m(),v("span",ll,o(s.placeholder),1))]}),option:p(s=>[t("div",nl,[t("div",ol,[t("span",il,o(s.option.full_name),1),t("div",al,[t("span",rl,o(s.option.customer_code),1)])]),t("div",dl,[s.option.zone?(m(),V(e(U),{key:0,value:s.option.zone,severity:"secondary",class:"text-[8px] px-1 h-3.5"},null,8,["value"])):h("",!0),s.option.keypad_id?(m(),V(e(U),{key:1,value:e(l)("keypads.form.has_keypad"),severity:"warning",class:"text-[8px] px-1 h-3.5"},null,8,["value"])):h("",!0)])])]),footer:p(()=>[t("div",cl,o(u.connections.length)+" "+o(e(l)("connections.headTitle").toLowerCase()),1)]),_:1},8,["modelValue","options","placeholder"])]),t("div",ml,[t("label",ul,o(e(l)("meters.form.installation_date")),1),i(e(ve),{modelValue:e(r).installation_date,"onUpdate:modelValue":n[19]||(n[19]=s=>e(r).installation_date=s),dateFormat:"dd/mm/yy",showIcon:"",iconDisplay:"input",class:"w-full",placeholder:e(l)("common.date_format_placeholder")},null,8,["modelValue","placeholder"])]),t("div",pl,[t("label",fl,o(e(l)("meters.form.region")),1),i(e(j),{modelValue:e(r).region_id,"onUpdate:modelValue":n[20]||(n[20]=s=>e(r).region_id=s),options:u.regions,optionLabel:"designation",optionValue:"id",filter:"",class:"w-full",placeholder:e(l)("meters.form.region_placeholder")},null,8,["modelValue","options","placeholder"])]),t("div",vl,[t("label",xl,o(e(l)("meters.form.zone")),1),i(e(j),{modelValue:e(r).zone_id,"onUpdate:modelValue":n[21]||(n[21]=s=>e(r).zone_id=s),options:re.value,optionLabel:"nomenclature",optionValue:"id",filter:"",class:"w-full",placeholder:e(l)("meters.form.zone_placeholder"),disabled:!e(r).region_id||re.value.length===0},null,8,["modelValue","options","placeholder","disabled"])]),t("div",_l,[i(e(lt),{modelValue:e(r).is_additional,"onUpdate:modelValue":n[22]||(n[22]=s=>e(r).is_additional=s),binary:!0,inputId:"is_additional"},null,8,["modelValue"]),t("label",hl,o(e(l)("meters.form.is_additional")),1)]),t("div",gl,[t("label",bl,o(e(l)("meters.form.notes")),1),i(e(et),{modelValue:e(r).notes,"onUpdate:modelValue":n[23]||(n[23]=s=>e(r).notes=s),rows:"3",class:"w-full",placeholder:e(l)("meters.form.notes_placeholder")},null,8,["modelValue","placeholder"])])])])])]),_:1},8,["visible"]),i(e(Ge),{position:"bottom-right"}),i(e(Je))]),_:1}),i(e(fe),{visible:e(L),"onUpdate:visible":n[31]||(n[31]=s=>ce(L)?L.value=s:null),modal:"",header:!1,closable:!1,style:{width:"95vw",maxWidth:"600px"},pt:{root:{class:"rounded-[3rem] overflow-hidden border-none shadow-2xl"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:p(()=>[t("div",Ql,[i(e(_),{label:e(l)("common.cancel"),icon:"pi pi-times",text:"",severity:"secondary",onClick:n[30]||(n[30]=s=>L.value=!1),class:"font-bold uppercase text-[10px] tracking-widest"},null,8,["label"]),i(e(_),{label:e(l)("meters.actions.confirm_transfer"),icon:"pi pi-check-circle",onClick:e(je),loading:e($).processing,class:"px-10 h-14 rounded-2xl shadow-xl shadow-indigo-100 font-black uppercase tracking-widest text-xs",disabled:e(H).length===0},null,8,["label","onClick","loading","disabled"])])]),default:p(()=>[t("div",kl,[t("div",wl,[Vl,t("div",Cl,[t("h2",Sl,o(e(l)("meters.dialog.transfer_title")),1),zl])]),i(e(_),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:n[26]||(n[26]=s=>L.value=!1),class:"text-white hover:bg-white/10"})]),t("div",Tl,[t("div",Fl,[t("label",$l,o(e(l)("meters.dialog.destination_region")),1),i(e(j),{modelValue:e($).region_id,"onUpdate:modelValue":n[27]||(n[27]=s=>e($).region_id=s),options:u.regions,optionLabel:"designation",optionValue:"id",filter:"",class:"w-full",placeholder:e(l)("meters.form.region_placeholder"),invalid:e($).errors.region_id},null,8,["modelValue","options","placeholder","invalid"]),e($).errors.region_id?(m(),v("small",jl,o(e($).errors.region_id),1)):h("",!0)]),t("div",Ul,[t("label",Dl,o(e(l)("meters.dialog.add_by_serial")),1),i(e(Qe),{modelValue:e(G),"onUpdate:modelValue":n[28]||(n[28]=s=>ce(G)?G.value=s:null),suggestions:e(Fe),onComplete:n[29]||(n[29]=s=>e(Ue)(s)),onItemSelect:e(De),field:"serial_number",placeholder:"Rechercher et ajouter un compteur en stock...",class:"w-full",inputClass:"p-inputtext-lg"},{option:p(s=>{var d,w;return[t("div",Ol,[t("div",Ml,[t("span",Il,o(s.option.serial_number),1),t("div",Al,[Rl,t("span",El,o(((d=s.option.region)==null?void 0:d.designation)||e(l)("common.notApplicable")),1),Ll,t("span",Nl,o(e($).region_id?(w=u.regions.find(I=>I.id===e($).region_id))==null?void 0:w.designation:"..."),1)])]),t("div",null,[i(e(U),{value:e(l)(`meters.status.${s.option.status}`),severity:ie(s.option.status)},null,8,["value","severity"])])])]}),_:1},8,["modelValue","suggestions","onItemSelect"])]),t("div",Bl,[t("h4",Hl,o(e(l)("meters.dialog.to_transfer_count",{count:e(H).length})),1),t("div",Kl,[(m(!0),v(B,null,Q(e(H),s=>(m(),v("div",{key:s.id,class:"flex items-center justify-between bg-white p-2 rounded-lg border border-slate-200"},[t("span",ql,o(s.serial_number),1),i(e(_),{icon:"pi pi-times",text:"",rounded:"",severity:"danger",onClick:d=>e(Oe)(s.id),class:"w-6 h-6"},null,8,["onClick"])]))),128)),e(H).length===0?(m(),v("div",Wl,o(e(l)("meters.messages.no_meter_selected")),1)):h("",!0)])])])]),_:1},8,["visible"])],64)}}};export{kn as default};
