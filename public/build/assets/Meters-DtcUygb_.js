import{T as Me}from"./index-CQck-czE.js";import{B as Le,C as Oe,o as m,l as x,m as B,n as W,D as L,j as t,E as K,p as h,u as Ae,a as Re,b as Ie,r as g,d as O,T as Ee,w as ie,i as a,f as u,g as e,z as ae,F as N,c as re,Z as Ne,t as o,s as de,k as ce,q as P,e as V,A as Be,h as Z}from"./app-BTm5MPCd.js";import{_ as He}from"./AppLayout-PXrFRazT.js";import{u as Ke,s as Pe}from"./index-B2S-zrPE.js";import{s as _}from"./index-DR-PVOhd.js";import{a as We,s as A}from"./index-DGDWVGXJ.js";import{a as qe,s as k}from"./index-Dpj4P_iu.js";import{s as me}from"./index-C9ua_LZc.js";import{s as U}from"./index-DR_P-HCg.js";import{s as pe}from"./index-C3ZvT3G3.js";import{s as Qe}from"./index-DWk9iUT_.js";import{s as Ze}from"./index-DggD9_PH.js";import{a as Ge,s as Je}from"./index-CwE9RYdH.js";import{s as D}from"./index-B_B1CqLL.js";import{s as Xe}from"./index-CM1LmSBY.js";import{s as Ye}from"./index-5eLJkV0u.js";import{s as et}from"./index-DGQuV0xQ.js";import{s as tt}from"./index-BMBaB7B1.js";import{s as st}from"./index-4qHTzGaD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CqRe5Bfh.js";import"./index-CZPsBpjb.js";import"./index-U7kuayBf.js";import"./index-X3iKIzTH.js";import"./index-DOcyrvpR.js";import"./index-DJd_Kodp.js";import"./index-sPpDuk3t.js";var lt=function(l){var c=l.dt;return`
.p-timeline {
    display: flex;
    flex-grow: 1;
    flex-direction: column;
}

.p-timeline-left .p-timeline-event-opposite {
    text-align: right;
}

.p-timeline-left .p-timeline-event-content {
    text-align: left;
}

.p-timeline-right .p-timeline-event {
    flex-direction: row-reverse;
}

.p-timeline-right .p-timeline-event-opposite {
    text-align: left;
}

.p-timeline-right .p-timeline-event-content {
    text-align: right;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) {
    flex-direction: row-reverse;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite {
    text-align: right;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content {
    text-align: left;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-opposite {
    text-align: left;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-content {
    text-align: right;
}

.p-timeline-vertical .p-timeline-event-opposite,
.p-timeline-vertical .p-timeline-event-content {
    padding: `.concat(c("timeline.vertical.event.content.padding"),`;
}

.p-timeline-vertical .p-timeline-event-connector {
    width: `).concat(c("timeline.event.connector.size"),`;
}

.p-timeline-event {
    display: flex;
    position: relative;
    min-height: `).concat(c("timeline.event.min.height"),`;
}

.p-timeline-event:last-child {
    min-height: 0;
}

.p-timeline-event-opposite {
    flex: 1;
}

.p-timeline-event-content {
    flex: 1;
}

.p-timeline-event-separator {
    flex: 0;
    display: flex;
    align-items: center;
    flex-direction: column;
}

.p-timeline-event-marker {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    align-self: baseline;
    border-width: `).concat(c("timeline.event.marker.border.width"),`;
    border-style: solid;
    border-color: `).concat(c("timeline.event.marker.border.color"),`;
    border-radius: `).concat(c("timeline.event.marker.border.radius"),`;
    width: `).concat(c("timeline.event.marker.size"),`;
    height: `).concat(c("timeline.event.marker.size"),`;
    background: `).concat(c("timeline.event.marker.background"),`;
}

.p-timeline-event-marker::before {
    content: " ";
    border-radius: `).concat(c("timeline.event.marker.content.border.radius"),`;
    width: `).concat(c("timeline.event.marker.content.size"),`;
    height:`).concat(c("timeline.event.marker.content.size"),`;
    background: `).concat(c("timeline.event.marker.content.background"),`;
}

.p-timeline-event-marker::after {
    content: " ";
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: `).concat(c("timeline.event.marker.border.radius"),`;
    box-shadow: `).concat(c("timeline.event.marker.content.inset.shadow"),`;
}

.p-timeline-event-connector {
    flex-grow: 1;
    background: `).concat(c("timeline.event.connector.color"),`;
}

.p-timeline-horizontal {
    flex-direction: row;
}

.p-timeline-horizontal .p-timeline-event {
    flex-direction: column;
    flex: 1;
}

.p-timeline-horizontal .p-timeline-event:last-child {
    flex: 0;
}

.p-timeline-horizontal .p-timeline-event-separator {
    flex-direction: row;
}

.p-timeline-horizontal .p-timeline-event-connector {
    width: 100%;
    height: `).concat(c("timeline.event.connector.size"),`;
}

.p-timeline-horizontal .p-timeline-event-opposite,
.p-timeline-horizontal .p-timeline-event-content {
    padding: `).concat(c("timeline.horizontal.event.content.padding"),`;
}

.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(even) {
    flex-direction: column-reverse;
}

.p-timeline-bottom .p-timeline-event {
    flex-direction: column-reverse;
}
`)},nt={root:function(l){var c=l.props;return["p-timeline p-component","p-timeline-"+c.align,"p-timeline-"+c.layout]},event:"p-timeline-event",eventOpposite:"p-timeline-event-opposite",eventSeparator:"p-timeline-event-separator",eventMarker:"p-timeline-event-marker",eventConnector:"p-timeline-event-connector",eventContent:"p-timeline-event-content"},ot=Le.extend({name:"timeline",theme:lt,classes:nt}),it={name:"BaseTimeline",extends:We,props:{value:null,align:{mode:String,default:"left"},layout:{mode:String,default:"vertical"},dataKey:null},style:ot,provide:function(){return{$pcTimeline:this,$parentInstance:this}}},ue={name:"Timeline",extends:it,inheritAttrs:!1,methods:{getKey:function(l,c){return this.dataKey?Oe(l,this.dataKey):c},getPTOptions:function(l,c){return this.ptm(l,{context:{index:c,count:this.value.length}})}}};function at(f,l,c,j,q,C){return m(),x("div",L({class:f.cx("root")},f.ptmi("root")),[(m(!0),x(B,null,W(f.value,function(b,v){return m(),x("div",L({key:C.getKey(b,v),class:f.cx("event"),ref_for:!0},C.getPTOptions("event",v)),[t("div",L({class:f.cx("eventOpposite",{index:v}),ref_for:!0},C.getPTOptions("eventOpposite",v)),[K(f.$slots,"opposite",{item:b,index:v})],16),t("div",L({class:f.cx("eventSeparator"),ref_for:!0},C.getPTOptions("eventSeparator",v)),[K(f.$slots,"marker",{item:b,index:v},function(){return[t("div",L({class:f.cx("eventMarker"),ref_for:!0},C.getPTOptions("eventMarker",v)),null,16)]}),v!==f.value.length-1?K(f.$slots,"connector",{key:0,item:b,index:v},function(){return[t("div",L({class:f.cx("eventConnector"),ref_for:!0},C.getPTOptions("eventConnector",v)),null,16)]}):h("",!0)],16),t("div",L({class:f.cx("eventContent"),ref_for:!0},C.getPTOptions("eventContent",v)),[K(f.$slots,"content",{item:b,index:v})],16)],16)}),128))],16)}ue.render=at;const rt={class:"p-4 lg:p-10 bg-[#F8FAFC] min-h-screen"},dt={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-10"},ct={class:"flex items-center gap-4"},mt=t("div",{class:"w-14 h-14 bg-primary-600 rounded-2xl flex items-center justify-center shadow-xl shadow-primary-100 rotate-3"},[t("i",{class:"pi pi-bolt text-white text-xl"})],-1),pt=["innerHTML"],ut={class:"text-slate-500 text-xs font-medium uppercase tracking-widest"},ft={class:"flex gap-3 bg-white p-2 rounded-2xl shadow-sm border border-slate-100"},xt={key:0,class:"flex gap-2"},vt={class:"flex gap-2"},_t={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ht={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},gt=t("div",{class:"w-14 h-14 rounded-xl bg-slate-100 flex items-center justify-center"},[t("i",{class:"pi pi-bolt text-2xl text-slate-500"})],-1),bt={class:"text-2xl font-black text-slate-800"},yt={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},kt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},wt=t("div",{class:"w-14 h-14 rounded-xl bg-green-50 flex items-center justify-center"},[t("i",{class:"pi pi-check-circle text-2xl text-green-500"})],-1),Vt={class:"text-2xl font-black text-slate-800"},Ct={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},Tt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},zt=t("div",{class:"w-14 h-14 rounded-xl bg-red-50 flex items-center justify-center"},[t("i",{class:"pi pi-exclamation-triangle text-2xl text-red-500"})],-1),St={class:"text-2xl font-black text-slate-800"},$t={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},jt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},Ft=t("div",{class:"w-14 h-14 rounded-xl bg-sky-50 flex items-center justify-center"},[t("i",{class:"pi pi-inbox text-2xl text-sky-500"})],-1),Ut={class:"text-2xl font-black text-slate-800"},Dt={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},Mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},Lt={class:"lg:col-span-2"},Ot={class:"text-sm font-black text-slate-600 uppercase tracking-widest mb-4"},At={key:0,class:"flex flex-wrap gap-4"},Rt=["onClick"],It=t("div",{class:"w-10 h-10 rounded-lg bg-sky-100 flex items-center justify-center"},[t("i",{class:"pi pi-map-marker text-lg text-sky-600"})],-1),Et={class:"text-xl font-black text-slate-800"},Nt={class:"text-[10px] font-bold text-slate-500 uppercase tracking-wider"},Bt={key:1,class:"text-center py-4 bg-white rounded-xl border border-slate-200 text-slate-400 italic text-sm"},Ht={key:2,class:"mt-6 p-6 bg-primary-50 border-2 border-dashed border-primary-200 rounded-2xl animate-fade-in"},Kt={class:"flex justify-between items-center mb-4"},Pt={class:"text-sm font-black text-primary-800 uppercase tracking-widest"},Wt={class:"text-primary-600"},qt={class:"flex flex-wrap gap-3"},Qt=t("div",{class:"w-8 h-8 rounded-md bg-primary-100 flex items-center justify-center"},[t("i",{class:"pi pi-compass text-sm text-primary-700"})],-1),Zt={class:"text-lg font-black text-slate-800"},Gt={class:"text-[9px] font-bold text-primary-600/80 uppercase tracking-wider"},Jt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm"},Xt={class:"text-sm font-black text-slate-600 uppercase tracking-widest mb-4"},Yt={class:"flex justify-center items-center h-48"},es={class:"bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-200/60 overflow-hidden"},ts={class:"flex justify-between items-center p-4"},ss={class:"flex items-center gap-2"},ls={class:"flex items-center gap-4"},ns=t("div",{class:"w-12 h-12 rounded-xl flex items-center justify-center bg-slate-100"},[t("i",{class:"pi pi-bolt text-slate-500"})],-1),os={class:"flex flex-col"},is=["onClick"],as={class:"text-[10px] font-mono text-slate-400 tracking-tighter"},rs=["href"],ds=t("i",{class:"pi pi-user text-primary-400 text-xs group-hover:text-primary-600"},null,-1),cs={class:"text-sm font-bold text-slate-600 group-hover:text-primary-600 group-hover:underline"},ms={key:1,class:"text-slate-400 text-xs italic"},ps={class:"text-xs font-medium text-slate-500"},us={class:"text-xs font-medium text-slate-500"},fs={class:"text-xs font-medium text-slate-500"},xs=["title"],vs={class:"flex gap-2 justify-end"},_s={class:"bg-slate-50 p-6 border-t border-slate-200"},hs={class:"text-xs font-black uppercase tracking-widest text-slate-600 mb-6 flex items-center gap-3"},gs=t("i",{class:"pi pi-history text-primary-500"},null,-1),bs={key:0},ys=t("i",{class:"pi pi-arrow-right-arrow-left text-sm"},null,-1),ks=[ys],ws={class:"p-4 bg-white rounded-xl border border-slate-200 shadow-sm mb-4"},Vs={class:"text-xs font-bold text-slate-500 mb-2"},Cs={class:"flex items-center gap-3 text-sm"},Ts=t("i",{class:"pi pi-angle-double-right text-slate-400"},null,-1),zs={class:"text-right text-[10px] italic text-slate-400 mt-3"},Ss={key:1,class:"text-center py-4 text-slate-400 italic text-sm"},$s={class:"text-sm font-black text-slate-800 mb-4"},js={class:"px-8 py-5 bg-slate-900 text-white flex justify-between items-center relative z-50 rounded-xl"},Fs={class:"flex items-center gap-4"},Us=t("div",{class:"p-2.5 bg-blue-500/20 rounded-xl border border-blue-500/30"},[t("i",{class:"pi pi-bolt text-blue-400 text-xl"})],-1),Ds={class:"flex flex-col"},Ms={class:"text-sm font-black uppercase tracking-[0.15em] text-white leading-none"},Ls={class:"text-[9px] text-blue-300 font-bold uppercase tracking-tighter mt-1.5 opacity-80 italic"},Os={class:"p-8 bg-white max-h-[70vh] overflow-y-auto scroll-smooth"},As={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5 py-4"},Rs={class:"flex flex-col gap-2 md:col-span-2"},Is={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Es={class:"flex flex-col gap-2"},Ns={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Bs={class:"flex flex-col gap-2"},Hs={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Ks={class:"flex flex-col gap-2"},Ps={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Ws={class:"flex flex-col gap-2"},qs={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Qs={class:"flex flex-col gap-2"},Zs={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Gs={key:0,class:"flex items-center gap-2 overflow-hidden"},Js={class:"flex flex-row items-center gap-2 truncate"},Xs={class:"text-xs font-semibold text-slate-900 leading-none"},Ys={class:"text-[10px] text-indigo-600 font-bold uppercase leading-none"},el={key:0,class:"pi pi-exclamation-triangle text-red-500 text-[10px]"},tl={key:1,class:"text-xs text-slate-400 font-normal"},sl={class:"flex items-center justify-between w-full py-0"},ll={class:"flex flex-col py-1"},nl={class:"text-xs font-bold text-slate-800 leading-tight"},ol={class:"flex items-center gap-1"},il={class:"text-[9px] text-slate-500 uppercase tracking-tighter"},al={class:"flex gap-1"},rl={class:"py-1 px-3 border-t bg-slate-50 text-[9px] text-slate-400 italic"},dl={class:"flex flex-col gap-2"},cl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},ml={class:"flex flex-col gap-2"},pl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},ul={class:"flex flex-col gap-2"},fl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},xl={class:"flex items-center gap-2 md:col-span-2"},vl={for:"is_additional",class:"text-sm font-bold text-slate-700"},_l={class:"flex flex-col gap-2 md:col-span-2"},hl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},gl={class:"flex justify-between items-center w-full px-8 py-5 bg-slate-50 border-t border-slate-100"},bl={class:"px-8 py-5 bg-slate-900 text-white flex justify-between items-center relative z-50 rounded-xl"},yl={class:"flex items-center gap-4"},kl=t("div",{class:"p-2.5 bg-blue-500/20 rounded-xl border border-blue-500/30"},[t("i",{class:"pi pi-arrows-h text-blue-400 text-xl"})],-1),wl={class:"flex flex-col"},Vl={class:"text-sm font-black uppercase tracking-[0.15em] text-white leading-none"},Cl=t("span",{class:"text-[9px] text-blue-300 font-bold uppercase tracking-tighter mt-1.5 opacity-80 italic"},"Mouvement inter-régional",-1),Tl={class:"p-8 bg-white max-h-[70vh] overflow-y-auto scroll-smooth space-y-6"},zl={class:"flex flex-col gap-2"},Sl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},$l={key:0,class:"p-error"},jl={class:"flex flex-col gap-2"},Fl={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1"},Ul={class:"flex items-center justify-between w-full"},Dl={class:"flex flex-col"},Ml={class:"font-bold text-sm"},Ll={class:"flex items-center gap-2 text-xs text-slate-500"},Ol=t("i",{class:"pi pi-map-marker text-[10px]"},null,-1),Al={class:"font-semibold text-slate-600"},Rl=t("i",{class:"pi pi-angle-right text-[8px] text-primary-500"},null,-1),Il={class:"font-black text-primary-600"},El={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},Nl={class:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3"},Bl={class:"max-h-48 overflow-y-auto space-y-2 pr-2"},Hl={class:"text-sm font-bold text-slate-700"},Kl={key:0,class:"text-center py-4 text-slate-400 italic text-xs"},Pl={class:"flex justify-between items-center w-full px-8 py-5 bg-slate-50 border-t border-slate-100"},bn={__name:"Meters",props:{meters:Object,filters:Object,connections:Array,regions:Array,zones:Array},setup(f){const{t:l}=Ae(),c=f,j=Re(),q=Ie(),C=g(),b=g(!1);g(!1);const v=g(!1),G=g([]),J=g(),fe=g([{field:"serial_number",header:l("meters.table.serial_number")},{field:"type",header:l("meters.table.type")},{field:"status",header:l("meters.table.status")},{field:"connection_full_name",header:l("meters.table.connection_full_name")},{field:"installation_date",header:l("meters.table.installation_date")},{field:"region_name",header:l("meters.table.region_name")},{field:"zone_name",header:l("meters.table.zone_name")},{field:"is_additional",header:l("meters.table.is_additional")},{field:"notes",header:l("meters.table.notes")}]),w=g(["serial_number","type","status","connection_full_name","region_name"]),R=g(),X=()=>{R.value={global:{value:null,matchMode:N.CUSTOM},serial_number:{operator:re.AND,constraints:[{value:null,matchMode:N.STARTS_WITH}]},type:{value:null,matchMode:N.EQUALS},status:{value:null,matchMode:N.EQUALS},"connection.full_name":{operator:re.AND,constraints:[{value:null,matchMode:N.STARTS_WITH}]}}};X();const xe=(i,n,p)=>{var S,$;if(!i)return!0;const s=i.toLowerCase().split(",").map(E=>E.trim()).filter(E=>E);if(s.length===0)return!0;const d=((S=n.serial_number)==null?void 0:S.toLowerCase())||"",y=(($=n.connection_full_name)==null?void 0:$.toLowerCase())||"";return i.includes(",")?s.some(E=>d.includes(E)):d.includes(i.toLowerCase())||y.includes(i.toLowerCase())},M=O(()=>{const i={total:c.meters.data.length,active:0,in_stock:0,faulty:0};return c.meters.data.forEach(n=>{i.hasOwnProperty(n.status)&&i[n.status]++}),i}),Y=O(()=>{const i={};return c.meters.data.forEach(n=>{var p;if(n.status==="in_stock"&&n.region){const s=((p=n.region)==null?void 0:p.designation)||"Non spécifiée";i[s]||(i[s]=0),i[s]++}}),Object.entries(i).map(([n,p])=>({name:n,count:p}))}),ee=O(()=>{if(!z.value)return[];const i={};return c.meters.data.forEach(n=>{var s,d;const p=((s=n.region)==null?void 0:s.designation)||"Non spécifiée";if(n.status==="in_stock"&&p===z.value){const y=((d=n.zone)==null?void 0:d.nomenclature)||"Hors-zone";i[y]||(i[y]=0),i[y]++}}),Object.entries(i).map(([n,p])=>({name:n,count:p})).sort((n,p)=>n.name.localeCompare(p.name))}),ve=O(()=>{var p,s,d;const i=getComputedStyle(document.documentElement),n=(y,S)=>i.getPropertyValue(y).trim()||S;return{labels:[l("meters.stats.active"),l("meters.stats.in_stock"),l("meters.stats.faulty")],datasets:[{data:[((p=M.value)==null?void 0:p.active)||0,((s=M.value)==null?void 0:s.in_stock)||0,((d=M.value)==null?void 0:d.faulty)||0],backgroundColor:[n("--indigo-500","#6366f1"),n("--orange-500","#f59e0b"),n("--rose-500","#f43f5e")],hoverBackgroundColor:[n("--indigo-400","#818cf8"),n("--orange-400","#fbbf24"),n("--rose-400","#fb7185")]}]}}),_e=g({plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,font:{weight:"bold"}}}}}),te=g(["prepaid","postpaid"]),se=g(["active","inactive","in_stock","faulty"]),le=i=>({active:"success",in_stock:"info",faulty:"danger",inactive:"warning"})[i]||"secondary",r=Ee({id:null,serial_number:"",model:"",manufacturer:"",type:"prepaid",status:"in_stock",installation_date:null,connection_id:null,region_id:null,zone_id:null,is_additional:!1,notes:""}),he=()=>{r.reset(),v.value=!1,b.value=!0},ne=i=>{r.clearErrors(),Object.assign(r,{...i,installation_date:i.installation_date?new Date(i.installation_date):null,region_id:i.region_id,zone_id:i.zone_id,is_additional:i.is_additional}),v.value=!0,b.value=!0},ge=()=>{const i=v.value?route("meters.update",r.id):route("meters.store"),n=v.value?"put":"post";r.transform(p=>({...p,installation_date:p.installation_date?new Date(p.installation_date).toISOString().split("T")[0]:null})).submit(n,i,{onSuccess:()=>{b.value=!1,j.add({severity:"success",summary:"Succès",detail:`Compteur ${v.value?"mis à jour":"créé"} avec succès.`,life:3e3})},onError:p=>{const s=Object.values(p).join(", ");j.add({severity:"error",summary:"Erreur de sauvegarde",detail:s,life:5e3})}})},be=i=>{q.require({message:l("meters.confirm.deleteMessage",{serial_number:i.serial_number}),header:l("meters.confirm.deleteHeader"),icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:()=>{Z.delete(route("meters.destroy",i.id),{onSuccess:()=>j.add({severity:"success",summary:l("common.success"),detail:l("meters.toast.deleteSuccess"),life:3e3})})}})},ye=()=>{q.require({message:l("meters.confirm.bulkDeleteMessage",{count:T.value.length}),header:l("meters.confirm.bulkDeleteHeader"),icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",acceptLabel:l("common.delete"),rejectLabel:l("common.cancel"),accept:()=>{ke()}})},ke=()=>{Z.post(route("meters.bulkdestroy"),{ids:T.value.map(i=>i.id)},{onSuccess:()=>{j.add({severity:"success",summary:l("common.success"),detail:l("meters.toast.bulkDeleteSuccess"),life:3e3}),T.value=[]},onError:()=>{j.add({severity:"error",summary:l("common.error"),detail:l("meters.toast.bulkDeleteError"),life:3e3})}})},we=()=>{document.getElementById("import-file").click()},Ve=i=>{const n=i.target.files[0];if(!n)return;const p=new FormData;p.append("file",n),Z.post(route("meters.import"),p,{onSuccess:()=>{j.add({severity:"success",summary:l("common.success"),detail:l("meters.toast.importStarted"),life:3e3})},onError:s=>{const d=Object.values(s).join(", ");j.add({severity:"error",summary:l("meters.toast.importError"),detail:d||l("meters.toast.fileInvalid"),life:5e3})}})},Ce=O(()=>c.meters.data.map(i=>{var n,p;return{...i,connection_full_name:i.connection?`${i.connection.first_name} ${i.connection.last_name}`.trim():l("meters.table.unassigned"),region_name:((n=i.region)==null?void 0:n.designation)||l("common.notApplicable"),zone_name:((p=i.zone)==null?void 0:p.nomenclature)||l("common.notApplicable")}})),T=g([]),Te=O(()=>c.meters.data),{transferDialog:I,transferForm:F,itemsToTransfer:H,transferSearchQuery:Q,availableItemsForTransfer:ze,openTransferDialog:Se,confirmTransfer:$e,searchItemsForTransfer:je,addItemToTransfer:Fe,removeItemFromTransfer:Ue}=Ke({allItems:Te,selectedItems:T,transferRouteName:route("meters.bulk-transfer"),idKey:"meter_ids",stockStatus:["in_stock","available"],translations:{attention:l("common.attention"),selectDestinationRegion:l("myActivities.dialog.selectDestinationRegion"),success:l("common.success"),transferSuccess:i=>l("myActivities.dialog.transferSuccess",{count:i}),transferError:l("myActivities.dialog.transferError")}}),oe=O(()=>r.region_id?c.zones.filter(i=>i.region_id===r.region_id):[]);ie(()=>r.region_id,i=>{r.zone_id=null});const z=g(null),De=i=>{z.value===i?z.value=null:z.value=i};return ie(()=>r.connection_id,i=>{if(r.region_id=null,r.zone_id=null,r.meter_id=null,i&&!r.meter_id){const n=c.connections.find(p=>p.id===i);n&&(r.region_id=n.region_id,r.zone_id=n.zone_id,r.meter_id=n.meter_id)}}),(i,n)=>{const p=Me;return m(),x(B,null,[a(He,null,{default:u(()=>[a(e(Ne),{title:e(l)("meters.title")},null,8,["title"]),t("div",rt,[t("div",dt,[t("div",ct,[mt,t("div",null,[t("h1",{class:"text-2xl font-black tracking-tighter text-slate-900 uppercase",innerHTML:e(l)("meters.titleHtml")},null,8,pt),t("p",ut,o(e(l)("meters.subtitle")),1)])]),t("div",ft,[T.value.length>0?(m(),x("div",xt,[a(e(_),{label:e(l)("meters.actions.transfer")+` (${T.value.length})`,icon:"pi pi-arrows-h",severity:"info",onClick:e(Se),class:"rounded-xl px-4"},null,8,["label","onClick"]),a(e(_),{label:e(l)("meters.actions.delete")+` (${T.value.length})`,icon:"pi pi-trash",severity:"danger",onClick:ye,class:"rounded-xl px-4"},null,8,["label"])])):h("",!0),t("div",vt,[t("input",{type:"file",id:"import-file",class:"hidden",accept:".csv,.xlsx",onChange:Ve},null,32),a(e(_),{label:e(l)("meters.actions.import"),icon:"pi pi-upload",severity:"secondary",onClick:we,class:"rounded-xl px-4"},null,8,["label"]),a(e(_),{label:e(l)("meters.actions.add"),icon:"pi pi-plus",severity:"primary",raised:"",onClick:he,class:"rounded-xl px-6"},null,8,["label"])])])]),t("div",_t,[t("div",ht,[gt,t("div",null,[t("div",bt,o(M.value.total),1),t("div",yt,o(e(l)("meters.stats.total")),1)])]),t("div",kt,[wt,t("div",null,[t("div",Vt,o(M.value.active),1),t("div",Ct,o(e(l)("meters.stats.active")),1)])]),t("div",Tt,[zt,t("div",null,[t("div",St,o(M.value.faulty),1),t("div",$t,o(e(l)("meters.stats.faulty")),1)])]),t("div",jt,[Ft,t("div",null,[t("div",Ut,o(M.value.in_stock),1),t("div",Dt,o(e(l)("meters.stats.in_stock")),1)])])]),t("div",Mt,[t("div",Lt,[t("h3",Ot,o(e(l)("meters.stats.stock_by_region")),1),Y.value.length>0?(m(),x("div",At,[(m(!0),x(B,null,W(Y.value,s=>(m(),x("div",{key:s.name,onClick:d=>De(s.name),class:de(["p-4 bg-white rounded-xl border-2 shadow-sm flex items-center gap-4 cursor-pointer transition-all duration-300",z.value===s.name?"border-primary-500 ring-4 ring-primary-100":"border-slate-200 hover:border-primary-300"])},[It,t("div",null,[t("div",Et,o(s.count),1),t("div",Nt,o(s.name),1)])],10,Rt))),128))])):(m(),x("div",Bt,o(e(l)("meters.messages.no_stock")),1)),z.value&&ee.value.length>0?(m(),x("div",Ht,[t("div",Kt,[t("h3",Pt,[ce(o(e(l)("meters.stats.stock_detail_for"))+" ",1),t("span",Wt,o(z.value),1)]),P(a(e(_),{icon:"pi pi-times",text:"",rounded:"",severity:"secondary",onClick:n[0]||(n[0]=s=>z.value=null)},null,512),[[p,e(l)("meters.actions.close_details"),void 0,{bottom:!0}]])]),t("div",qt,[(m(!0),x(B,null,W(ee.value,s=>(m(),x("div",{key:s.name,class:"p-3 bg-white rounded-lg border border-primary-100 shadow-sm flex items-center gap-3"},[Qt,t("div",null,[t("div",Zt,o(s.count),1),t("div",Gt,o(s.name),1)])]))),128))])])):h("",!0)]),t("div",Jt,[t("h3",Xt,o(e(l)("meters.stats.distribution_by_status")),1),t("div",Yt,[a(e(st),{type:"doughnut",data:ve.value,options:_e.value,class:"w-full md:w-48"},null,8,["data","options"])])])]),t("div",es,[a(e(qe),{expandedRows:G.value,"onUpdate:expandedRows":n[4]||(n[4]=s=>G.value=s),ref_key:"dt",ref:C,value:Ce.value,filters:R.value,"onUpdate:filters":n[5]||(n[5]=s=>R.value=s),selection:T.value,"onUpdate:selection":n[6]||(n[6]=s=>T.value=s),dataKey:"id",paginator:!0,rows:15,filterDisplay:"menu","custom-global-filter":xe,globalFilterFields:["serial_number","model","manufacturer","type","status","connection_full_name"],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:e(l)("meters.table.report"),class:"ultimate-table"},{header:u(()=>[t("div",ts,[a(e(Ge),{iconPosition:"left"},{default:u(()=>[a(e(Je),{class:"pi pi-search text-primary-500"}),a(e(A),{modelValue:R.value.global.value,"onUpdate:modelValue":n[1]||(n[1]=s=>R.value.global.value=s),placeholder:e(l)("meters.table.search_placeholder"),class:"w-full md:w-96 rounded-2xl border-none bg-slate-100"},null,8,["modelValue","placeholder"])]),_:1}),t("div",ss,[P(a(e(_),{icon:"pi pi-filter-slash",outlined:"",severity:"secondary",onClick:X,class:"rounded-xl"},null,512),[[p,e(l)("common.resetFilters"),void 0,{bottom:!0}]]),P(a(e(_),{icon:"pi pi-download",text:"",rounded:"",severity:"secondary",onClick:n[2]||(n[2]=s=>C.value.exportCSV())},null,512),[[p,e(l)("common.exportCSV"),void 0,{bottom:!0}]]),P(a(e(_),{icon:"pi pi-cog",text:"",rounded:"",severity:"secondary",onClick:n[3]||(n[3]=s=>J.value.toggle(s))},null,512),[[p,e(l)("common.selectColumns"),void 0,{bottom:!0}]])])])]),expansion:u(({data:s})=>[t("div",_s,[t("h4",hs,[gs,ce(" "+o(e(l)("meters.history.title")),1)]),s.transfers&&s.transfers.length>0?(m(),x("div",bs,[a(e(ue),{value:s.transfers,align:"alternate",class:"custom-timeline"},{marker:u(d=>[t("span",{class:de(["flex w-8 h-8 items-center justify-center text-white rounded-full z-10 shadow-lg",{"bg-primary-500":d.index===0,"bg-slate-400":d.index>0}])},ks,2)]),content:u(d=>[t("div",ws,[t("div",Vs,o(new Date(d.item.transfer_date).toLocaleString("fr-FR")),1),t("div",Cs,[a(e(D),{value:d.item.old_region.designation,class:"bg-slate-200 text-slate-700 font-bold"},null,8,["value"]),Ts,a(e(D),{value:d.item.new_region.designation,class:"bg-primary-100 text-primary-800 font-bold"},null,8,["value"])]),t("div",zs,o(e(l)("meters.history.by_user",{user:d.item.user.name})),1)])]),_:2},1032,["value"])])):(m(),x("div",Ss,o(e(l)("meters.history.none")),1))])]),default:u(()=>[a(e(k),{expander:!0,headerStyle:"width: 3rem",frozen:""}),a(e(k),{selectionMode:"multiple",headerStyle:"width: 3rem",frozen:""}),w.value.includes("serial_number")?(m(),V(e(k),{key:0,field:"serial_number",header:e(l)("meters.table.serial_number"),sortable:"",filterField:"serial_number",frozen:"",class:"min-w-[250px]"},{body:u(({data:s})=>[t("div",ls,[ns,t("div",os,[t("a",{href:"#",onClick:Be(d=>ne(s),["prevent"]),class:"font-black text-slate-800 leading-none mb-1 hover:text-primary-600 hover:underline"},o(s.serial_number),9,is),t("span",as,o(s.manufacturer)+" - "+o(s.model),1)])])]),filter:u(({filterModel:s})=>[a(e(A),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,type:"text",class:"p-column-filter",placeholder:e(l)("meters.filter.by_serial")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):h("",!0),w.value.includes("type")?(m(),V(e(k),{key:1,field:"type",header:e(l)("meters.table.type"),sortable:"",filterField:"type"},{body:u(({data:s})=>[a(e(D),{value:s.type,class:"rounded-lg px-3 font-black text-[10px] uppercase border-none"},null,8,["value"])]),filter:u(({filterModel:s})=>[a(e(U),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,options:te.value,placeholder:e(l)("meters.filter.by_type"),class:"w-full",showClear:""},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]),_:1},8,["header"])):h("",!0),w.value.includes("status")?(m(),V(e(k),{key:2,field:"status",header:e(l)("meters.table.status"),sortable:"",filterField:"status"},{body:u(({data:s})=>[a(e(D),{value:s.status,severity:le(s.status),class:"rounded-lg px-3 font-black text-[10px] uppercase"},null,8,["value","severity"])]),filter:u(({filterModel:s})=>[a(e(U),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,options:se.value,placeholder:e(l)("meters.filter.by_status"),class:"w-full",showClear:""},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]),_:1},8,["header"])):h("",!0),w.value.includes("connection_full_name")?(m(),V(e(k),{key:3,field:"connection_full_name",header:e(l)("meters.table.connection_full_name"),sortable:"",filterField:"connection.full_name"},{body:u(({data:s})=>[s.connection?(m(),x("a",{key:0,href:i.route("connections.show",s.connection.id),class:"flex items-center gap-2 group"},[ds,t("span",cs,o(s.connection_full_name),1)],8,rs)):(m(),x("span",ms,o(e(l)("meters.table.unassigned")),1))]),filter:u(({filterModel:s})=>[a(e(A),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,type:"text",class:"p-column-filter",placeholder:e(l)("meters.filter.by_client")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):h("",!0),w.value.includes("installation_date")?(m(),V(e(k),{key:4,field:"installation_date",header:e(l)("meters.table.installation_date"),sortable:"",filterField:"installation_date",dataType:"date"},{body:u(({data:s})=>[t("span",ps,o(s.installation_date?new Date(s.installation_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):e(l)("common.notApplicableShort")),1)]),filter:u(({filterModel:s})=>[a(e(pe),{modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,dateFormat:"dd/mm/yy",placeholder:e(l)("common.date_format_placeholder"),mask:"99/99/9999"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["header"])):h("",!0),w.value.includes("region_name")?(m(),V(e(k),{key:5,field:"region_name",header:e(l)("meters.table.region_name"),sortable:""},{body:u(({data:s})=>[t("span",us,o(s.region_name),1)]),_:1},8,["header"])):h("",!0),w.value.includes("zone_name")?(m(),V(e(k),{key:6,field:"zone_name",header:e(l)("meters.table.zone_name"),sortable:""},{body:u(({data:s})=>[t("span",fs,o(s.zone_name),1)]),_:1},8,["header"])):h("",!0),w.value.includes("is_additional")?(m(),V(e(k),{key:7,field:"is_additional",header:e(l)("meters.table.is_additional"),sortable:""},{body:u(({data:s})=>[a(e(D),{value:s.is_additional?e(l)("common.yes"):e(l)("common.no"),severity:s.is_additional?"success":"secondary",class:"rounded-lg px-3 font-black text-[10px] uppercase"},null,8,["value","severity"])]),_:1},8,["header"])):h("",!0),w.value.includes("notes")?(m(),V(e(k),{key:8,field:"notes",header:e(l)("meters.table.notes"),class:"min-w-[250px]"},{body:u(({data:s})=>[t("p",{class:"text-xs text-slate-500 truncate",title:s.notes},o(s.notes||e(l)("common.notApplicableShort")),9,xs)]),_:1},8,["header"])):h("",!0),a(e(k),{header:e(l)("common.actions"),alignFrozen:"right",frozen:""},{body:u(({data:s})=>[t("div",vs,[a(e(_),{icon:"pi pi-pencil",text:"",rounded:"",severity:"info",onClick:d=>ne(s)},null,8,["onClick"]),a(e(_),{icon:"pi pi-trash",text:"",rounded:"",severity:"danger",onClick:d=>be(s)},null,8,["onClick"])])]),_:1},8,["header"])]),_:1},8,["expandedRows","value","filters","selection","currentPageReportTemplate"])]),a(e(Ye),{ref_key:"op",ref:J,appendTo:"body",id:"column_op",class:"p-4"},{default:u(()=>[t("h4",$s,o(e(l)("common.customize_columns")),1),a(e(et),{modelValue:w.value,"onUpdate:modelValue":n[7]||(n[7]=s=>w.value=s),options:fe.value,optionLabel:"header",optionValue:"field",placeholder:"Sélectionnez les colonnes",display:"chip",class:"w-full max-w-xs"},null,8,["modelValue","options"])]),_:1},512)]),a(e(me),{visible:b.value,"onUpdate:visible":n[21]||(n[21]=s=>b.value=s),modal:"",header:!1,closable:!1,style:{width:"95vw",maxWidth:"650px"},pt:{root:{class:"rounded-[3rem] overflow-hidden border-none shadow-2xl"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:u(()=>[t("div",gl,[a(e(_),{label:e(l)("common.cancel"),icon:"pi pi-times",text:"",severity:"secondary",onClick:n[20]||(n[20]=s=>b.value=!1),class:"font-bold uppercase text-[10px] tracking-widest"},null,8,["label"]),a(e(_),{label:v.value?e(l)("common.update"):e(l)("common.save"),icon:"pi pi-check-circle",severity:"indigo",onClick:ge,loading:e(r).processing,class:"px-10 h-14 rounded-2xl shadow-xl shadow-indigo-100 font-black uppercase tracking-widest text-xs"},null,8,["label","loading"])])]),default:u(()=>[t("div",null,[t("div",js,[t("div",Fs,[Us,t("div",Ds,[t("h2",Ms,o(v.value?e(l)("meters.dialog.editTitle"):e(l)("meters.dialog.createTitle")),1),t("span",Ls,o(e(l)("meters.dialog.subtitle")),1)])]),a(e(_),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:n[8]||(n[8]=s=>b.value=!1),class:"text-white hover:bg-white/10"})]),t("div",Os,[t("div",As,[t("div",Rs,[t("label",Is,o(e(l)("meters.form.serial_number")),1),a(e(A),{modelValue:e(r).serial_number,"onUpdate:modelValue":n[9]||(n[9]=s=>e(r).serial_number=s),class:"w-full",placeholder:e(l)("meters.form.serial_number_placeholder"),invalid:e(r).errors.serial_number},null,8,["modelValue","placeholder","invalid"])]),t("div",Es,[t("label",Ns,o(e(l)("meters.form.manufacturer")),1),a(e(A),{modelValue:e(r).manufacturer,"onUpdate:modelValue":n[10]||(n[10]=s=>e(r).manufacturer=s),class:"w-full",placeholder:e(l)("meters.form.manufacturer_placeholder")},null,8,["modelValue","placeholder"])]),t("div",Bs,[t("label",Hs,o(e(l)("meters.form.model")),1),a(e(A),{modelValue:e(r).model,"onUpdate:modelValue":n[11]||(n[11]=s=>e(r).model=s),class:"w-full",placeholder:e(l)("meters.form.model_placeholder")},null,8,["modelValue","placeholder"])]),t("div",Ks,[t("label",Ps,o(e(l)("meters.form.type")),1),a(e(U),{modelValue:e(r).type,"onUpdate:modelValue":n[12]||(n[12]=s=>e(r).type=s),options:te.value,class:"w-full",placeholder:e(l)("meters.form.type_placeholder")},null,8,["modelValue","options","placeholder"])]),t("div",Ws,[t("label",qs,o(e(l)("meters.form.status")),1),a(e(U),{modelValue:e(r).status,"onUpdate:modelValue":n[13]||(n[13]=s=>e(r).status=s),options:se.value,class:"w-full",placeholder:e(l)("meters.form.status_placeholder")},null,8,["modelValue","options","placeholder"])]),t("div",Qs,[t("label",Zs,o(e(l)("meters.form.connection")),1),a(e(U),{modelValue:e(r).connection_id,"onUpdate:modelValue":n[14]||(n[14]=s=>e(r).connection_id=s),options:f.connections,optionValue:"id",filter:"",class:"w-full shadow-sm border-slate-200 p-inputtext-sm",placeholder:e(l)("keypads.form.connection_placeholder"),showClear:"","filter-fields":["full_name","first_name","last_name","customer_code"]},{value:u(s=>{var d,y,S;return[s.value?(m(),x("div",Gs,[t("div",Js,[t("span",Xs,o((d=f.connections.find($=>$.id===s.value))==null?void 0:d.full_name),1),t("span",Ys,o((y=f.connections.find($=>$.id===s.value))==null?void 0:y.customer_code),1),(S=f.connections.find($=>$.id===s.value))!=null&&S.keypad_id?(m(),x("i",el)):h("",!0)])])):(m(),x("span",tl,o(s.placeholder),1))]}),option:u(s=>[t("div",sl,[t("div",ll,[t("span",nl,o(s.option.full_name),1),t("div",ol,[t("span",il,o(s.option.customer_code),1)])]),t("div",al,[s.option.zone?(m(),V(e(D),{key:0,value:s.option.zone,severity:"secondary",class:"text-[8px] px-1 h-3.5"},null,8,["value"])):h("",!0),s.option.keypad_id?(m(),V(e(D),{key:1,value:e(l)("keypads.form.has_keypad"),severity:"warning",class:"text-[8px] px-1 h-3.5"},null,8,["value"])):h("",!0)])])]),footer:u(()=>[t("div",rl,o(f.connections.length)+" "+o(e(l)("connections.headTitle").toLowerCase()),1)]),_:1},8,["modelValue","options","placeholder"])]),t("div",dl,[t("label",cl,o(e(l)("meters.form.installation_date")),1),a(e(pe),{modelValue:e(r).installation_date,"onUpdate:modelValue":n[15]||(n[15]=s=>e(r).installation_date=s),dateFormat:"dd/mm/yy",showIcon:"",iconDisplay:"input",class:"w-full",placeholder:e(l)("common.date_format_placeholder")},null,8,["modelValue","placeholder"])]),t("div",ml,[t("label",pl,o(e(l)("meters.form.region")),1),a(e(U),{modelValue:e(r).region_id,"onUpdate:modelValue":n[16]||(n[16]=s=>e(r).region_id=s),options:f.regions,optionLabel:"designation",optionValue:"id",filter:"",class:"w-full",placeholder:e(l)("meters.form.region_placeholder")},null,8,["modelValue","options","placeholder"])]),t("div",ul,[t("label",fl,o(e(l)("meters.form.zone")),1),a(e(U),{modelValue:e(r).zone_id,"onUpdate:modelValue":n[17]||(n[17]=s=>e(r).zone_id=s),options:oe.value,optionLabel:"nomenclature",optionValue:"id",filter:"",class:"w-full",placeholder:e(l)("meters.form.zone_placeholder"),disabled:!e(r).region_id||oe.value.length===0},null,8,["modelValue","options","placeholder","disabled"])]),t("div",xl,[a(e(tt),{modelValue:e(r).is_additional,"onUpdate:modelValue":n[18]||(n[18]=s=>e(r).is_additional=s),binary:!0,inputId:"is_additional"},null,8,["modelValue"]),t("label",vl,o(e(l)("meters.form.is_additional")),1)]),t("div",_l,[t("label",hl,o(e(l)("meters.form.notes")),1),a(e(Xe),{modelValue:e(r).notes,"onUpdate:modelValue":n[19]||(n[19]=s=>e(r).notes=s),rows:"3",class:"w-full",placeholder:e(l)("meters.form.notes_placeholder")},null,8,["modelValue","placeholder"])])])])])]),_:1},8,["visible"]),a(e(Qe),{position:"bottom-right"}),a(e(Ze))]),_:1}),a(e(me),{visible:e(I),"onUpdate:visible":n[27]||(n[27]=s=>ae(I)?I.value=s:null),modal:"",header:!1,closable:!1,style:{width:"95vw",maxWidth:"600px"},pt:{root:{class:"rounded-[3rem] overflow-hidden border-none shadow-2xl"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:u(()=>[t("div",Pl,[a(e(_),{label:e(l)("common.cancel"),icon:"pi pi-times",text:"",severity:"secondary",onClick:n[26]||(n[26]=s=>I.value=!1),class:"font-bold uppercase text-[10px] tracking-widest"},null,8,["label"]),a(e(_),{label:e(l)("meters.actions.confirm_transfer"),icon:"pi pi-check-circle",onClick:e($e),loading:e(F).processing,class:"px-10 h-14 rounded-2xl shadow-xl shadow-indigo-100 font-black uppercase tracking-widest text-xs",disabled:e(H).length===0},null,8,["label","onClick","loading","disabled"])])]),default:u(()=>[t("div",bl,[t("div",yl,[kl,t("div",wl,[t("h2",Vl,o(e(l)("meters.dialog.transfer_title")),1),Cl])]),a(e(_),{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:n[22]||(n[22]=s=>I.value=!1),class:"text-white hover:bg-white/10"})]),t("div",Tl,[t("div",zl,[t("label",Sl,o(e(l)("meters.dialog.destination_region")),1),a(e(U),{modelValue:e(F).region_id,"onUpdate:modelValue":n[23]||(n[23]=s=>e(F).region_id=s),options:f.regions,optionLabel:"designation",optionValue:"id",filter:"",class:"w-full",placeholder:e(l)("meters.form.region_placeholder"),invalid:e(F).errors.region_id},null,8,["modelValue","options","placeholder","invalid"]),e(F).errors.region_id?(m(),x("small",$l,o(e(F).errors.region_id),1)):h("",!0)]),t("div",jl,[t("label",Fl,o(e(l)("meters.dialog.add_by_serial")),1),a(e(Pe),{modelValue:e(Q),"onUpdate:modelValue":n[24]||(n[24]=s=>ae(Q)?Q.value=s:null),suggestions:e(ze),onComplete:n[25]||(n[25]=s=>e(je)(s)),onItemSelect:e(Fe),field:"serial_number",placeholder:"Rechercher et ajouter un compteur en stock...",class:"w-full",inputClass:"p-inputtext-lg"},{option:u(s=>{var d,y;return[t("div",Ul,[t("div",Dl,[t("span",Ml,o(s.option.serial_number),1),t("div",Ll,[Ol,t("span",Al,o(((d=s.option.region)==null?void 0:d.designation)||e(l)("common.notApplicable")),1),Rl,t("span",Il,o(e(F).region_id?(y=f.regions.find(S=>S.id===e(F).region_id))==null?void 0:y.designation:"..."),1)])]),t("div",null,[a(e(D),{value:e(l)(`meters.status.${s.option.status}`),severity:le(s.option.status)},null,8,["value","severity"])])])]}),_:1},8,["modelValue","suggestions","onItemSelect"])]),t("div",El,[t("h4",Nl,o(e(l)("meters.dialog.to_transfer_count",{count:e(H).length})),1),t("div",Bl,[(m(!0),x(B,null,W(e(H),s=>(m(),x("div",{key:s.id,class:"flex items-center justify-between bg-white p-2 rounded-lg border border-slate-200"},[t("span",Hl,o(s.serial_number),1),a(e(_),{icon:"pi pi-times",text:"",rounded:"",severity:"danger",onClick:d=>e(Ue)(s.id),class:"w-6 h-6"},null,8,["onClick"])]))),128)),e(H).length===0?(m(),x("div",Kl,o(e(l)("meters.messages.no_meter_selected")),1)):h("",!0)])])])]),_:1},8,["visible"])],64)}}};export{bn as default};
