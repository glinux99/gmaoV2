import{T as Se}from"./index-BeMiMaX7.js";import{s as Ce}from"./index-J7aFQzQg.js";import{s as qe}from"./index-DjU5rnlX.js";import{s as Ue}from"./index-C20p2cSe.js";import{s as Te}from"./index-DdT1qFJk.js";import{s as Fe}from"./index-JNFFLNI-.js";import{r as f,d as w,u as Re,a as De,b as Ae,T as ie,_ as Ie,e as g,f as m,g as t,F as D,c as j,o as c,i,Z as Ee,j as e,k as C,t as n,l as k,m as ne,n as de,p as b,q as A,U as ce,s as Le,h as I,x as $e,y as Me}from"./app-B4oSAkVP.js";import{_ as je}from"./AppLayout-CEyAmMP5.js";import{s as O}from"./index-CZOaMDIN.js";import{s as Oe}from"./index-CRfXkZE2.js";import{s as ze}from"./index-WjAcbiK8.js";import{s as V,a as Ne}from"./index-YrJ63t72.js";import{s as h}from"./index-DVIMWJjq.js";import{s as ue}from"./index-DzuzenO3.js";import{s as z}from"./index-DzCpZxvp.js";import{a as Be,s as He}from"./index-Dhf6pfmr.js";import{s as We}from"./index-DUhl8XWl.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-W2upbyuC.js";import"./index-gwiffqIQ.js";import"./index-BM7dsjYe.js";import"./index-DZohkDvD.js";import"./DropdownLink-B59JWmkM.js";import"./index-LzhPMz77.js";import"./index-DecA6guR.js";import"./index-Hzlavfur.js";import"./index-BTBdV6Li.js";const d=p=>($e("data-v-bbd59790"),p=p(),Me(),p),Qe={class:"p-6 max-w-[1600px] mx-auto"},Ke={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4"},Ze={class:"flex items-center gap-4"},Je=d(()=>e("div",{class:"flex h-16 w-16 items-center justify-center rounded-xl bg-primary-600 shadow-xl shadow-primary-200 text-white text-2xl"},[e("i",{class:"pi pi-box"})],-1)),Xe={class:"text-2xl font-black tracking-tighter text-slate-900 uppercase"},Ye=d(()=>e("span",{class:"text-primary-600"},"GMAO",-1)),et={class:"text-slate-500 text-xs font-medium uppercase tracking-widest"},tt={class:"flex gap-2"},st={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},lt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},ot=d(()=>e("div",{class:"w-14 h-14 rounded-xl bg-slate-100 flex items-center justify-center"},[e("i",{class:"pi pi-box text-2xl text-slate-500"})],-1)),at={class:"text-2xl font-black text-slate-800"},rt=d(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Pièces Uniques",-1)),it={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},nt=d(()=>e("div",{class:"w-14 h-14 rounded-xl bg-red-50 flex items-center justify-center"},[e("i",{class:"pi pi-exclamation-triangle text-2xl text-red-500"})],-1)),dt={class:"text-2xl font-black text-slate-800"},ct=d(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Stock Faible",-1)),ut={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},pt=d(()=>e("div",{class:"w-14 h-14 rounded-xl bg-green-50 flex items-center justify-center"},[e("i",{class:"pi pi-wallet text-2xl text-green-500"})],-1)),mt={class:"text-2xl font-black text-slate-800"},ft=d(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Valeur Totale Stock",-1)),bt={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},gt=d(()=>e("h3",{class:"font-bold"},"Erreurs lors de la dernière importation :",-1)),_t={class:"list-disc list-inside mt-2 text-sm"},xt={class:"card-v11 overflow-hidden border border-slate-200 rounded-2xl bg-white shadow-sm"},ht={class:"flex flex-col md:flex-row justify-between items-center gap-4 p-4"},vt={class:"flex flex-col md:flex-row items-center gap-3 w-full md:w-auto"},yt={class:"flex items-center gap-2"},wt={class:"font-mono text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-md"},kt={class:"flex items-center gap-3"},Vt={class:"text-sm font-black text-slate-700 uppercase"},Pt={class:"text-[10px] text-slate-400 font-bold italic"},St={class:"flex items-center gap-4"},Ct={class:"h-1 w-12 bg-slate-100 rounded-full overflow-hidden"},qt={class:"font-bold text-slate-500"},Ut={class:"flex justify-end gap-2"},Tt={class:"p-2 space-y-3"},Ft=d(()=>e("span",{class:"text-[10px] font-black uppercase text-slate-400 block border-b pb-2"},"Colonnes actives",-1)),Rt={class:"bg-slate-900 p-6 flex justify-between items-center text-white rounded-xl"},Dt={class:"flex items-center gap-4"},At=d(()=>e("div",{class:"p-3 bg-primary-500 rounded-2xl shadow-lg shadow-primary-500/20"},[e("i",{class:"pi pi-box text-2xl"})],-1)),It={class:"text-xl font-black uppercase tracking-tight m-0"},Et={class:"text-xs text-slate-400 m-0"},Lt={class:"p-6"},$t={class:"grid grid-cols-12 gap-6"},Mt={class:"col-span-12 lg:col-span-7 space-y-6"},jt={class:"bg-white p-6 rounded-xl shadow-sm border border-slate-200/60"},Ot=d(()=>e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-6 flex items-center gap-2"},[e("span",{class:"w-2 h-2 bg-primary-500 rounded-full"}),C(" Informations Générales ")],-1)),zt={class:"grid grid-cols-2 gap-4"},Nt={class:"flex flex-col gap-2"},Bt={class:"font-bold text-sm text-slate-600 ml-1"},Ht={key:0,class:"p-error"},Wt={class:"flex flex-col gap-2"},Gt={class:"font-bold text-sm text-slate-600 ml-1"},Qt={key:0,class:"p-error"},Kt={class:"flex flex-col gap-2 col-span-2 mt-2"},Zt={class:"font-bold text-sm text-slate-600 ml-1"},Jt={key:0,class:"bg-white p-6 rounded-xl shadow-sm border border-slate-200/60"},Xt=d(()=>e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-6 flex items-center gap-2"},[e("i",{class:"pi pi-sliders-h text-primary-500"}),C(" Spécifications Techniques ")],-1)),Yt={class:"grid grid-cols-2 gap-4 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar"},es={class:"text-[11px] font-black text-slate-500 uppercase"},ts={key:0,class:"text-red-500"},ss={class:"col-span-12 lg:col-span-5 space-y-6"},ls={class:"bg-primary-600 p-8 rounded-xl shadow-xl shadow-primary-500/20 text-white relative overflow-hidden"},os=d(()=>e("i",{class:"pi pi-chart-line absolute -right-4 -bottom-4 text-8xl opacity-10 rotate-12"},null,-1)),as={class:"relative z-10 p-4 bg-white/5 rounded-xl backdrop-blur-sm border border-white/10"},rs={class:"mb-6"},is={class:"text-[10px] font-black uppercase opacity-60 mb-1 block tracking-tighter"},ns={class:"grid grid-cols-2 gap-0 mt-4 pt-4 border-t border-white/10"},ds={class:"flex flex-col gap-1 text-center border-r border-white/10 px-2"},cs=d(()=>e("span",{class:"text-[9px] font-bold opacity-50 uppercase tracking-widest"},"Actuel",-1)),us={class:"flex flex-col gap-1 text-center px-2"},ps=d(()=>e("span",{class:"text-[9px] font-bold opacity-50 uppercase tracking-widest"},"Alerte Min",-1)),ms={class:"bg-white p-6 rounded-xl shadow-sm border border-slate-200/60"},fs=d(()=>e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-6"},"Emplacement",-1)),bs={class:"space-y-4"},gs={class:"flex flex-col gap-2"},_s={class:"font-bold text-sm text-slate-600"},xs={class:"flex flex-col gap-2"},hs={class:"font-bold text-sm text-slate-600"},vs={class:"flex items-center gap-2 bg-slate-50 p-2 rounded-xl border border-slate-200 shadow-inner"},ys=d(()=>e("i",{class:"pi pi-map-marker text-primary-500 ml-2"},null,-1)),ws={class:"flex justify-end items-center gap-3 p-4 bg-white border-t border-slate-100"},ks={class:"p-fluid"},Vs=d(()=>e("p",{class:"mb-4 text-sm text-slate-600"},[C(" Importez des pièces de rechange via un fichier CSV ou Excel. Assurez-vous que votre fichier respecte la structure suivante : "),e("br"),e("code",{class:"bg-slate-100 p-1 rounded text-xs"},"Référence, Quantité, Quantité_Min, Prix, Emplacement, Région_ID, Label_ID, User_ID")],-1)),Ps={class:"field"},Ss=d(()=>e("label",{for:"import-region"},"Région par défaut (Optionnel)",-1)),Cs=d(()=>e("small",{class:"text-slate-500"},"Toutes les pièces importées seront assignées à cette région si elle est sélectionnée.",-1)),qs={class:"field mt-4"},Us=d(()=>e("label",{for:"file-upload"},"Fichier CSV",-1)),Ts=d(()=>e("p",null,"Glissez-déposez un fichier ici pour le téléverser.",-1)),Fs={__name:"SpareParts",props:{spareParts:Object,filters:Object,regions:Array,labels:Array,users:Array,sparePartCharacteristics:Array,queryParams:Object,import_errors:Array,sparePartStats:Object,import_errors:Array},setup(p){var se,le,oe,ae;const _=p;f([{label:w(()=>a("characteristics.types.text")),value:"text"},{label:w(()=>a("characteristics.types.number")),value:"number"},{label:w(()=>a("characteristics.types.date")),value:"date"},{label:w(()=>a("characteristics.types.image")),value:"text"},{label:w(()=>a("characteristics.types.boolean")),value:"boolean"},{label:w(()=>a("characteristics.types.select")),value:"select"}]);const{t:a}=Re(),v=De(),H=Ae(),q=f(!1),N=f(!1),P=f(!1),E=f(((se=_.filters)==null?void 0:se.search)||""),L=f(!1),$=f(((le=_.filters)==null?void 0:le.region_id)||null),S=f([]),B=f(!1),o=ie({id:null,reference:"",quantity:0,min_quantity:0,price:0,location:"",region_id:null,unity_id:null,label_id:null,characteristic_values:{},user_id:null}),U=ie({file:null,region_id:null}),M=f(),W=()=>{M.value={global:{value:null,matchMode:D.CONTAINS},reference:{operator:j.AND,constraints:[{value:null,matchMode:D.STARTS_WITH}]},"label.designation":{operator:j.AND,constraints:[{value:null,matchMode:D.STARTS_WITH}]},location:{operator:j.AND,constraints:[{value:null,matchMode:D.STARTS_WITH}]},"region.designation":{operator:j.AND,constraints:[{value:null,matchMode:D.STARTS_WITH}]}}};W();const T=f({first:_.spareParts.from-1,rows:_.spareParts.per_page,sortField:((oe=_.queryParams)==null?void 0:oe.sortField)||"reference",sortOrder:((ae=_.queryParams)==null?void 0:ae.sortOrder)==="desc"?-1:1,filters:M.value}),G=r=>{B.value=!0,T.value=r;const l={...r,page:r.page+1,per_page:r.rows,search:E.value,region_id:$.value};I.get(route("spare-parts.index"),l,{preserveState:!0,onFinish:()=>{B.value=!1}})},Q=f(),K=f([{field:"reference",header:"REF"},{field:"label.designation",header:"Composant"},{field:"quantity",header:"Stock / Alerte"},{field:"price",header:"Prix"},{field:"location",header:"Emplacement"},{field:"region.designation",header:"Région"},{field:"user.name",header:"Responsable"}]),y=f(K.value.slice(0,5).map(r=>r.field)),pe=()=>{U.reset(),L.value=!0},me=r=>{const l=r.files[0];if(!l)return;const x=new FormData;x.append("file",l),U.region_id&&x.append("region_id",U.region_id),I.post(route("spare-parts.import"),x,{onSuccess:()=>{L.value=!1,v.add({severity:"success",summary:a("common.success"),detail:a("spareParts.toast.importStarted"),life:3e3})},onError:()=>{v.add({severity:"error",summary:"Erreur",detail:"Une erreur est survenue lors de l'envoi du fichier.",life:3e3})}})},fe=()=>{o.reset(),P.value=!1,N.value=!1,q.value=!0},Z=()=>{q.value=!1,N.value=!1},be=r=>{o.id=r.id,o.reference=r.reference,o.quantity=r.quantity,o.min_quantity=r.min_quantity,o.price=r.price,o.location=r.location,o.region_id=r.region_id,o.unity_id=r.unity_id,o.user_id=r.user_id,o.label_id=r.label_id,o.characteristic_values=r.spare_part_characteristics?r.spare_part_characteristics.reduce((l,x)=>(l[x.label_characteristic_id]=x.value,l),{}):{},P.value=!0,q.value=!0},ge=()=>{if(N.value=!0,!o.reference||o.quantity===null||o.min_quantity===null||o.price===null||!o.user_id)return;const r=_.labels.find(l=>l.id===o.label_id);if(r&&r.label_characteristics){for(const l of r.label_characteristics)if(l.is_required&&!o.characteristic_values[l.id]){v.add({severity:"error",summary:a("toast.error"),detail:a("spareParts.validation.characteristicRequired",{characteristic:l.name}),life:3e3});return}}_e()},_e=()=>{const r=P.value?route("spare-parts.update",o.id):route("spare-parts.store"),l=P.value?"put":"post";o.transform(x=>({...x})).submit(l,r,{onSuccess:()=>{q.value=!1,v.add({severity:"success",summary:a("toast.success"),detail:a(`spareParts.toast.${P.value?"updateSuccess":"createSuccess"}`),life:3e3}),o.reset()},onError:x=>{console.error("Erreur lors de la sauvegarde de la pièce de rechange",x),v.add({severity:"error",summary:a("toast.error"),detail:a("toast.genericError"),life:3e3})}})},xe=r=>{H.require({message:a("spareParts.confirm.deleteMessage",{reference:r.reference}),header:a("confirm.deleteHeader"),icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:a("confirm.cancel"),acceptLabel:a("confirm.delete"),acceptClass:"p-button-danger",accept:()=>{I.delete(route("spare-parts.destroy",r.id),{onSuccess:()=>{v.add({severity:"success",summary:a("toast.success"),detail:a("spareParts.toast.deleteSuccess"),life:3e3})},onError:()=>{v.add({severity:"error",summary:a("toast.error"),detail:a("spareParts.toast.deleteError"),life:3e3})}})}})},he=()=>{H.require({message:a("spareParts.confirm.bulkDeleteMessage"),header:a("confirm.deleteHeader"),accept:()=>{I.post(route("spare-parts.bulkDestroy"),{ids:S.value.map(r=>r.id)},{onSuccess:()=>{v.add({severity:"success",summary:a("toast.success"),detail:a("spareParts.toast.bulkDeleteSuccess"),life:3e3}),S.value=[]}})}})},J=w(()=>{if(o.label_id){const r=_.labels.find(l=>l.id===o.label_id);return r?r.label_characteristics:[]}return[]}),X=f(),ve=()=>{X.value.exportCSV()};let Y=null;const ee=()=>{clearTimeout(Y),Y=setTimeout(()=>{I.get(route("spare-parts.index"),{search:E.value,region_id:$.value},{preserveState:!0,replace:!0})},300)};Ie(()=>{_.import_errors&&_.import_errors.length>0&&v.add({severity:"error",summary:"Erreurs d'importation",detail:"Certaines lignes du fichier n'ont pas pu être traitées.",life:1e4})});const te=r=>r.toLocaleString("fr-FR",{style:"currency",currency:"EUR"}),ye=w(()=>P.value?a("spareParts.dialog.editTitle"):a("spareParts.dialog.createTitle")),we=w(()=>!S.value||S.value.length<2);return(r,l)=>{const x=Fe,ke=Te,F=Ue,Ve=qe,Pe=Ce,R=Se;return c(),g(je,{title:t(a)("spareParts.title")},{default:m(()=>[i(t(Ee),{title:t(a)("spareParts.headTitle")},null,8,["title"]),e("div",Qe,[i(x),i(ke),e("div",Ke,[e("div",Ze,[Je,e("div",null,[e("h1",Xe,[C(n(t(a)("spareParts.title"))+" ",1),Ye]),e("p",et,n(t(a)("spareParts.headTitle")),1)])]),e("div",tt,[i(t(h),{label:t(a)("common.import"),icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:pe},null,8,["label"]),i(t(h),{label:t(a)("spareParts.toolbar.add"),icon:"pi pi-plus",class:"shadow-lg shadow-primary-200",onClick:fe},null,8,["label"])])]),e("div",st,[e("div",lt,[ot,e("div",null,[e("div",at,n(p.sparePartStats.total),1),rt])]),e("div",it,[nt,e("div",null,[e("div",dt,n(p.sparePartStats.lowStock),1),ct])]),e("div",ut,[pt,e("div",null,[e("div",mt,n(te(p.sparePartStats.totalValue)),1),ft])])]),p.import_errors&&p.import_errors.length>0?(c(),k("div",bt,[gt,e("ul",_t,[(c(!0),k(ne,null,de(p.import_errors,(s,u)=>(c(),k("li",{key:u},n(s),1))),128))])])):b("",!0),e("div",xt,[i(t(Ne),{value:p.spareParts.data,ref_key:"dt",ref:X,dataKey:"id",selection:S.value,"onUpdate:selection":l[3]||(l[3]=s=>S.value=s),paginator:!0,rows:p.spareParts.per_page,lazy:!0,onPage:l[4]||(l[4]=s=>G(s)),onSort:l[5]||(l[5]=s=>G(s)),totalRecords:p.spareParts.total,loading:B.value,first:T.value.first,"onUpdate:first":l[6]||(l[6]=s=>T.value.first=s),sortField:T.value.sortField,sortOrder:T.value.sortOrder,rowsPerPageOptions:[10,25,50,100],filters:M.value,"onUpdate:filters":l[7]||(l[7]=s=>M.value=s),filterDisplay:"menu",globalFilterFields:["reference","label.designation","location","region.designation"],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown CurrentPageReport",currentPageReportTemplate:t(a)("spareParts.table.report"),class:"p-datatable-sm quantum-table"},{header:m(()=>[e("div",ht,[e("div",vt,[i(F,{modelValue:$.value,"onUpdate:modelValue":l[0]||(l[0]=s=>$.value=s),options:_.regions,optionLabel:"designation",optionValue:"id",placeholder:t(a)("spareParts.toolbar.filterByRegion"),showClear:"",onChange:ee,class:"w-full md:w-64 h-11 !rounded-2xl !border-slate-200 !bg-slate-50/50 focus:!ring-2 focus:!ring-primary-500/20 focus:!bg-white transition-all duration-200"},null,8,["modelValue","options","placeholder"]),i(t(Be),{iconPosition:"left",class:"w-full md:w-80"},{default:m(()=>[i(t(He),{class:"pi pi-search text-slate-400"}),i(t(z),{modelValue:E.value,"onUpdate:modelValue":l[1]||(l[1]=s=>E.value=s),onInput:ee,placeholder:t(a)("spareParts.toolbar.searchPlaceholder"),class:"w-full h-11 rounded-2xl border-slate-200 bg-slate-50/50 focus:ring-2 focus:ring-primary-500/20 focus:bg-white transition-all duration-200"},null,8,["modelValue","placeholder"])]),_:1})]),e("div",yt,[we.value?b("",!0):(c(),g(t(h),{key:0,label:`Supprimer (${S.value.length})`,icon:"pi pi-trash",severity:"danger",onClick:he,class:"rounded-xl h-11"},null,8,["label"])),A(i(t(h),{icon:"pi pi-filter-slash",outlined:"",severity:"secondary",onClick:W,class:"rounded-xl h-11"},null,512),[[R,t(a)("common.resetFilters"),void 0,{bottom:!0}]]),A(i(t(h),{icon:"pi pi-download",text:"",rounded:"",severity:"secondary",onClick:ve,class:"h-11 w-11"},null,512),[[R,t(a)("common.export"),void 0,{bottom:!0}]]),A(i(t(h),{icon:"pi pi-cog",text:"",rounded:"",severity:"secondary",onClick:l[2]||(l[2]=s=>Q.value.toggle(s)),class:"h-11 w-11"},null,512),[[R,"Colonnes",void 0,{bottom:!0}]])])])]),default:m(()=>[i(t(V),{selectionMode:"multiple",headerStyle:"width: 3rem"}),y.value.includes("reference")?(c(),g(t(V),{key:0,field:"reference",header:"REF",sortable:!0,style:{"min-width":"8rem"}},{body:m(({data:s})=>[e("span",wt,n(s.reference),1)]),_:1})):b("",!0),y.value.includes("label.designation")?(c(),g(t(V),{key:1,field:"label.designation",header:"Composant",sortable:!0,style:{"min-width":"12rem"}},{body:m(({data:s})=>{var u,re;return[e("div",kt,[e("div",{class:"w-2 h-8 rounded-full",style:ce({background:(u=s.label)==null?void 0:u.color})},null,4),e("div",null,[e("div",Vt,n((re=s.label)==null?void 0:re.designation),1),e("div",Pt,n(s.location),1)])])]}),_:1})):b("",!0),y.value.includes("quantity")?(c(),g(t(V),{key:2,field:"quantity",header:"Stock / Alerte",sortable:!0,style:{"min-width":"10rem"}},{body:m(({data:s})=>[e("div",St,[e("span",{class:Le(["text-base font-black",s.quantity<=s.min_quantity?"text-rose-500":"text-primary-600"])},n(s.quantity),3),e("div",Ct,[e("div",{class:"h-full bg-slate-300",style:ce({width:s.min_quantity/s.quantity*100+"%"})},null,4)])])]),_:1})):b("",!0),y.value.includes("price")?(c(),g(t(V),{key:3,field:"price",header:"Prix",sortable:!0,style:{"min-width":"8rem"}},{body:m(({data:s})=>[e("span",qt,n(te(s.price)),1)]),_:1})):b("",!0),y.value.includes("location")?(c(),g(t(V),{key:4,field:"location",header:"Emplacement",sortable:!0,style:{"min-width":"10rem"}})):b("",!0),y.value.includes("region.designation")?(c(),g(t(V),{key:5,field:"region.designation",header:"Région",sortable:!0,style:{"min-width":"10rem"}},{body:m(({data:s})=>{var u;return[C(n((u=s.region)==null?void 0:u.designation),1)]}),_:1})):b("",!0),y.value.includes("user.name")?(c(),g(t(V),{key:6,field:"user.name",header:"Responsable",sortable:!0,style:{"min-width":"10rem"}},{body:m(({data:s})=>{var u;return[C(n((u=s.user)==null?void 0:u.name),1)]}),_:1})):b("",!0),i(t(V),{header:"Actions",alignFrozen:"right",frozen:""},{body:m(({data:s})=>[e("div",Ut,[A(i(t(h),{icon:"pi pi-pencil",text:"",rounded:"",onClick:u=>be(s),class:"!text-slate-400 hover:!bg-primary-50 hover:!text-primary-600 transition-all"},null,8,["onClick"]),[[R,"Modifier",void 0,{top:!0}]]),A(i(t(h),{icon:"pi pi-trash",text:"",rounded:"",onClick:u=>xe(s),class:"!text-slate-400 hover:!bg-red-50 hover:!text-red-500 transition-all"},null,8,["onClick"]),[[R,"Supprimer",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","selection","rows","totalRecords","loading","first","sortField","sortOrder","filters","currentPageReportTemplate"])]),i(t(Oe),{ref_key:"op",ref:Q,class:"quantum-overlay"},{default:m(()=>[e("div",Tt,[Ft,i(t(ze),{modelValue:y.value,"onUpdate:modelValue":l[8]||(l[8]=s=>y.value=s),options:K.value,optionLabel:"header",optionValue:"field",display:"chip",class:"w-64 quantum-multiselect"},null,8,["modelValue","options"])])]),_:1},512),i(t(ue),{visible:q.value,"onUpdate:visible":l[17]||(l[17]=s=>q.value=s),modal:"",header:!1,closable:!1,style:{width:"65rem"},class:"p-0 overflow-hidden shadow-2xl",pt:{root:{class:"border-none rounded-3xl bg-slate-50"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:m(()=>[e("div",ws,[i(t(h),{label:t(a)("dialog.cancel"),icon:"pi pi-times",onClick:Z,text:"",severity:"secondary",class:"!rounded-xl font-bold"},null,8,["label"]),i(t(h),{label:t(a)("dialog.save"),icon:"pi pi-check-circle",onClick:ge,loading:t(o).processing,class:"!rounded-xl !bg-slate-900 !border-none !px-8 shadow-lg shadow-slate-200 font-bold"},null,8,["label","loading"])])]),default:m(()=>[e("div",Rt,[e("div",Dt,[At,e("div",null,[e("h2",It,n(ye.value),1),e("p",Et,n(P.value?t(a)("spareParts.dialog.editSubtitle"):t(a)("spareParts.dialog.createSubtitle")),1)])]),i(t(h),{icon:"pi pi-times",onClick:Z,text:"",rounded:"",class:"text-white hover:bg-white/10"})]),e("div",Lt,[e("div",$t,[e("div",Mt,[e("div",jt,[Ot,e("div",zt,[e("div",Nt,[e("label",Bt,n(t(a)("spareParts.form.partType")),1),i(F,{modelValue:t(o).label_id,"onUpdate:modelValue":l[9]||(l[9]=s=>t(o).label_id=s),options:p.labels,optionLabel:"designation",optionValue:"id",class:"w-full !rounded-xl !border-slate-200 !bg-slate-50/50"},null,8,["modelValue","options"]),t(o).errors.label_id?(c(),k("small",Ht,n(t(o).errors.label_id),1)):b("",!0)]),e("div",Wt,[e("label",Gt,n(t(a)("spareParts.form.reference")),1),i(t(z),{modelValue:t(o).reference,"onUpdate:modelValue":l[10]||(l[10]=s=>t(o).reference=s),modelModifiers:{trim:!0},class:"!rounded-xl !border-slate-200 font-mono font-bold"},null,8,["modelValue"]),t(o).errors.reference?(c(),k("small",Qt,n(t(o).errors.reference),1)):b("",!0)]),e("div",Kt,[e("label",Zt,n(t(a)("spareParts.form.responsible")),1),i(F,{modelValue:t(o).user_id,"onUpdate:modelValue":l[11]||(l[11]=s=>t(o).user_id=s),options:p.users,optionLabel:"name",optionValue:"id",class:"w-full !rounded-xl !border-slate-200"},null,8,["modelValue","options"])])])]),J.value.length>0?(c(),k("div",Jt,[Xt,e("div",Yt,[(c(!0),k(ne,null,de(J.value,s=>(c(),k("div",{key:s.id,class:"flex flex-col gap-2 bg-slate-50 p-3 rounded-2xl border border-slate-100"},[e("label",es,[C(n(s.name)+" ",1),s.is_required?(c(),k("span",ts,"*")):b("",!0)]),["text","image"].includes(s.type)?(c(),g(t(z),{key:0,modelValue:t(o).characteristic_values[s.id],"onUpdate:modelValue":u=>t(o).characteristic_values[s.id]=u,class:"!p-inputtext-sm !border-none !bg-white !rounded-lg shadow-sm"},null,8,["modelValue","onUpdate:modelValue"])):s.type==="number"?(c(),g(t(O),{key:1,modelValue:t(o).characteristic_values[s.id],"onUpdate:modelValue":u=>t(o).characteristic_values[s.id]=u,class:"!border-none !bg-white !rounded-lg shadow-sm"},null,8,["modelValue","onUpdate:modelValue"])):s.type==="date"?(c(),g(Ve,{key:2,modelValue:t(o).characteristic_values[s.id],"onUpdate:modelValue":u=>t(o).characteristic_values[s.id]=u,dateFormat:"dd/mm/yy",class:"!border-none !bg-white !rounded-lg shadow-sm"},null,8,["modelValue","onUpdate:modelValue"])):s.type==="boolean"?(c(),g(Pe,{key:3,modelValue:t(o).characteristic_values[s.id],"onUpdate:modelValue":u=>t(o).characteristic_values[s.id]=u},null,8,["modelValue","onUpdate:modelValue"])):b("",!0)]))),128))])])):b("",!0)]),e("div",ss,[e("div",ls,[os,e("div",as,[e("div",rs,[e("label",is,n(t(a)("spareParts.form.price"))+" (EUR) ",1),i(t(O),{modelValue:t(o).price,"onUpdate:modelValue":l[12]||(l[12]=s=>t(o).price=s),mode:"currency",currency:"EUR",locale:"fr-FR",class:"w-full",pt:{input:{class:"bg-transparent border-none text-white text-4xl font-black p-0 focus:ring-0 shadow-none selection:bg-blue-500/30"}}},null,8,["modelValue"])]),e("div",ns,[e("div",ds,[cs,i(t(O),{modelValue:t(o).quantity,"onUpdate:modelValue":l[13]||(l[13]=s=>t(o).quantity=s),min:0,class:"w-full",pt:{input:{class:"bg-transparent border-none text-white text-xl font-bold p-0 text-center focus:ring-0 shadow-none"}}},null,8,["modelValue"])]),e("div",us,[ps,i(t(O),{modelValue:t(o).min_quantity,"onUpdate:modelValue":l[14]||(l[14]=s=>t(o).min_quantity=s),min:0,class:"w-full",pt:{input:{class:"bg-transparent border-none text-orange-400 text-xl font-bold p-0 text-center focus:ring-0 shadow-none"}}},null,8,["modelValue"])])])])]),e("div",ms,[fs,e("div",bs,[e("div",gs,[e("label",_s,n(t(a)("spareParts.form.region")),1),i(F,{modelValue:t(o).region_id,"onUpdate:modelValue":l[15]||(l[15]=s=>t(o).region_id=s),options:p.regions,optionLabel:"designation",optionValue:"id",class:"!rounded-xl !bg-slate-50/50"},null,8,["modelValue","options"])]),e("div",xs,[e("label",hs,n(t(a)("spareParts.form.location")),1),e("div",vs,[ys,i(t(z),{modelValue:t(o).location,"onUpdate:modelValue":l[16]||(l[16]=s=>t(o).location=s),modelModifiers:{trim:!0},class:"!border-none !bg-transparent w-full font-bold text-sm",placeholder:"Rayon / Étagère"},null,8,["modelValue"])])])])])])])])]),_:1},8,["visible"]),i(t(ue),{visible:L.value,"onUpdate:visible":l[19]||(l[19]=s=>L.value=s),modal:"",header:"Importer des Pièces de Rechange",style:{width:"40rem"}},{default:m(()=>[e("div",ks,[Vs,e("div",Ps,[Ss,i(F,{id:"import-region",modelValue:t(U).region_id,"onUpdate:modelValue":l[18]||(l[18]=s=>t(U).region_id=s),options:_.regions,optionLabel:"designation",optionValue:"id",placeholder:"Assigner à une région",class:"w-full"},null,8,["modelValue","options"]),Cs]),e("div",qs,[Us,i(t(We),{name:"file",onSelect:r.onFileSelect,multiple:!1,accept:".csv,.txt,.xls,.xlsx",maxFileSize:1e6,chooseLabel:"Choisir un fichier",auto:!0,customUpload:"",onUploader:me},{empty:m(()=>[Ts]),_:1},8,["onSelect"])])])]),_:1},8,["visible"])])]),_:1},8,["title"])}}},al=Ge(Fs,[["__scopeId","data-v-bbd59790"]]);export{al as default};
