import{T as qe}from"./index-BRtQJ42O.js";import{s as Ue}from"./index-BNv1ge8m.js";import{s as Te}from"./index-BVT6l1o2.js";import{s as Fe}from"./index-CAeMJtKO.js";import{s as Re}from"./index-5ThWo-k1.js";import{s as De}from"./index-XYa5dVaH.js";import{r as f,d as k,u as Ae,a as Ie,b as Le,T as ne,_ as Ee,e as g,f as m,g as t,F as A,c as $,o as c,i,Z as $e,j as e,k as q,t as n,l as V,m as de,n as ce,p as b,q as I,U as ue,s as Me,h as L,x as je,y as Oe}from"./app-tNqL7mf1.js";import{_ as ze}from"./AppLayout-C6jF_llb.js";import{s as M}from"./index-CbSmUBB4.js";import{s as Ne}from"./index-Cwc5oASI.js";import{s as Be}from"./index-CWrx6gPK.js";import{s as S,a as He}from"./index-BPmrBSV6.js";import{s as h}from"./index-CASASU4u.js";import{s as pe}from"./index-_H4U2U1q.js";import{s as j}from"./index-CiHAvnIS.js";import{a as We,s as Ge}from"./index-CPJnGVc0.js";import{s as Qe}from"./index-B1KbBACv.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BbQv9taT.js";import"./index-BgQpF4oC.js";import"./index-CZa1m6mU.js";import"./index-DMRwBNCK.js";import"./DropdownLink-CSp7bdD_.js";import"./index-cPRk1myS.js";import"./index-DYwZWGlh.js";import"./index-LJs_t_xJ.js";import"./index-DkeEpoE0.js";const d=p=>(je("data-v-2b8183a6"),p=p(),Oe(),p),Ze={class:"p-6 max-w-[1600px] mx-auto"},Je={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4"},Xe={class:"flex items-center gap-4"},Ye=d(()=>e("div",{class:"flex h-16 w-16 items-center justify-center rounded-xl bg-primary-600 shadow-xl shadow-primary-200 text-white text-2xl"},[e("i",{class:"pi pi-box"})],-1)),et={class:"text-2xl font-black tracking-tighter text-slate-900 uppercase"},tt=d(()=>e("span",{class:"text-primary-600"},"GMAO",-1)),st={class:"text-slate-500 text-xs font-medium uppercase tracking-widest"},lt={class:"flex gap-2"},ot={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},at={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},rt=d(()=>e("div",{class:"w-14 h-14 rounded-xl bg-slate-100 flex items-center justify-center"},[e("i",{class:"pi pi-box text-2xl text-slate-500"})],-1)),it={class:"text-2xl font-black text-slate-800"},nt=d(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Pièces Uniques",-1)),dt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},ct=d(()=>e("div",{class:"w-14 h-14 rounded-xl bg-red-50 flex items-center justify-center"},[e("i",{class:"pi pi-exclamation-triangle text-2xl text-red-500"})],-1)),ut={class:"text-2xl font-black text-slate-800"},pt=d(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Stock Faible",-1)),mt={class:"p-6 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-5"},ft=d(()=>e("div",{class:"w-14 h-14 rounded-xl bg-green-50 flex items-center justify-center"},[e("i",{class:"pi pi-wallet text-2xl text-green-500"})],-1)),bt={class:"text-2xl font-black text-slate-800"},gt=d(()=>e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Valeur Totale Stock",-1)),xt={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},_t=d(()=>e("h3",{class:"font-bold"},"Erreurs lors de la dernière importation :",-1)),ht={class:"list-disc list-inside mt-2 text-sm"},vt={class:"card-v11 overflow-hidden border border-slate-200 rounded-2xl bg-white shadow-sm"},yt={class:"flex flex-col md:flex-row justify-between items-center gap-4 p-4"},wt={class:"flex flex-col md:flex-row items-center gap-3 w-full md:w-auto"},kt={class:"flex items-center gap-2"},Vt={class:"font-mono text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-md"},St={class:"flex items-center gap-3"},Pt={class:"text-sm font-black text-slate-700 uppercase"},Ct={class:"text-[10px] text-slate-400 font-bold italic"},qt={class:"flex items-center gap-4"},Ut={class:"h-1 w-12 bg-slate-100 rounded-full overflow-hidden"},Tt={class:"font-bold text-slate-500"},Ft={class:"flex justify-end gap-2"},Rt={class:"p-2 space-y-3"},Dt=d(()=>e("span",{class:"text-[10px] font-black uppercase text-slate-400 block border-b pb-2"},"Colonnes actives",-1)),At={class:"bg-slate-900 p-6 flex justify-between items-center text-white rounded-xl"},It={class:"flex items-center gap-4"},Lt=d(()=>e("div",{class:"p-3 bg-primary-500 rounded-2xl shadow-lg shadow-primary-500/20"},[e("i",{class:"pi pi-box text-2xl"})],-1)),Et={class:"text-xl font-black uppercase tracking-tight m-0"},$t={class:"text-xs text-slate-400 m-0"},Mt={class:"p-6"},jt={class:"grid grid-cols-12 gap-6"},Ot={class:"col-span-12 lg:col-span-7 space-y-6"},zt={class:"bg-white p-6 rounded-xl shadow-sm border border-slate-200/60"},Nt=d(()=>e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-6 flex items-center gap-2"},[e("span",{class:"w-2 h-2 bg-primary-500 rounded-full"}),q(" Informations Générales ")],-1)),Bt={class:"grid grid-cols-2 gap-4"},Ht={class:"flex flex-col gap-2"},Wt={class:"font-bold text-sm text-slate-600 ml-1"},Gt={key:0,class:"p-error"},Qt={class:"flex flex-col gap-2"},Kt={class:"font-bold text-sm text-slate-600 ml-1"},Zt={key:0,class:"p-error"},Jt={class:"flex flex-col gap-2 col-span-2 mt-2"},Xt={class:"font-bold text-sm text-slate-600 ml-1"},Yt={key:0,class:"bg-white p-6 rounded-xl shadow-sm border border-slate-200/60"},es=d(()=>e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-6 flex items-center gap-2"},[e("i",{class:"pi pi-sliders-h text-primary-500"}),q(" Spécifications Techniques ")],-1)),ts={class:"grid grid-cols-2 gap-4 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar"},ss={class:"text-[11px] font-black text-slate-500 uppercase"},ls={key:0,class:"text-red-500"},os={class:"col-span-12 lg:col-span-5 space-y-6"},as={class:"bg-primary-600 p-8 rounded-xl shadow-xl shadow-primary-500/20 text-white relative overflow-hidden"},rs=d(()=>e("i",{class:"pi pi-chart-line absolute -right-4 -bottom-4 text-8xl opacity-10 rotate-12"},null,-1)),is={class:"relative z-10 p-4 bg-white/5 rounded-xl backdrop-blur-sm border border-white/10"},ns={class:"mb-6"},ds={class:"text-[10px] font-black uppercase opacity-60 mb-1 block tracking-tighter"},cs={class:"grid grid-cols-2 gap-0 mt-4 pt-4 border-t border-white/10"},us={class:"flex flex-col gap-1 text-center border-r border-white/10 px-2"},ps=d(()=>e("span",{class:"text-[9px] font-bold opacity-50 uppercase tracking-widest"},"Actuel",-1)),ms={class:"flex flex-col gap-1 text-center px-2"},fs=d(()=>e("span",{class:"text-[9px] font-bold opacity-50 uppercase tracking-widest"},"Alerte Min",-1)),bs={class:"bg-white p-6 rounded-xl shadow-sm border border-slate-200/60"},gs=d(()=>e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-6"},"Emplacement",-1)),xs={class:"space-y-4"},_s={class:"flex flex-col gap-2"},hs={class:"font-bold text-sm text-slate-600"},vs={class:"flex flex-col gap-2"},ys={class:"font-bold text-sm text-slate-600"},ws={class:"flex items-center gap-2 bg-slate-50 p-2 rounded-xl border border-slate-200 shadow-inner"},ks=d(()=>e("i",{class:"pi pi-map-marker text-primary-500 ml-2"},null,-1)),Vs={class:"flex justify-end items-center gap-3 p-4 bg-white border-t border-slate-100"},Ss={class:"p-fluid"},Ps=d(()=>e("p",{class:"mb-4 text-sm text-slate-600"},[q(" Importez des pièces de rechange via un fichier CSV ou Excel. Assurez-vous que votre fichier respecte la structure suivante : "),e("br"),e("code",{class:"bg-slate-100 p-1 rounded text-xs"},"Référence, Quantité, Quantité_Min, Prix, Emplacement, Région_ID, Label_ID, User_ID")],-1)),Cs={class:"field"},qs=d(()=>e("label",{for:"import-region"},"Région par défaut (Optionnel)",-1)),Us=d(()=>e("small",{class:"text-slate-500"},"Toutes les pièces importées seront assignées à cette région si elle est sélectionnée.",-1)),Ts={class:"field mt-4"},Fs=d(()=>e("label",{for:"file-upload"},"Fichier CSV",-1)),Rs=d(()=>e("p",null,"Glissez-déposez un fichier ici pour le téléverser.",-1)),Ds={__name:"SpareParts",props:{spareParts:Object,filters:Object,regions:Array,labels:Array,users:Array,sparePartCharacteristics:Array,queryParams:Object,import_errors:Array,sparePartStats:Object,import_errors:Array},setup(p){var le,oe,ae,re;const x=p;f([{label:k(()=>a("characteristics.types.text")),value:"text"},{label:k(()=>a("characteristics.types.number")),value:"number"},{label:k(()=>a("characteristics.types.date")),value:"date"},{label:k(()=>a("characteristics.types.image")),value:"text"},{label:k(()=>a("characteristics.types.boolean")),value:"boolean"},{label:k(()=>a("characteristics.types.select")),value:"select"}]);const{t:a}=Ae(),v=Ie(),H=Le(),U=f(!1),O=f(!1),P=f(!1),z=f(((le=x.filters)==null?void 0:le.search)||""),E=f(!1),N=f(((oe=x.filters)==null?void 0:oe.region_id)||null),C=f([]),B=f(!1),o=ne({id:null,reference:"",quantity:0,min_quantity:0,price:0,location:"",region_id:null,unity_id:null,label_id:null,characteristic_values:{},user_id:null}),T=ne({file:null,region_id:null}),F=f(),W=()=>{F.value={global:{value:null,matchMode:A.CONTAINS},reference:{operator:$.AND,constraints:[{value:null,matchMode:A.STARTS_WITH}]},"label.designation":{operator:$.AND,constraints:[{value:null,matchMode:A.STARTS_WITH}]},location:{operator:$.AND,constraints:[{value:null,matchMode:A.STARTS_WITH}]},"region.designation":{operator:$.AND,constraints:[{value:null,matchMode:A.STARTS_WITH}]}}};W();const y=f({first:x.spareParts.from-1,rows:x.spareParts.per_page,sortField:((ae=x.queryParams)==null?void 0:ae.sortField)||"reference",sortOrder:((re=x.queryParams)==null?void 0:re.sortOrder)==="desc"?-1:1,filters:F.value}),G=r=>{y.value=r,Q()},me=()=>{y.value.filters=F.value,Q()},Q=()=>{B.value=!0;const r={...y.value,page:y.value.first/y.value.rows+1};L.get(route("spare-parts.index"),r,{preserveState:!0,preserveScroll:!0,onFinish:()=>B.value=!1})},K=f(),Z=f([{field:"reference",header:"REF"},{field:"label.designation",header:"Composant"},{field:"quantity",header:"Stock / Alerte"},{field:"price",header:"Prix"},{field:"location",header:"Emplacement"},{field:"region.designation",header:"Région"},{field:"user.name",header:"Responsable"}]),w=f(Z.value.slice(0,5).map(r=>r.field)),fe=()=>{T.reset(),E.value=!0},be=r=>{const l=r.files[0];if(!l)return;const _=new FormData;_.append("file",l),T.region_id&&_.append("region_id",T.region_id),L.post(route("spare-parts.import"),_,{onSuccess:()=>{E.value=!1,v.add({severity:"success",summary:a("common.success"),detail:a("spareParts.toast.importStarted"),life:3e3})},onError:()=>{v.add({severity:"error",summary:"Erreur",detail:"Une erreur est survenue lors de l'envoi du fichier.",life:3e3})}})},ge=()=>{o.reset(),P.value=!1,O.value=!1,U.value=!0},J=()=>{U.value=!1,O.value=!1},xe=r=>{o.id=r.id,o.reference=r.reference,o.quantity=r.quantity,o.min_quantity=r.min_quantity,o.price=r.price,o.location=r.location,o.region_id=r.region_id,o.unity_id=r.unity_id,o.user_id=r.user_id,o.label_id=r.label_id,o.characteristic_values=r.spare_part_characteristics?r.spare_part_characteristics.reduce((l,_)=>(l[_.label_characteristic_id]=_.value,l),{}):{},P.value=!0,U.value=!0},_e=()=>{if(O.value=!0,!o.reference||o.quantity===null||o.min_quantity===null||o.price===null||!o.user_id)return;const r=x.labels.find(l=>l.id===o.label_id);if(r&&r.label_characteristics){for(const l of r.label_characteristics)if(l.is_required&&!o.characteristic_values[l.id]){v.add({severity:"error",summary:a("toast.error"),detail:a("spareParts.validation.characteristicRequired",{characteristic:l.name}),life:3e3});return}}he()},he=()=>{const r=P.value?route("spare-parts.update",o.id):route("spare-parts.store"),l=P.value?"put":"post";o.transform(_=>({..._})).submit(l,r,{onSuccess:()=>{U.value=!1,v.add({severity:"success",summary:a("toast.success"),detail:a(`spareParts.toast.${P.value?"updateSuccess":"createSuccess"}`),life:3e3}),o.reset()},onError:_=>{console.error("Erreur lors de la sauvegarde de la pièce de rechange",_),v.add({severity:"error",summary:a("toast.error"),detail:a("toast.genericError"),life:3e3})}})},ve=r=>{H.require({message:a("spareParts.confirm.deleteMessage",{reference:r.reference}),header:a("confirm.deleteHeader"),icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:a("confirm.cancel"),acceptLabel:a("confirm.delete"),acceptClass:"p-button-danger",accept:()=>{L.delete(route("spare-parts.destroy",r.id),{onSuccess:()=>{v.add({severity:"success",summary:a("toast.success"),detail:a("spareParts.toast.deleteSuccess"),life:3e3})},onError:()=>{v.add({severity:"error",summary:a("toast.error"),detail:a("spareParts.toast.deleteError"),life:3e3})}})}})},ye=()=>{H.require({message:a("spareParts.confirm.bulkDeleteMessage"),header:a("confirm.deleteHeader"),accept:()=>{L.post(route("spare-parts.bulkDestroy"),{ids:C.value.map(r=>r.id)},{onSuccess:()=>{v.add({severity:"success",summary:a("toast.success"),detail:a("spareParts.toast.bulkDeleteSuccess"),life:3e3}),C.value=[]}})}})},X=k(()=>{if(o.label_id){const r=x.labels.find(l=>l.id===o.label_id);return r?r.label_characteristics:[]}return[]}),Y=f(),we=()=>{Y.value.exportCSV()};let ee=null;const te=()=>{clearTimeout(ee),ee=setTimeout(()=>{L.get(route("spare-parts.index"),{search:z.value,region_id:N.value},{preserveState:!0,replace:!0})},300)};Ee(()=>{x.import_errors&&x.import_errors.length>0&&v.add({severity:"error",summary:"Erreurs d'importation",detail:"Certaines lignes du fichier n'ont pas pu être traitées.",life:1e4})});const se=r=>r.toLocaleString("fr-FR",{style:"currency",currency:"EUR"}),ke=k(()=>P.value?a("spareParts.dialog.editTitle"):a("spareParts.dialog.createTitle")),Ve=k(()=>!C.value||C.value.length<2);return(r,l)=>{const _=De,Se=Re,R=Fe,Pe=Te,Ce=Ue,D=qe;return c(),g(ze,{title:t(a)("spareParts.title")},{default:m(()=>[i(t($e),{title:t(a)("spareParts.headTitle")},null,8,["title"]),e("div",Ze,[i(_),i(Se),e("div",Je,[e("div",Xe,[Ye,e("div",null,[e("h1",et,[q(n(t(a)("spareParts.title"))+" ",1),tt]),e("p",st,n(t(a)("spareParts.headTitle")),1)])]),e("div",lt,[i(t(h),{label:t(a)("common.import"),icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:fe},null,8,["label"]),i(t(h),{label:t(a)("spareParts.toolbar.add"),icon:"pi pi-plus",class:"shadow-lg shadow-primary-200",onClick:ge},null,8,["label"])])]),e("div",ot,[e("div",at,[rt,e("div",null,[e("div",it,n(p.sparePartStats.total),1),nt])]),e("div",dt,[ct,e("div",null,[e("div",ut,n(p.sparePartStats.lowStock),1),pt])]),e("div",mt,[ft,e("div",null,[e("div",bt,n(se(p.sparePartStats.totalValue)),1),gt])])]),p.import_errors&&p.import_errors.length>0?(c(),V("div",xt,[_t,e("ul",ht,[(c(!0),V(de,null,ce(p.import_errors,(s,u)=>(c(),V("li",{key:u},n(s),1))),128))])])):b("",!0),e("div",vt,[i(t(He),{value:p.spareParts.data,ref_key:"dt",ref:Y,dataKey:"id",selection:C.value,"onUpdate:selection":l[3]||(l[3]=s=>C.value=s),paginator:!0,rows:p.spareParts.per_page,lazy:!0,onPage:l[4]||(l[4]=s=>G(s)),onSort:l[5]||(l[5]=s=>G(s)),onFilter:me,totalRecords:p.spareParts.total,loading:B.value,first:y.value.first,"onUpdate:first":l[6]||(l[6]=s=>y.value.first=s),sortField:y.value.sortField,sortOrder:y.value.sortOrder,rowsPerPageOptions:[10,25,50,100],filters:F.value,"onUpdate:filters":l[7]||(l[7]=s=>F.value=s),filterDisplay:"menu",globalFilterFields:["reference","label.designation","location","region.designation"],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown CurrentPageReport",currentPageReportTemplate:t(a)("spareParts.table.report"),class:"p-datatable-sm quantum-table"},{header:m(()=>[e("div",yt,[e("div",wt,[i(R,{modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=s=>N.value=s),options:x.regions,optionLabel:"designation",optionValue:"id",placeholder:t(a)("spareParts.toolbar.filterByRegion"),showClear:"",onChange:te,class:"w-full md:w-64 h-11 !rounded-2xl !border-slate-200 !bg-slate-50/50 focus:!ring-2 focus:!ring-primary-500/20 focus:!bg-white transition-all duration-200"},null,8,["modelValue","options","placeholder"]),i(t(We),{iconPosition:"left",class:"w-full md:w-80"},{default:m(()=>[i(t(Ge),{class:"pi pi-search text-slate-400"}),i(t(j),{modelValue:z.value,"onUpdate:modelValue":l[1]||(l[1]=s=>z.value=s),onInput:te,placeholder:t(a)("spareParts.toolbar.searchPlaceholder"),class:"w-full h-11 rounded-2xl border-slate-200 bg-slate-50/50 focus:ring-2 focus:ring-primary-500/20 focus:bg-white transition-all duration-200"},null,8,["modelValue","placeholder"])]),_:1})]),e("div",kt,[Ve.value?b("",!0):(c(),g(t(h),{key:0,label:`Supprimer (${C.value.length})`,icon:"pi pi-trash",severity:"danger",onClick:ye,class:"rounded-xl h-11"},null,8,["label"])),I(i(t(h),{icon:"pi pi-filter-slash",outlined:"",severity:"secondary",onClick:W,class:"rounded-xl h-11"},null,512),[[D,t(a)("common.resetFilters"),void 0,{bottom:!0}]]),I(i(t(h),{icon:"pi pi-download",text:"",rounded:"",severity:"secondary",onClick:we,class:"h-11 w-11"},null,512),[[D,t(a)("common.export"),void 0,{bottom:!0}]]),I(i(t(h),{icon:"pi pi-cog",text:"",rounded:"",severity:"secondary",onClick:l[2]||(l[2]=s=>K.value.toggle(s)),class:"h-11 w-11"},null,512),[[D,"Colonnes",void 0,{bottom:!0}]])])])]),default:m(()=>[i(t(S),{selectionMode:"multiple",headerStyle:"width: 3rem"}),w.value.includes("reference")?(c(),g(t(S),{key:0,field:"reference",header:"REF",sortable:!0,style:{"min-width":"8rem"}},{body:m(({data:s})=>[e("span",Vt,n(s.reference),1)]),_:1})):b("",!0),w.value.includes("label.designation")?(c(),g(t(S),{key:1,field:"label.designation",header:"Composant",sortable:!0,style:{"min-width":"12rem"}},{body:m(({data:s})=>{var u,ie;return[e("div",St,[e("div",{class:"w-2 h-8 rounded-full",style:ue({background:(u=s.label)==null?void 0:u.color})},null,4),e("div",null,[e("div",Pt,n((ie=s.label)==null?void 0:ie.designation),1),e("div",Ct,n(s.location),1)])])]}),_:1})):b("",!0),w.value.includes("quantity")?(c(),g(t(S),{key:2,field:"quantity",header:"Stock / Alerte",sortable:!0,style:{"min-width":"10rem"}},{body:m(({data:s})=>[e("div",qt,[e("span",{class:Me(["text-base font-black",s.quantity<=s.min_quantity?"text-rose-500":"text-primary-600"])},n(s.quantity),3),e("div",Ut,[e("div",{class:"h-full bg-slate-300",style:ue({width:s.min_quantity/s.quantity*100+"%"})},null,4)])])]),_:1})):b("",!0),w.value.includes("price")?(c(),g(t(S),{key:3,field:"price",header:"Prix",sortable:!0,style:{"min-width":"8rem"}},{body:m(({data:s})=>[e("span",Tt,n(se(s.price)),1)]),_:1})):b("",!0),w.value.includes("location")?(c(),g(t(S),{key:4,field:"location",header:"Emplacement",sortable:!0,style:{"min-width":"10rem"}})):b("",!0),w.value.includes("region.designation")?(c(),g(t(S),{key:5,field:"region.designation",header:"Région",sortable:!0,style:{"min-width":"10rem"}},{body:m(({data:s})=>{var u;return[q(n((u=s.region)==null?void 0:u.designation),1)]}),_:1})):b("",!0),w.value.includes("user.name")?(c(),g(t(S),{key:6,field:"user.name",header:"Responsable",sortable:!0,style:{"min-width":"10rem"}},{body:m(({data:s})=>{var u;return[q(n((u=s.user)==null?void 0:u.name),1)]}),_:1})):b("",!0),i(t(S),{header:"Actions",alignFrozen:"right",frozen:""},{body:m(({data:s})=>[e("div",Ft,[I(i(t(h),{icon:"pi pi-pencil",text:"",rounded:"",onClick:u=>xe(s),class:"!text-slate-400 hover:!bg-primary-50 hover:!text-primary-600 transition-all"},null,8,["onClick"]),[[D,"Modifier",void 0,{top:!0}]]),I(i(t(h),{icon:"pi pi-trash",text:"",rounded:"",onClick:u=>ve(s),class:"!text-slate-400 hover:!bg-red-50 hover:!text-red-500 transition-all"},null,8,["onClick"]),[[D,"Supprimer",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","selection","rows","totalRecords","loading","first","sortField","sortOrder","filters","currentPageReportTemplate"])]),i(t(Ne),{ref_key:"op",ref:K,class:"quantum-overlay"},{default:m(()=>[e("div",Rt,[Dt,i(t(Be),{modelValue:w.value,"onUpdate:modelValue":l[8]||(l[8]=s=>w.value=s),options:Z.value,optionLabel:"header",optionValue:"field",display:"chip",class:"w-64 quantum-multiselect"},null,8,["modelValue","options"])])]),_:1},512),i(t(pe),{visible:U.value,"onUpdate:visible":l[17]||(l[17]=s=>U.value=s),modal:"",header:!1,closable:!1,style:{width:"65rem"},class:"p-0 overflow-hidden shadow-2xl",pt:{root:{class:"border-none rounded-3xl bg-slate-50"},mask:{style:"backdrop-filter: blur(8px)"}}},{footer:m(()=>[e("div",Vs,[i(t(h),{label:t(a)("dialog.cancel"),icon:"pi pi-times",onClick:J,text:"",severity:"secondary",class:"!rounded-xl font-bold"},null,8,["label"]),i(t(h),{label:t(a)("dialog.save"),icon:"pi pi-check-circle",onClick:_e,loading:t(o).processing,class:"!rounded-xl !bg-slate-900 !border-none !px-8 shadow-lg shadow-slate-200 font-bold"},null,8,["label","loading"])])]),default:m(()=>[e("div",At,[e("div",It,[Lt,e("div",null,[e("h2",Et,n(ke.value),1),e("p",$t,n(P.value?t(a)("spareParts.dialog.editSubtitle"):t(a)("spareParts.dialog.createSubtitle")),1)])]),i(t(h),{icon:"pi pi-times",onClick:J,text:"",rounded:"",class:"text-white hover:bg-white/10"})]),e("div",Mt,[e("div",jt,[e("div",Ot,[e("div",zt,[Nt,e("div",Bt,[e("div",Ht,[e("label",Wt,n(t(a)("spareParts.form.partType")),1),i(R,{modelValue:t(o).label_id,"onUpdate:modelValue":l[9]||(l[9]=s=>t(o).label_id=s),options:p.labels,optionLabel:"designation",optionValue:"id",class:"w-full !rounded-xl !border-slate-200 !bg-slate-50/50"},null,8,["modelValue","options"]),t(o).errors.label_id?(c(),V("small",Gt,n(t(o).errors.label_id),1)):b("",!0)]),e("div",Qt,[e("label",Kt,n(t(a)("spareParts.form.reference")),1),i(t(j),{modelValue:t(o).reference,"onUpdate:modelValue":l[10]||(l[10]=s=>t(o).reference=s),modelModifiers:{trim:!0},class:"!rounded-xl !border-slate-200 font-mono font-bold"},null,8,["modelValue"]),t(o).errors.reference?(c(),V("small",Zt,n(t(o).errors.reference),1)):b("",!0)]),e("div",Jt,[e("label",Xt,n(t(a)("spareParts.form.responsible")),1),i(R,{modelValue:t(o).user_id,"onUpdate:modelValue":l[11]||(l[11]=s=>t(o).user_id=s),options:p.users,optionLabel:"name",optionValue:"id",class:"w-full !rounded-xl !border-slate-200"},null,8,["modelValue","options"])])])]),X.value.length>0?(c(),V("div",Yt,[es,e("div",ts,[(c(!0),V(de,null,ce(X.value,s=>(c(),V("div",{key:s.id,class:"flex flex-col gap-2 bg-slate-50 p-3 rounded-2xl border border-slate-100"},[e("label",ss,[q(n(s.name)+" ",1),s.is_required?(c(),V("span",ls,"*")):b("",!0)]),["text","image"].includes(s.type)?(c(),g(t(j),{key:0,modelValue:t(o).characteristic_values[s.id],"onUpdate:modelValue":u=>t(o).characteristic_values[s.id]=u,class:"!p-inputtext-sm !border-none !bg-white !rounded-lg shadow-sm"},null,8,["modelValue","onUpdate:modelValue"])):s.type==="number"?(c(),g(t(M),{key:1,modelValue:t(o).characteristic_values[s.id],"onUpdate:modelValue":u=>t(o).characteristic_values[s.id]=u,class:"!border-none !bg-white !rounded-lg shadow-sm"},null,8,["modelValue","onUpdate:modelValue"])):s.type==="date"?(c(),g(Pe,{key:2,modelValue:t(o).characteristic_values[s.id],"onUpdate:modelValue":u=>t(o).characteristic_values[s.id]=u,dateFormat:"dd/mm/yy",class:"!border-none !bg-white !rounded-lg shadow-sm"},null,8,["modelValue","onUpdate:modelValue"])):s.type==="boolean"?(c(),g(Ce,{key:3,modelValue:t(o).characteristic_values[s.id],"onUpdate:modelValue":u=>t(o).characteristic_values[s.id]=u},null,8,["modelValue","onUpdate:modelValue"])):b("",!0)]))),128))])])):b("",!0)]),e("div",os,[e("div",as,[rs,e("div",is,[e("div",ns,[e("label",ds,n(t(a)("spareParts.form.price"))+" (EUR) ",1),i(t(M),{modelValue:t(o).price,"onUpdate:modelValue":l[12]||(l[12]=s=>t(o).price=s),mode:"currency",currency:"EUR",locale:"fr-FR",class:"w-full",pt:{input:{class:"bg-transparent border-none text-white text-4xl font-black p-0 focus:ring-0 shadow-none selection:bg-blue-500/30"}}},null,8,["modelValue"])]),e("div",cs,[e("div",us,[ps,i(t(M),{modelValue:t(o).quantity,"onUpdate:modelValue":l[13]||(l[13]=s=>t(o).quantity=s),min:0,class:"w-full",pt:{input:{class:"bg-transparent border-none text-white text-xl font-bold p-0 text-center focus:ring-0 shadow-none"}}},null,8,["modelValue"])]),e("div",ms,[fs,i(t(M),{modelValue:t(o).min_quantity,"onUpdate:modelValue":l[14]||(l[14]=s=>t(o).min_quantity=s),min:0,class:"w-full",pt:{input:{class:"bg-transparent border-none text-orange-400 text-xl font-bold p-0 text-center focus:ring-0 shadow-none"}}},null,8,["modelValue"])])])])]),e("div",bs,[gs,e("div",xs,[e("div",_s,[e("label",hs,n(t(a)("spareParts.form.region")),1),i(R,{modelValue:t(o).region_id,"onUpdate:modelValue":l[15]||(l[15]=s=>t(o).region_id=s),options:p.regions,optionLabel:"designation",optionValue:"id",class:"!rounded-xl !bg-slate-50/50"},null,8,["modelValue","options"])]),e("div",vs,[e("label",ys,n(t(a)("spareParts.form.location")),1),e("div",ws,[ks,i(t(j),{modelValue:t(o).location,"onUpdate:modelValue":l[16]||(l[16]=s=>t(o).location=s),modelModifiers:{trim:!0},class:"!border-none !bg-transparent w-full font-bold text-sm",placeholder:"Rayon / Étagère"},null,8,["modelValue"])])])])])])])])]),_:1},8,["visible"]),i(t(pe),{visible:E.value,"onUpdate:visible":l[19]||(l[19]=s=>E.value=s),modal:"",header:"Importer des Pièces de Rechange",style:{width:"40rem"}},{default:m(()=>[e("div",Ss,[Ps,e("div",Cs,[qs,i(R,{id:"import-region",modelValue:t(T).region_id,"onUpdate:modelValue":l[18]||(l[18]=s=>t(T).region_id=s),options:x.regions,optionLabel:"designation",optionValue:"id",placeholder:"Assigner à une région",class:"w-full"},null,8,["modelValue","options"]),Us]),e("div",Ts,[Fs,i(t(Qe),{name:"file",onSelect:r.onFileSelect,multiple:!1,accept:".csv,.txt,.xls,.xlsx",maxFileSize:1e6,chooseLabel:"Choisir un fichier",auto:!0,customUpload:"",onUploader:be},{empty:m(()=>[Rs]),_:1},8,["onSelect"])])])]),_:1},8,["visible"])])]),_:1},8,["title"])}}},il=Ke(Ds,[["__scopeId","data-v-2b8183a6"]]);export{il as default};
